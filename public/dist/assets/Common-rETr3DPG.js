import{D as t,S as w,bH as I,ae as v,o as R,aM as A,a5 as O,a6 as d,I as x,bT as N,T as P,bI as _,bK as Y,bL as B,bM as H,bN as M,bO as V,bP as U,R as K,bQ as Q,bR as z,bS as G,aR as W,H as j,bU as q,g as J,b9 as b,bt as u,bY as X,d1 as Z,B as F,d2 as p,Q as ee,bw as h,r as y,au as te,K as f,d3 as ne,af as ae,d4 as re}from"./index-DKKy_Uoh.js";import{b as le}from"./useTitle-C5NycKOZ.js";import{T as g,R as ge}from"./ResponsiveGrid-TkZ0jMIj.js";import{b as ie}from"./index-BcuMO7RW.js";var i=(e=>(e[e.PUBLIC=0]="PUBLIC",e[e.PRIVATE=1]="PRIVATE",e[e.READONLY=2]="READONLY",e[e.DEPRECATED=3]="DEPRECATED",e))(i||{});const ce=e=>{const r=R();return t(q,{get w(){var n;return(n=e.w)!=null?n:"100%"},display:"flex",flexDirection:"column",get children(){return[t(w,{get when(){return!e.hideLabel},get children(){return t(I,{get for(){return e.key},display:"flex",alignItems:"center",get children(){return[v(()=>r("settings.".concat(e.key))),t(w,{get when(){return e.flag===i.DEPRECATED},get children(){return t(A,{ml:"$2",as:ie,boxSize:"$5",color:"$danger9",verticalAlign:"middle",cursor:"pointer",onClick:()=>{var n;(n=e.onDelete)==null||n.call(e)}})}})]}})}}),t(O,{get fallback(){return t(W,{get children(){return r("settings_other.unknown_type")}})},get children(){return[t(d,{get when(){return[g.String,g.Number].includes(e.type)},get children(){return t(x,{get type(){return e.type===g.Number?"number":""},get id(){return e.key},get value(){return e.value},onInput:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===i.READONLY}})}}),t(d,{get when(){return e.type===g.Bool},get children(){return t(N,{get id(){return e.key},get checked(){return e.value==="true"},onChange:n=>{var a,s;return(s=e.onChange)==null?void 0:s.call(e,(a=n.currentTarget)!=null&&a.checked?"true":"false")},get readOnly(){return e.flag===i.READONLY}})}}),t(d,{get when(){return e.type===g.Text},get children(){return t(P,{get id(){return e.key},get value(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===i.READONLY}})}}),t(d,{get when(){return e.type===g.Select},get children(){return t(_,{get id(){return e.key},get value(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n)},get readOnly(){return e.flag===i.READONLY},get children(){return[t(Y,{get children(){return[t(B,{get children(){return r("global.choose")}}),t(H,{}),t(M,{})]}}),t(V,{get children(){return t(U,{get children(){return t(K,{get each(){var n;return(n=e.options)==null?void 0:n.split(",")},children:n=>t(Q,{value:n,get children(){return[t(z,{get children(){return r("settings.".concat(e.key,"s.").concat(n))}}),t(G,{})]}})})}})}})]}})}})]}}),t(j,{get children(){return v(()=>!!e.help)()?r("settings.".concat(e.key,"-tips")):""}})]}})},oe=e=>{const r=R(),{pathname:n}=J();le("manage.sidemenu.".concat(n().split("/").pop()));const[a,s]=b(()=>u.get("/admin/setting/list?group=".concat(e.group))),[S,o]=X([]),m=async()=>{const l=await s();h(l,o)};m();const[D,E]=b(()=>u.post("/admin/setting/save",Z(S))),[k,L]=b(()=>u.post("/admin/setting/default?group=".concat(e.group))),[C,T]=F(!1);return t(ae,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(ge,{get children(){return t(p,{each:S,children:l=>t(ce,ee(l,{onChange:c=>{o($=>l().key===$.key,"value",c)},onDelete:async()=>{T(!0);const c=await u.post("/admin/setting/delete?key=".concat(l().key));T(!1),h(c,()=>{y.success(r("global.delete_success")),m()})}}))})}}),t(te,{spacing:"$2",get children(){return[t(f,{colorScheme:"accent",onClick:m,get loading(){return a()||C()||k()},get children(){return r("global.refresh")}}),t(f,{get loading(){return D()},onClick:async()=>{const l=await E();h(l,async()=>{y.success(r("global.save_success")),ne(await u.get("/public/settings"),re)})},get children(){return r("global.save")}}),t(f,{colorScheme:"warning",get loading(){return a()||C()||k()},onClick:async()=>{const l=await L();h(l,c=>{y.info(r("manage.load_default_setting_success")),o(c)})},get children(){return r("manage.load_default_setting")}})]}})]}})};export{oe as default};
