const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/html-D3AAHnyK.js","assets/index-CsB5zT4W.js","assets/index-DYLAoZjS.css","assets/aliyun_video-zEotBuhE.js","assets/icon-BfaWsS4s.js","assets/index-Bc2gP8al.js","assets/index-DBnL0RpI.js","assets/artplayer-C5-Hz-Y-.js","assets/index-D-6PLkn_.js","assets/hls-DtmM38VC.js","assets/video_box-C2Dic8iL.js","assets/index-DlLE0hg-.js","assets/markdown-LJ7M5JKl.js","assets/flash-CYzF41N5.js","assets/markdown_with_word_wrap-BVb7r5_i.js","assets/url-9zl8QWG-.js","assets/ini-JycvQzqF.js","assets/browser-D2V2ir_S.js","assets/index-DUExJ8y_.js","assets/text-editor-BX-_9JqV.js","assets/index-Drwcd8rx.js","assets/image-BZK-k5st.js","assets/ImageWithError-BL5fr3Hs.js","assets/video-DvwKR8as.js","assets/audio-B7vHJR1z.js","assets/APlayer.min-_9IZvi8h.js","assets/APlayer-DR5w3Vxv.css","assets/useTitle-C7kyrev7.js","assets/audio-CFjueHm4.css","assets/ipa-Cr33Yv5e.js","assets/plist-D40C_CG9.js","assets/heic-CoyfzXhn.js","assets/pdf-Cl_Gem9n.js","assets/index-D0QtHVWD.js","assets/index-ClWVlnx_.css","assets/asciinema-C9dVnWWy.js","assets/asciinema-player-BCcp8-xS.js","assets/asciinema-player-CxBn2iyI.css","assets/video360-Sy9Wsyf1.js","assets/view360.min-BonvbQYV.js","assets/view360-OmXPkXrn.css","assets/video360-C5ayuYN0.css","assets/archive-BHE1mT2U.js","assets/List-BEGLanIK.js","assets/style-BhP5neJU.js","assets/style-qq4T_k44.css","assets/helper-BNcjg6ml.js","assets/viselect-DiY-CsSI.js","assets/Password-BFrN1jfs.js","assets/mutex-CPrTRTTj.js"])))=>i.map(i=>d[i]);
import{o as e,as as L,P as i,au as b,am as $,X as g,bV as j,V as M,W as I,cl as F,cw as z,g as T,cx as B,a0 as A,ar as U,ah as Q,aM as E,y as k,an as W,F as H,ao as X,cq as S,S as y,aE as q,K as h,ac as V,cy as G,cz as K,ai as Y,cA as J,cB as N,cC as Z,cD as ee,cv as re,D as te,cE as ne,u as x,a5 as v,T as t,cF as oe,Y as n,aD as ae,af as ie,ag as se,cp as ce,cG as ue,bk as le,L as pe,aq as me,Q as _e}from"./index-CsB5zT4W.js";import{g as de,O as l}from"./icon-BfaWsS4s.js";import{c as ge}from"./index-Bc2gP8al.js";import{Q as he}from"./browser-D2V2ir_S.js";import{p as ve}from"./index-DUExJ8y_.js";const fe=r=>e(g,{class:"fileinfo",py:"$6",spacing:"$6",get children(){return[e(L,{boxSize:"$20",get fallback(){return e(b,{get color(){return $()},boxSize:"$20",get as(){return de(i.obj)}})},get src(){return i.obj.thumb}}),e(g,{spacing:"$2",get children(){return[e(j,{size:"lg",css:{wordBreak:"break-all"},get children(){return i.obj.name}}),e(M,{color:"$neutral10",size:"sm",get children(){return[I(()=>F(i.obj.size))," Â· ",I(()=>z(i.obj.modified))]}})]}}),e(g,{spacing:"$2",get children(){return r.children}})]}}),R=()=>{const r=k(),o=T(()=>B(i.obj.name)),{currentObjLink:a}=A();return e(y,{get when(){return o().length},get children(){return e(U,{get children(){return[e(Q,{as:E,colorScheme:"success",get rightIcon(){return e(b,{as:ge})},get children(){return r("tenant.preview.open_with")}}),e(W,{get children(){return e(H,{get each(){return o()},children:s=>e(X,{as:"a",target:"_blank",get href(){return S(s.value,{raw_url:i.raw_url,name:i.obj.name,d_url:a(!0)})},get children(){return s.key}})})}})]}})}})},P=r=>{const o=k(),{copyCurrentRawLink:a}=q(),[s,u]=h("");he.toDataURL(i.raw_url,{type:"image/jpeg",scale:2}).then(w=>u(w));const[m,f]=h(!1),[_,d]=h(!1);return e(fe,{get children(){return[e(V,{spacing:"$2",get children(){return[e(E,{colorScheme:"accent",onClick:()=>a(!0),get children(){return o("tenant.toolbar.copy_link")}}),e(E,{as:"a",get href(){return i.raw_url},target:"_blank",get children(){return o("tenant.preview.download")}}),e(G,{get opened(){return m()||_()},motionPreset:"none",get children(){return[e(K,{as:Y,get icon(){return e(J,{})},"aria-label":"QRCode",colorScheme:"success",onClick:()=>{f(!m())},onMouseOver:()=>d(!0),onMouseOut:()=>d(!1)}),e(N,{width:"fit-content",get children(){return[e(Z,{}),e(ee,{get children(){return e(L,{maxWidth:"300px",get src(){return s()},alt:"QR Code of download link",objectFit:"cover"})}})]}})]}})]}}),e(y,{get when(){return r.openWith},get children(){return e(R,{})}})]}})},we=Object.freeze(Object.defineProperty({__proto__:null,Download:P,default:P},Symbol.toStringTag,{value:"Module"})),Ee=r=>{const{currentObjLink:o}=A(),a=T(()=>S(r.scheme,{raw_url:i.raw_url,name:i.obj.name,d_url:o(!0),ts:!0}));return e(ne,{w:"$full",h:"70vh",get children(){return[e(re.iframe,{w:"$full",h:"$full",get src(){return a()}}),e(b,{pos:"absolute",right:"$2",bottom:"$10","aria-label":"Open in new tab",as:ve,onClick:()=>{window.open(a(),"_blank")},cursor:"pointer",rounded:"$md",get bgColor(){return te()},p:"$1",boxSize:"$7"})]}})},Pe=r=>()=>e(Ee,{scheme:r}),be=(r,o)=>r===void 0?!1:r==="*"?!0:typeof r=="function"?r(o):r.includes(ue(o).toLowerCase()),Te=r=>typeof r=="boolean"?r:r(),D=[{name:"HTML render",exts:["html"],component:t(()=>n(()=>import("./html-D3AAHnyK.js"),__vite__mapDeps([0,1,2]))),prior:!0},{name:"Aliyun Video Previewer",type:l.VIDEO,provider:/^Aliyundrive(Open)?$/,component:t(()=>n(()=>import("./aliyun_video-zEotBuhE.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11]))),prior:!0},{name:"Markdown",type:l.TEXT,component:t(()=>n(()=>import("./markdown-LJ7M5JKl.js"),__vite__mapDeps([12,1,2]))),prior:!0},{name:"Flash",exts:["swf"],component:t(()=>n(()=>import("./flash-CYzF41N5.js"),__vite__mapDeps([13,1,2]))),prior:!0},{name:"Markdown with word wrap",type:l.TEXT,component:t(()=>n(()=>import("./markdown_with_word_wrap-BVb7r5_i.js"),__vite__mapDeps([14,1,2]))),prior:!0},{name:"Url Open",exts:["url"],component:t(()=>n(()=>import("./url-9zl8QWG-.js"),__vite__mapDeps([15,1,2,16,4,5,6,17,18]))),prior:!0},{name:"Text Editor",type:l.TEXT,exts:["url"],component:t(()=>n(()=>import("./text-editor-BX-_9JqV.js"),__vite__mapDeps([19,1,2,20]))),prior:!0},{name:"Image",type:l.IMAGE,component:t(()=>n(()=>import("./image-BZK-k5st.js"),__vite__mapDeps([21,1,2,22,4,5,6]))),prior:!0},{name:"Video",type:l.VIDEO,component:t(()=>n(()=>import("./video-DvwKR8as.js"),__vite__mapDeps([23,1,2,4,5,6,7,9,10]))),prior:!0},{name:"Audio",type:l.AUDIO,component:t(()=>n(()=>import("./audio-B7vHJR1z.js"),__vite__mapDeps([24,25,1,2,26,27,4,5,6,28]))),prior:!0},{name:"Ipa",exts:["ipa","tipa"],component:t(()=>n(()=>import("./ipa-Cr33Yv5e.js"),__vite__mapDeps([29,1,2,4,5,6,17,18]))),prior:!0},{name:"Plist",exts:["plist"],component:t(()=>n(()=>import("./plist-D40C_CG9.js"),__vite__mapDeps([30,1,2,4,5,6,17,18]))),prior:!0},{name:"HEIC",exts:["heic","heif","avif","vvc","avc","jpeg","jpg"],component:t(()=>n(()=>import("./heic-CoyfzXhn.js"),__vite__mapDeps([31,1,2]))),prior:!0},{name:"PDF Preview",exts:["pdf"],component:t(()=>n(()=>import("./pdf-Cl_Gem9n.js"),__vite__mapDeps([32,1,2,33,34]))),prior:!0},{name:"Asciinema",exts:["cast"],component:t(()=>n(()=>import("./asciinema-C9dVnWWy.js"),__vite__mapDeps([35,1,2,36,37]))),prior:!0},{name:"Video360",type:l.VIDEO,component:t(()=>n(()=>import("./video360-Sy9Wsyf1.js"),__vite__mapDeps([38,1,2,10,4,5,6,7,39,40,41]))),prior:!0},{name:"Archive Preview",exts:r=>{const o=ae.findIndex(s=>s==="read_archives"),{isShare:a}=x();return!a()&&!ie.can(se(),o)||a()&&!v("share_archive_preview")?!1:ce(r)},component:t(()=>n(()=>import("./archive-BHE1mT2U.js"),__vite__mapDeps([42,1,2,43,44,45,18,4,5,6,46,47,48,49]))),prior:()=>v("preview_archives_by_default")}],ye=r=>{var O;const{searchParams:o,isShare:a}=x(),s=l[(O=o.type)==null?void 0:O.toUpperCase()],u=[],m=[];(!a()||v("share_preview"))&&D.forEach(c=>{if(!(c.provider&&!c.provider.test(r.provider))&&(c.type===r.type||s&&c.type===s||be(c.exts,r.name))){const p={name:c.name,component:c.component};!a()&&Te(c.prior)?u.push(p):m.push(p)}});const f=oe(r.name);u.push(...f.map(c=>({name:c.key,component:Pe(c.value)})));const _={name:"Download",component:t(()=>n(()=>Promise.resolve().then(()=>we),void 0))},d=r.type===l.TEXT&&r.size>=1*1024*1024,w=u.length===0&&m.length===0,C=r.size<1*1024*1024;if(d)u.unshift(_);else if(w&&C){if(u.push(_),!a()||v("share_preview")){const c=D.filter(p=>["Markdown","Markdown with word wrap","Text Editor"].includes(p.name)).map(p=>({name:p.name,component:p.component}));u.push(...c)}}else u.push(_);return u.concat(m)},Oe=()=>{const r=T(()=>ye({...i.obj,provider:i.provider})),[o,a]=h(r()[0]);return e(y,{get when(){return r().length>1},get fallback(){return e(P,{openWith:!0})},get children(){return e(g,{w:"$full",spacing:"$2",get children(){return[e(V,{w:"$full",spacing:"$2",get children(){return[e(le,{alwaysShowBorder:!0,get value(){return o().name},onChange:s=>{a(r().find(u=>u.name===s))},get options(){return r().map(s=>({value:s.name}))}}),e(R,{})]}}),e(pe,{get fallback(){return e(_e,{})},get children(){return e(me,{get component(){return o().component}})}})]}})}})},Se=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));export{fe as F,Se as a};
