import{dg as R}from"./index-CsB5zT4W.js";class D{constructor(){this.crc=-1}append(n){for(var r=this.crc|0,u=this.table,f=0,b=n.length|0;f<b;f++)r=r>>>8^u[(r^n[f])&255];this.crc=r}get(){return~this.crc}}D.prototype.table=(()=>{var l,n,r,u=[];for(l=0;l<256;l++){for(r=l,n=0;n<8;n++)r=r&1?r>>>1^3988292384:r>>>1;u[l]=r}return u})();const L=l=>{var n=new Uint8Array(l);return{array:n,view:new DataView(n.buffer)}},P=l=>l.reader.read().then(n=>{if(n.done)return l.writeFooter();const r=n.value;l.crc.append(r),l.uncompressedLength+=r.length,l.compressedLength+=r.length,l.ctrl.enqueue(r)});function j(l){const n=Object.create(null),r=[],u=new TextEncoder;let f=0,b=0,p,i,g;function w(){b++,i=n[r[b]],i?U():g&&x()}var y={enqueue(m){if(g)throw new TypeError("Cannot enqueue a chunk into a readable stream that is closed or has been requested to be closed");let a=m.name.trim();const t=new Date(typeof m.lastModified>"u"?Date.now():m.lastModified);if(m.directory&&!a.endsWith("/")&&(a+="/"),n[a])throw new Error("File already exists.");const s=u.encode(a);r.push(a);const e=n[a]={level:0,ctrl:p,directory:!!m.directory,nameBuf:s,comment:u.encode(m.comment||""),compressedLength:0,uncompressedLength:0,writeHeader(){var c=L(26),o=L(30+s.length);e.offset=f,e.header=c,e.level!==0&&!e.directory&&c.view.setUint16(4,2048),c.view.setUint32(0,335546376),c.view.setUint16(6,(t.getHours()<<6|t.getMinutes())<<5|t.getSeconds()/2,!0),c.view.setUint16(8,(t.getFullYear()-1980<<4|t.getMonth()+1)<<5|t.getDate(),!0),c.view.setUint16(22,s.length,!0),o.view.setUint32(0,1347093252),o.array.set(c.array,4),o.array.set(s,30),f+=o.array.length,p.enqueue(o.array)},writeFooter(){var c=L(16);c.view.setUint32(0,1347094280),e.crc&&(e.header.view.setUint32(10,e.crc.get(),!0),e.header.view.setUint32(14,e.compressedLength,!0),e.header.view.setUint32(18,e.uncompressedLength,!0),c.view.setUint32(4,e.crc.get(),!0),c.view.setUint32(8,e.compressedLength,!0),c.view.setUint32(12,e.uncompressedLength,!0)),p.enqueue(c.array),f+=e.compressedLength+16,w()},fileLike:m};i||(i=e,U())},close(){if(g)throw new TypeError("Cannot close a readable stream that has already been requested to be closed");i||x(),g=!0}};function x(){var m=0,a=0,t,s;for(t=0;t<r.length;t++)s=n[r[t]],m+=46+s.nameBuf.length+s.comment.length;const e=L(m+22);for(t=0;t<r.length;t++)s=n[r[t]],e.view.setUint32(a,1347092738),e.view.setUint16(a+4,5120),e.array.set(s.header.array,a+6),e.view.setUint16(a+32,s.comment.length,!0),s.directory&&e.view.setUint8(a+38,16),e.view.setUint32(a+42,s.offset,!0),e.array.set(s.nameBuf,a+46),e.array.set(s.comment,a+46+s.nameBuf.length),a+=46+s.nameBuf.length+s.comment.length;e.view.setUint32(a,1347093766),e.view.setUint16(a+8,r.length,!0),e.view.setUint16(a+10,r.length,!0),e.view.setUint32(a+12,m,!0),e.view.setUint32(a+16,f,!0),p.enqueue(e.array),p.close()}function U(){if(i){if(i.directory)return i.writeFooter(i.writeHeader());if(i.reader)return P(i);i.fileLike.stream?(i.crc=new D,i.reader=i.fileLike.stream.getReader(),i.writeHeader()):w()}}return new ReadableStream({start:m=>{p=m,l.start&&Promise.resolve(l.start(y))},pull(){return U()||l.pull&&Promise.resolve(l.pull(y))}})}window.ZIP=j;var T={exports:{}};/*! streamsaver. MIT License. Jimmy WÃ¤rting <https://jimmy.warting.se/opensource> */var q;function A(){return q||(q=1,function(l){((n,r)=>{l.exports=r()})("streamSaver",()=>{const n=typeof window=="object"?window:this;n.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let r=null,u=!1;const f=a=>{try{a()}catch(t){}},b=n.WebStreamsPolyfill||{},p=n.isSecureContext;let i=/constructor/i.test(n.HTMLElement)||!!n.safari||!!n.WebKitPoint;const g=p||"MozAppearance"in document.documentElement.style?"iframe":"navigate",w={createWriteStream:m,WritableStream:n.WritableStream||b.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function y(a){if(!a)throw new Error("meh");const t=document.createElement("iframe");return t.hidden=!0,t.src=a,t.loaded=!1,t.name="iframe",t.isIframe=!0,t.postMessage=(...s)=>t.contentWindow.postMessage(...s),t.addEventListener("load",()=>{t.loaded=!0},{once:!0}),document.body.appendChild(t),t}function x(a){const t="width=200,height=100",s=document.createDocumentFragment(),e={frame:n.open(a,"popup",t),loaded:!1,isIframe:!1,isPopup:!0,remove(){e.frame.close()},addEventListener(...o){s.addEventListener(...o)},dispatchEvent(...o){s.dispatchEvent(...o)},removeEventListener(...o){s.removeEventListener(...o)},postMessage(...o){e.frame.postMessage(...o)}},c=o=>{o.source===e.frame&&(e.loaded=!0,n.removeEventListener("message",c),e.dispatchEvent(new Event("load")))};return n.addEventListener("message",c),e}try{new Response(new ReadableStream),p&&!("serviceWorker"in navigator)&&(i=!0)}catch(a){i=!0}f(()=>{const{readable:a}=new TransformStream,t=new MessageChannel;t.port1.postMessage(a,[a]),t.port1.close(),t.port2.close(),u=!0,Object.defineProperty(w,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function U(){r||(r=p?y(w.mitm):x(w.mitm))}function m(a,t,s){let e={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},c=0,o=null,d=null,E=null;if(Number.isFinite(t)?([s,t]=[t,s],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),e.size=s,e.writableStrategy=t):t&&t.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),e.size=s,e.writableStrategy=t):e=t||{},!i){U(),d=new MessageChannel,a=encodeURIComponent(a.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const h={transferringReadable:u,pathname:e.pathname||Math.random().toString().slice(-6)+"/"+a,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+a}};e.size&&(h.headers["Content-Length"]=e.size);const S=[h,"*",[d.port2]];if(u){const v=g==="iframe"?void 0:{transform(C,F){if(!(C instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");c+=C.length,F.enqueue(C),o&&(location.href=o,o=null)},flush(){o&&(location.href=o)}};E=new w.TransformStream(v,e.writableStrategy,e.readableStrategy);const W=E.readable;d.port1.postMessage({readableStream:W},[W])}d.port1.onmessage=v=>{v.data.download?g==="navigate"?(r.remove(),r=null,c?location.href=v.data.download:o=v.data.download):(r.isPopup&&(r.remove(),r=null,g==="iframe"&&y(w.mitm)),y(v.data.download)):v.data.abort&&(M=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null)},r.loaded?r.postMessage(...S):r.addEventListener("load",()=>{r.postMessage(...S)},{once:!0})}let M=[];return!i&&E&&E.writable||new w.WritableStream({write(h){if(!(h instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(i){M.push(h);return}d.port1.postMessage(h),c+=h.length,o&&(location.href=o,o=null)},close(){if(i){const h=new Blob(M,{type:"application/octet-stream; charset=utf-8"}),S=document.createElement("a");S.href=URL.createObjectURL(h),S.download=a,S.click()}else d.port1.postMessage("end")},abort(){M=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},e.writableStrategy)}return w})}(T)),T.exports}var B=A();const I=R(B);export{I as s};
