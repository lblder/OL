System.register(["./index-legacy-VniDFTuT.js","./icon-legacy-DffONu1z.js","./index-legacy-B-ZTtTkV.js","./browser-legacy-BqmDl2CN.js","./index-legacy-BbIbJMhB.js"],function(e,r){"use strict";var n,t,o,i,a,c,l,p,s,u,d,m,g,h,v,y,w,f,j,b,_,x,k,$,O,E,S,T,C,z,D,M,I,P,A,L,V,F,X,B,Q,R,U,W,G,H,K,q,J,Y,N,Z,ee,re,ne;return{setters:[e=>{n=e.o,t=e.as,o=e.P,i=e.au,a=e.am,c=e.X,l=e.bV,p=e.V,s=e.W,u=e.cl,d=e.cw,m=e.g,g=e.cx,h=e.a0,v=e.ar,y=e.ah,w=e.aM,f=e.y,j=e.an,b=e.F,_=e.ao,x=e.cq,k=e.S,$=e.aE,O=e.K,E=e.ac,S=e.cy,T=e.cz,C=e.ai,z=e.cA,D=e.cB,M=e.cC,I=e.cD,P=e.cv,A=e.D,L=e.cE,V=e.u,F=e.a5,X=e.T,B=e.cF,Q=e.Y,R=e.aD,U=e.af,W=e.ag,G=e.cp,H=e.cG,K=e.bk,q=e.L,J=e.aq,Y=e.Q},e=>{N=e.g,Z=e.O},e=>{ee=e.c},e=>{re=e.Q},e=>{ne=e.p}],execute:function(){const te=e("F",e=>n(c,{class:"fileinfo",py:"$6",spacing:"$6",get children(){return[n(t,{boxSize:"$20",get fallback(){return n(i,{get color(){return a()},boxSize:"$20",get as(){return N(o.obj)}})},get src(){return o.obj.thumb}}),n(c,{spacing:"$2",get children(){return[n(l,{size:"lg",css:{wordBreak:"break-all"},get children(){return o.obj.name}}),n(p,{color:"$neutral10",size:"sm",get children(){return[s(()=>u(o.obj.size))," Â· ",s(()=>d(o.obj.modified))]}})]}}),n(c,{spacing:"$2",get children(){return e.children}})]}})),oe=()=>{const e=f(),r=m(()=>g(o.obj.name)),{currentObjLink:t}=h();return n(k,{get when(){return r().length},get children(){return n(v,{get children(){return[n(y,{as:w,colorScheme:"success",get rightIcon(){return n(i,{as:ee})},get children(){return e("tenant.preview.open_with")}}),n(j,{get children(){return n(b,{get each(){return r()},children:e=>n(_,{as:"a",target:"_blank",get href(){return x(e.value,{raw_url:o.raw_url,name:o.obj.name,d_url:t(!0)})},get children(){return e.key}})})}})]}})}})},ie=e=>{const r=f(),{copyCurrentRawLink:i}=$(),[a,c]=O("");re.toDataURL(o.raw_url,{type:"image/jpeg",scale:2}).then(e=>c(e));const[l,p]=O(!1),[s,u]=O(!1);return n(te,{get children(){return[n(E,{spacing:"$2",get children(){return[n(w,{colorScheme:"accent",onClick:()=>i(!0),get children(){return r("tenant.toolbar.copy_link")}}),n(w,{as:"a",get href(){return o.raw_url},target:"_blank",get children(){return r("tenant.preview.download")}}),n(S,{get opened(){return l()||s()},motionPreset:"none",get children(){return[n(T,{as:C,get icon(){return n(z,{})},"aria-label":"QRCode",colorScheme:"success",onClick:()=>{p(!l())},onMouseOver:()=>u(!0),onMouseOut:()=>u(!1)}),n(D,{width:"fit-content",get children(){return[n(M,{}),n(I,{get children(){return n(t,{maxWidth:"300px",get src(){return a()},alt:"QR Code of download link",objectFit:"cover"})}})]}})]}})]}}),n(k,{get when(){return e.openWith},get children(){return n(oe,{})}})]}})},ae=Object.freeze(Object.defineProperty({__proto__:null,Download:ie,default:ie},Symbol.toStringTag,{value:"Module"})),ce=e=>{const{currentObjLink:r}=h(),t=m(()=>x(e.scheme,{raw_url:o.raw_url,name:o.obj.name,d_url:r(!0),ts:!0}));return n(L,{w:"$full",h:"70vh",get children(){return[n(P.iframe,{w:"$full",h:"$full",get src(){return t()}}),n(i,{pos:"absolute",right:"$2",bottom:"$10","aria-label":"Open in new tab",as:ne,onClick:()=>{window.open(t(),"_blank")},cursor:"pointer",rounded:"$md",get bgColor(){return A()},p:"$1",boxSize:"$7"})]}})},le=[{name:"HTML render",exts:["html"],component:X(()=>Q(()=>r.import("./html-legacy-DDuAy5uH.js"),void 0)),prior:!0},{name:"Aliyun Video Previewer",type:Z.VIDEO,provider:/^Aliyundrive(Open)?$/,component:X(()=>Q(()=>r.import("./aliyun_video-legacy-0BDgNJP2.js"),void 0)),prior:!0},{name:"Markdown",type:Z.TEXT,component:X(()=>Q(()=>r.import("./markdown-legacy-Bri3s5Aw.js"),void 0)),prior:!0},{name:"Flash",exts:["swf"],component:X(()=>Q(()=>r.import("./flash-legacy-BFwqIGga.js"),void 0)),prior:!0},{name:"Markdown with word wrap",type:Z.TEXT,component:X(()=>Q(()=>r.import("./markdown_with_word_wrap-legacy-CskRndaC.js"),void 0)),prior:!0},{name:"Url Open",exts:["url"],component:X(()=>Q(()=>r.import("./url-legacy-BuLhKW6p.js"),void 0)),prior:!0},{name:"Text Editor",type:Z.TEXT,exts:["url"],component:X(()=>Q(()=>r.import("./text-editor-legacy-Cap3FonM.js"),void 0)),prior:!0},{name:"Image",type:Z.IMAGE,component:X(()=>Q(()=>r.import("./image-legacy-Cc0qJNzP.js"),void 0)),prior:!0},{name:"Video",type:Z.VIDEO,component:X(()=>Q(()=>r.import("./video-legacy-DfHkpeVG.js"),void 0)),prior:!0},{name:"Audio",type:Z.AUDIO,component:X(()=>Q(()=>r.import("./audio-legacy-DOT4pyGc.js"),void 0)),prior:!0},{name:"Ipa",exts:["ipa","tipa"],component:X(()=>Q(()=>r.import("./ipa-legacy-DVCXI4ps.js"),void 0)),prior:!0},{name:"Plist",exts:["plist"],component:X(()=>Q(()=>r.import("./plist-legacy-avvtGfjC.js"),void 0)),prior:!0},{name:"HEIC",exts:["heic","heif","avif","vvc","avc","jpeg","jpg"],component:X(()=>Q(()=>r.import("./heic-legacy-vSZWJ4Us.js"),void 0)),prior:!0},{name:"PDF Preview",exts:["pdf"],component:X(()=>Q(()=>r.import("./pdf-legacy-Do91M-eO.js"),void 0)),prior:!0},{name:"Asciinema",exts:["cast"],component:X(()=>Q(()=>r.import("./asciinema-legacy-CtwOaLWS.js"),void 0)),prior:!0},{name:"Video360",type:Z.VIDEO,component:X(()=>Q(()=>r.import("./video360-legacy-DMInQYI1.js"),void 0)),prior:!0},{name:"Archive Preview",exts:e=>{const r=R.findIndex(e=>"read_archives"===e),{isShare:n}=V();return!(!n()&&!U.can(W(),r))&&!(n()&&!F("share_archive_preview"))&&G(e)},component:X(()=>Q(()=>r.import("./archive-legacy-BlMBJS5t.js"),void 0)),prior:()=>F("preview_archives_by_default")}],pe=e=>{const{searchParams:r,isShare:t}=V(),o=Z[r.type?.toUpperCase()],i=[],a=[];t()&&!F("share_preview")||le.forEach(r=>{var n,c,l;if((!r.provider||r.provider.test(e.provider))&&(r.type===e.type||o&&r.type===o||(c=r.exts,l=e.name,void 0!==c&&("*"===c||("function"==typeof c?c(l):c.includes(H(l).toLowerCase())))))){const e={name:r.name,component:r.component};!t()&&("boolean"==typeof(n=r.prior)?n:n())?i.push(e):a.push(e)}});const c=B(e.name);i.push(...c.map(e=>{return{name:e.key,component:(r=e.value,()=>n(ce,{scheme:r}))};var r}));const l={name:"Download",component:X(()=>Q(()=>Promise.resolve().then(()=>ae),void 0))},p=e.type===Z.TEXT&&e.size>=1048576,s=0===i.length&&0===a.length,u=e.size<1048576;if(p)i.unshift(l);else if(s&&u){if(i.push(l),!t()||F("share_preview")){const e=le.filter(e=>["Markdown","Markdown with word wrap","Text Editor"].includes(e.name)).map(e=>({name:e.name,component:e.component}));i.push(...e)}}else i.push(l);return i.concat(a)},se=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=m(()=>pe({...o.obj,provider:o.provider})),[r,t]=O(e()[0]);return n(k,{get when(){return e().length>1},get fallback(){return n(ie,{openWith:!0})},get children(){return n(c,{w:"$full",spacing:"$2",get children(){return[n(E,{w:"$full",spacing:"$2",get children(){return[n(K,{alwaysShowBorder:!0,get value(){return r().name},onChange:r=>{t(e().find(e=>e.name===r))},get options(){return e().map(e=>({value:e.name}))}}),n(oe,{})]}}),n(q,{get fallback(){return n(Y,{})},get children(){return n(J,{get component(){return r().component}})}})]}})}})}},Symbol.toStringTag,{value:"Module"}));e("a",se)}}});
