import{cv as v,b1 as k,aO as S,aP as a,b6 as g,P as c,J as x,k as u,da as _,ab as b,aQ as O,dG as l,a$ as y}from"./index-CsB5zT4W.js";import{b as j}from"./style-BhP5neJU.js";import{P as A}from"./viselect-DiY-CsSI.js";let i=null;function K(){const n=()=>!_&&S(),d=()=>n()&&u.open_item_on_checkbox==="dblclick",f=()=>n()&&u.open_item_on_checkbox==="disable_while_checked"&&a(),r=()=>{i=y()},m=()=>{if(i===null)return!1;for(let e=0;e<c.objs.length;++e)l(e,i.indexOf(c.objs[e])>=0);return!0},h=()=>{i=null},p=()=>{x(()=>{if(!n()){const t=document.querySelector(".viselect-container");t==null||t.addEventListener("mousedown",r),b(()=>t==null?void 0:t.removeEventListener("mousedown",r));return}const e=new A({selectionAreaClass:"viselect-selection-area",startAreas:[".viselect-container"],boundaries:[".viselect-container"],selectables:[".viselect-item"]});e.on("beforestart",()=>{r(),e.clearSelection(!0,!0),e.select(".viselect-item.selected",!0)}),e.on("start",({event:t})=>{const o=t;o.type==="mousemove"&&h(),!o.shiftKey&&!o.ctrlKey&&!o.metaKey&&(O(!1),e.clearSelection(!0))}),e.on("move",({store:{changed:{added:t,removed:o}}})=>{for(const s of t)l(Number(s.getAttribute("data-index")),!0);for(const s of o)l(Number(s.getAttribute("data-index")),!1)}),b(()=>e.destroy())})},{show:C}=j({id:1});return{isMouseSupported:n,openWithDoubleClick:d,toggleWithClick:f,restoreSelectionCache:m,registerSelectContainer:p,captureContentMenu:e=>{if(e.preventDefault(),a()&&!g()){const o=e.target.closest(".viselect-item"),s=Number(o==null?void 0:o.getAttribute("data-index"));if(Number.isNaN(s)||!!!c.objs[s].selected)return;e.stopPropagation(),C(e,{props:c.obj})}}}}const W=v(k,{baseStyle:{_before:{content:"",pos:"absolute",top:-10,right:-2,bottom:-10,left:-10}}});export{W as I,K as u};
