const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Folder-BF6D5VG-.js","assets/index-CsB5zT4W.js","assets/index-DYLAoZjS.css","assets/style-BhP5neJU.js","assets/style-qq4T_k44.css","assets/index-DBnL0RpI.js","assets/icon-BfaWsS4s.js","assets/index-Bc2gP8al.js","assets/video_box-C2Dic8iL.js","assets/artplayer-C5-Hz-Y-.js","assets/Paginator-CZdTa2_8.js","assets/index-DUExJ8y_.js","assets/mark-DcE7yjIR.js","assets/mark-pZUjROFs.css","assets/useTitle-C7kyrev7.js","assets/FolderTree-s4yEnMk2.js","assets/index-DlLE0hg-.js","assets/index-LqbMjJST.js","assets/share-2qqjNftT.js","assets/File-zgTAgu9V.js","assets/browser-D2V2ir_S.js","assets/Password-DueEzBQF.js","assets/PackageDownload-Ca2q9w5p.js","assets/StreamSaver-ISsQe9xL.js","assets/Upload-BlpMZ7Lp.js","assets/index.esm-YAsqhZv0.js"])))=>i.map(i=>d[i]);
import{u as C,g as V,j as R,k as G,o as e,q as ge,F as me,r as dt,x as he,y as k,B as ut,z as gt,A as ht,C as mt,D as Ye,S as O,E as pt,G as ft,H as Le,I as bt,J as De,Z as ye,U as je,$ as _t,K as y,L as Be,M as Ee,N as W,O as wt,P as $,Q as ke,R as F,T as pe,_ as Qe,V as I,W as ve,X as U,Y as fe,a0 as yt,a1 as kt,a2 as X,a3 as vt,a4 as St,a5 as Ae,a6 as Ct,a7 as $t,a8 as xt,a9 as Ze,aa as $e,ab as M,aA as Ot,aB as Mt,au as Ne,am as ue,aC as et,aD as Tt,af as tt,ag as We,aE as It,ah as rt,an as nt,ao as ae,ar as ot,ay as p,aF as S,aG as Y,aH as Q,aI as Z,aJ as q,ad as ce,aK as se,aL as ee,aM as x,aN as te,aO as Ft,aP as Pt,ac as re,aQ as at,aR as Dt,aS as Rt,aT as Ve,aU as zt,aV as Lt,aW as Bt,aX as Et,aY as At,aZ as D,a_ as Nt,a$ as H,b0 as E,b1 as ie,b2 as Wt,b3 as Ht,b4 as jt,b5 as He,b6 as Vt,b7 as Ut,b8 as qt,b9 as Gt,ba as Jt,bb as Te,bc as Kt,bd as Xt,be as Yt,bf as Ue,bg as K,bh as Qt,bi as lt,bj as Zt,bk as qe,bl as st,bm as er,bn as tr,bo as rr,bp as nr,bq as or,br as ar,bs as lr,az as sr,bt as ir,bu as cr,bv as dr,bw as ur,bx as we,by as le,bz as gr,bA as hr,bB as mr,bC as pr,bD as fr,bE as br,bF as _r,bG as wr,bH as yr,bI as it,ai as Re,bJ as kr,da as vr,db as Sr,bK as Cr,bL as ze,bM as $r,bN as xr,bO as be,bP as Ie,bQ as Or,bS as Mr}from"./index-CsB5zT4W.js";import{u as Tr,a as Ir}from"./useTitle-C7kyrev7.js";import{L as Fr,C as Pr,a as Dr,b as Rr,B as zr,c as Lr,T as Br,d as Er,e as Ar,f as Nr,g as Wr,h as Hr,i as jr,j as Ge,k as Vr}from"./index-DUExJ8y_.js";import{F as Ur,M as xe}from"./FolderTree-s4yEnMk2.js";import{T as qr}from"./index-DlLE0hg-.js";import{I as Gr,u as Jr,M as Oe,R as Kr,b as Je,c as Se,E as Fe,O as _e,a as Pe}from"./index-DBnL0RpI.js";import{R as Xr}from"./index-LqbMjJST.js";import{a as Yr,b as Qr}from"./index-Bc2gP8al.js";import{r as Zr,g as en,m as tn}from"./share-2qqjNftT.js";const rn=()=>{const{pathname:t,isShare:r}=C(),n=V(()=>{var u;if(r()){const i=t().split("/").filter(Boolean);return["@s/".concat((u=i[1])!=null?u:""),...i.slice(2)]}else{const i=t().split("/").filter(Boolean);return["",...i.filter((a,f)=>!(f===0&&a==="@tenant"||f===1&&a==="data"&&i[0]==="@tenant"))]}}),o=k(),{setPathAs:d}=R(),s=V(()=>{const u={_after:{content:"",backgroundColor:"$background",position:"absolute",height:"100%",width:"99vw",zIndex:-1,transform:"translateX(-50%)",left:"50%",top:0}};switch(G.position_of_header_navbar){case"only_navbar_sticky":return{...u,position:"sticky",zIndex:"$sticky",top:0};case"sticky":return{...u,position:"sticky",zIndex:"$sticky",top:60};default:return{_after:void 0,position:void 0,zIndex:void 0,top:void 0}}});return e(ft,ge(s,{background:"$background",class:"nav",w:"$full",get children(){return e(me,{get each(){return n()},children:(u,i)=>{const g=V(()=>i()===n().length-1);let a=n().slice(0,i()+1).join("/");a&&!a.startsWith("/@tenant/data")?a="/@tenant/data"+(a.startsWith("/")?"":"/")+a:a||(a="/@tenant/data");const f=dt(a);let l=()=>u;return!r()&&l()===""?l=()=>he("home_icon")+o("tenant.sidemenu.data"):r()&&i()===0&&(l=()=>he("share_icon")+o("manage.sidemenu.shares")),e(ut,{class:"nav-item",get children(){return[e(gt,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{backgroundColor:Ye(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return g()},get as(){return g()?void 0:mt},get href(){return ht(f)},onMouseEnter:()=>d(a),get children(){return l()}}),e(O,{get when(){return!g()},get children(){return e(pt,{class:"nav-separator"})}})]}})}})}}))},nn=pe(()=>fe(()=>import("./Folder-BF6D5VG-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),on=pe(()=>fe(()=>import("./File-zgTAgu9V.js").then(t=>t.a),__vite__mapDeps([19,1,2,6,7,5,20,11]))),an=pe(()=>fe(()=>import("./Password-DueEzBQF.js"),__vite__mapDeps([21,1,2]))),[ln,sn]=y(),cn=()=>{const t=k(),r=Le("white","$neutral3"),{pathname:n,searchParams:o,isShare:d}=C(),{handlePathChange:s,refresh:u}=R(),i=bt(),g=V(()=>i.type==="pagination"?parseInt(o.page,10)||1:void 0);let a,f;return De(ye([n,g],async([l,h])=>{o.pwd&&je(o.pwd),a&&_t(a,f),a=l,f=h,Tr(),await s(l,h)})),e(U,{ref:l=>sn(l),class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return r()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return e(Be,{get fallback(){return e(ke,{})},get children(){return e(Ee,{get children(){return[e(W,{get when(){return $.err},get children(){return e(wt,{get msg(){return $.err},disableColor:!0})}}),e(W,{get when(){return[F.FetchingObj,F.FetchingObjs].includes($.state)},get children(){return e(ke,{})}}),e(W,{get when(){return $.state===F.NeedPassword},get children(){return e(an,{get title(){return ve(()=>!!d())()?t("shares.input_password"):t("home.input_password")},password:Qe,setPassword:je,enterCallback:()=>u(!0),get children(){return e(O,{get when(){return!d()},get children(){return[e(I,{get children(){return t("global.have_account")}}),e(I,{color:"$info9",as:Fr,get href(){return"/@login?redirect=".concat(encodeURIComponent(location.pathname))},get children(){return t("global.go_login")}})]}})}})}}),e(W,{get when(){return[F.Folder,F.FetchingMore].includes($.state)},get children(){return e(nn,{})}}),e(W,{get when(){return $.state===F.File},get children(){return e(on,{})}})]}})}})}})};function Ke(t){const r=Le("white","$neutral3"),{proxyLink:n}=yt();C();const o=V(ye(()=>$.state,()=>{if(![F.FetchingMore,F.Folder,F.File].includes($.state))return"";if([F.FetchingMore,F.Folder].includes($.state)){const u=$.objs.find(i=>t.files.find(g=>g.toLowerCase()===i.name.toLowerCase()));if(u)return n(u,!0)}return $[t.fromMeta]&&typeof $[t.fromMeta]=="string"?$[t.fromMeta]:""})),d=async u=>{let i={content:u};return/^https?:\/\//g.test(u)&&(i=await Ct(u)),i},[s]=kt(o,d);return e(O,{get when(){return ve(()=>!!Ae("readme_autorender"))()&&o()},get children(){return e(X,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return r()},shadow:"$lg",get children(){return e(vt,{get loading(){return s.loading},get children(){return e(St,{get children(){var u;return(u=s())==null?void 0:u.content},readme:!0,get toc(){return t.fromMeta==="readme"}})}})}})}})}const dn=t=>{const r=he("home_container");return e(Ee,{get fallback(){return e(X,{w:"min(99%, 980px)",get children(){return t.children}})},get children(){return e(W,{when:r==="hope_container",get children(){return e($t,{get children(){return t.children}})}})}})};function un(){const{to:t}=C(),r=xt(),[n,o]=y(),[d,s]=y(),[u,i]=y(-999),g=()=>i(0),a=()=>{const l=ln(),h=d();if(!l||!h)return;const b=l.offsetLeft>50?16:0;h.clientWidth<l.offsetLeft-b?i(0):i("calc(-100% + ".concat(l.offsetLeft,"px - ").concat(b,"px)"))};let f;return Ze(()=>{const l=n();l==null||l.setPath(r.pathname),f=requestAnimationFrame(a),window.addEventListener("resize",a),M(()=>window.removeEventListener("resize",a))}),De(ye(()=>$.state,()=>{cancelAnimationFrame(f),f=requestAnimationFrame(a)})),De(ye(()=>r.pathname,()=>{const l=n();l==null||l.setPath(r.pathname)})),e(X,{get as(){return $e.div},initial:{x:-999},get animate(){return{x:u()}},zIndex:"$overlay",pos:"fixed",left:3,top:3,h:"calc(100vh - 6px)",minW:180,p:"$2",overflow:"auto",shadow:"$lg",rounded:"$lg",bgColor:"white",_dark:{bgColor:"$neutral3"},onMouseEnter:g,onMouseLeave:a,ref:l=>s(l),get children(){return e(Ur,{autoOpen:!0,showEmptyIcon:!0,showHiddenFolder:!1,onChange:l=>t(l),handle:l=>o(l)})}})}function gn(){const t=V(()=>G.show_sidebar!=="none");return e(O,{get when(){return t()},get children(){return e(un,{})}})}const hn=()=>e(dn,{get children(){return e(U,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[e(Ke,{files:["header.md","top.md","index.md"],fromMeta:"header"}),e(rn,{}),e(cn,{}),e(Ke,{files:["readme.md","footer.md","bottom.md"],fromMeta:"readme"}),e(gn,{})]}})}}),J={rename:{icon:Wr,color:"$accent9"},copy:{icon:Nr,color:"$success9"},move:{icon:Ar,color:"$warning9"},delete:{icon:Mt,color:"$danger9"},decompress:{icon:Er,color:"$neutral9"},copy_link:{icon:Br,color:"$info9"},mkdir:{icon:Dr,p:!0},recursive_move:{icon:Gr,p:!0},remove_empty_directory:{icon:Rr,p:!0},batch_rename:{icon:zr,p:!0},new_file:{icon:Pr,p:!0},cancel_select:{icon:qr},download:{icon:Ot,color:"$primary9"},share:{icon:Lr,color:"$primary9"}},Ce=t=>{const r=Tt.findIndex(o=>o===t.name);if(r!==-1&&!tt.can(We(),r))return null;const n=k();return e(et,{placement:"top",withArrow:!0,get label(){return n("home.toolbar.".concat(t.name))},get children(){return e(Ne,ge({get class(){return"toolbar-".concat(t.name)},get _hover(){return{bgColor:Ye()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=J[t.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=J[t.name])==null?void 0:o.icon},get color(){var o;return(o=J[t.name])==null?void 0:o.color}},t))}})},P=t=>{const r=k();return e(et,{get disabled(){return!t.tips},placement:"left",withArrow:!0,get label(){return r("home.toolbar.".concat(t.tips))},get children(){return e(Ne,ge({get color(){return ue()},get _hover(){return{bgColor:ue(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return t.icon}},t))}})},mn=()=>{const t=k(),{copySelectedPreviewPage:r,copySelectedRawLink:n}=It(),o="neutral";return e(ot,{placement:"top",offset:10,get children(){return[e(rt,{as:Ce,name:"copy_link"}),e(nt,{get children(){return[e(ae,{colorScheme:o,onSelect:()=>{r()},get children(){return t("home.toolbar.preview_page")}}),e(ae,{colorScheme:o,onSelect:()=>{n()},get children(){return t("home.toolbar.down_link")}}),e(ae,{colorScheme:o,onSelect:()=>{n(!0)},get children(){return t("home.toolbar.encode_down_link")}})]}})]}})};var pn=ce("<p>");const fn=()=>{const t=k(),r="neutral",{batchDownloadSelected:n,sendToAria2:o,playlistDownloadSelected:d}=Jr();return e(ot,{placement:"top",offset:10,get children(){return[e(rt,{as:Ce,name:"download"}),e(nt,{get children(){return[e(ae,{colorScheme:r,onSelect:n,get children(){return t("home.toolbar.batch_download")}}),e(O,{get when(){return tt.is_admin(We())||Ae("package_download")},get children(){return[e(ae,{colorScheme:r,onSelect:()=>{p.emit("tool","package_download")},get children(){return t("home.toolbar.package_download")}}),e(ae,{colorScheme:r,onSelect:d,get children(){return t("home.toolbar.playlist_download")}})]}}),e(ae,{colorScheme:r,onSelect:o,get children(){return t("home.toolbar.send_aria2")}})]}})]}})},bn=pe(()=>fe(()=>import("./PackageDownload-Ca2q9w5p.js"),__vite__mapDeps([22,1,2,23]))),_n=()=>{const t=k(),r=i=>{if(i==="package_download"){if(!Ae("package_download"))return;o()}};p.on("tool",r),M(()=>{p.off("tool",r)});const{isOpen:n,onOpen:o,onClose:d}=S(),[s,u]=y("pre_tips");return e(te,{blockScrollOnMount:!1,get opened(){return n()},onClose:d,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return t("home.toolbar.package_download")}}),e(Be,{get fallback(){return e(ke,{})},get children(){return e(O,{get when(){return s()==="pre_tips"},get fallback(){return e(bn,{onClose:d})},get children(){return[e(q,{get children(){var i=pn();return se(i,()=>t("home.toolbar.pre_package_download-tips")),i}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:d,colorScheme:"neutral",get children(){return t("global.cancel")}}),e(x,{colorScheme:"info",onClick:()=>{u("package_download")},get children(){return t("global.confirm")}})]}})]}})}})]}})]}})},wn=()=>{const t=V(()=>[F.Folder,F.FetchingMore].includes($.state)&&Ft()&&Pt()),{isShare:r}=C();return e(Dt,{exitBeforeEnter:!0,get children(){return e(O,{get when(){return t()},get children(){return e(X,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return $e.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return e(re,{p:"$2",get bgColor(){return Le("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[e(O,{get when(){return!r()},get children(){return e(me,{each:["rename","move","copy","delete","share","decompress"],children:n=>e(Ce,{name:n,onClick:()=>{p.emit("tool",n)}})})}}),e(mn,{}),e(fn,{}),e(Ce,{name:"cancel_select",onClick:()=>{at(!1)}})]}})}})}})}})},yn=()=>{const{isOpen:t,onToggle:r}=S({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),n=V(()=>t()?"$4":"$5"),o=V(()=>$.state===F.Folder),{refresh:d}=R(),{isShare:s}=C();return e(X,{class:"left-toolbar-box",pos:"fixed",get right(){return n()},get bottom(){return n()},get children(){return e(O,{get when(){return t()},get fallback(){return e(P,{class:"toolbar-toggle",as:Ge,onClick:()=>{r()}})},get children(){return e(U,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return $e.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[e(U,{spacing:"$1",class:"left-toolbar-in",get children(){return[e(P,{as:Xr,tips:"refresh",onClick:()=>{d(void 0,!0)}}),e(O,{get when(){return ve(()=>!!(o()&&!s()))()&&(Ve("write")||$.write)},get children(){return[e(P,{get as(){return J.new_file.icon},tips:"new_file",onClick:()=>{p.emit("tool","new_file")}}),e(P,{get as(){return J.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{p.emit("tool","mkdir")}}),e(P,{get as(){return J.recursive_move.icon},tips:"recursive_move",onClick:()=>{p.emit("tool","recursiveMove")}}),e(P,{get as(){return J.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{p.emit("tool","removeEmptyDirectory")}}),e(P,{get as(){return J.batch_rename.icon},tips:"batch_rename",onClick:()=>{at(!0),p.emit("tool","batchRename")}}),e(P,{as:Rt,tips:"upload",onClick:()=>{p.emit("tool","upload")}})]}}),e(O,{get when(){return ve(()=>!!(o()&&!s()))()&&Ve("offline_download")},get children(){return e(P,{as:zt,pl:"0",tips:"offline_download",onClick:()=>{p.emit("tool","offline_download")}})}}),e(O,{get when(){return Bt()},get children(){return e(P,{as:Hr,tips:"toggle_markdown_toc",onClick:()=>{Lt(u=>!u)}})}}),e(P,{tips:"toggle_checkbox",as:jr,onClick:Et}),e(P,{as:At,tips:"local_settings",onClick:()=>{p.emit("tool","local_settings")}})]}}),e(P,{tips:"more",as:Ge,onClick:r})]}})}})}})},kn=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(Nt),{pathname:u}=C(),{refresh:i}=R(),[g,a]=y(!1),f=l=>{l==="copy"&&(n(),a(!1))};return p.on("tool",f),M(()=>{p.off("tool",f)}),e(xe,{get header(){return t("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:o,get loading(){return d()},get footerSlot(){return e(ie,{mr:"auto",get checked(){return g()},onChange:()=>{a(!g())},get children(){return t("home.conflict_policy.overwrite_existing")}})},onSubmit:async l=>{let h=u();h.startsWith("/@tenant/data")&&(h=h.substring(13)||"/");const b=await s(h,l,H().map(_=>_.name),g());E(b,()=>{i(),o()})}})},vn=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(Wt),{pathname:u}=C(),{refresh:i}=R(),[g,a]=y(!1),f=l=>{l==="move"&&(n(),a(!1))};return p.on("tool",f),M(()=>{p.off("tool",f)}),e(xe,{get header(){return t("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:o,get loading(){return d()},get footerSlot(){return e(ie,{mr:"auto",get checked(){return g()},onChange:()=>{a(!g())},get children(){return t("home.conflict_policy.overwrite_existing")}})},onSubmit:async l=>{let h=u();h.startsWith("/@tenant/data")&&(h=h.substring(13)||"/");const b=await s(h,l,H().map(_=>_.name),g());E(b,()=>{i(),o()})}})};var Sn=ce("<p>");const Cn=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(Ht),{refresh:u}=R(),{pathname:i}=C(),g=a=>{a==="delete"&&n()};return p.on("tool",g),M(()=>{p.off("tool",g)}),e(te,{blockScrollOnMount:!1,get opened(){return r()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return t("home.toolbar.delete")}}),e(q,{get children(){var a=Sn();return se(a,()=>t("home.toolbar.delete-tips")),a}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:o,colorScheme:"neutral",get children(){return t("global.cancel")}}),e(x,{colorScheme:"danger",get loading(){return d()},onClick:async()=>{let a=i();a.startsWith("/@tenant/data")&&(a=a.substring(13)||"/");const f=await s(a,H().map(l=>l.name));E(f,()=>{u(),o()})},get children(){return t("global.confirm")}})]}})]}})]}})},$n=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(jt),{pathname:u}=C(),{refresh:i}=R(),[g,a]=y(!1),f=l=>{if(l==="rename"){if(!Vt()){p.emit("tool","batchRename");return}n(),a(!1)}};return p.on("tool",f),M(()=>{p.off("tool",f)}),e(O,{get when(){return r()},get children(){return e(Oe,{title:"home.toolbar.input_new_name",get footerSlot(){return e(ie,{mr:"auto",get checked(){return g()},onChange:()=>{a(!g())},get children(){return t("home.conflict_policy.overwrite_existing")}})},get isRenamingFile(){return!H()[0].is_dir},get opened(){return r()},onClose:o,get defaultValue(){var l,h;return(h=(l=H()[0])==null?void 0:l.name)!=null?h:""},get loading(){return d()},onSubmit:async l=>{let h=u();h.startsWith("/@tenant/data")&&(h=h.substring(13)||"/");const b=await s(He(h,H()[0].name),l,g());E(b,()=>{i(),o()})}})}})},xn=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(Ut),{refresh:u}=R(),{pathname:i}=C(),[g,a]=y(!1),f=l=>{l==="new_file"&&(n(),a(!1))};return p.on("tool",f),M(()=>{p.off("tool",f)}),e(Oe,{title:"home.toolbar.input_filename",get footerSlot(){return e(ie,{mr:"auto",get checked(){return g()},onChange:()=>{a(!g())},get children(){return t("home.conflict_policy.overwrite_existing")}})},get opened(){return r()},onClose:o,get loading(){return d()},onSubmit:async l=>{let h=i();h.startsWith("/@tenant/data")&&(h=h.substring(13)||"/");const b=await s(He(h,l),Qe(),g());E(b,()=>{u(),o()})}})},On=()=>{const{isOpen:t,onOpen:r,onClose:n}=S(),[o,d]=D(qt),{pathname:s}=C(),{refresh:u}=R(),i=g=>{g==="mkdir"&&r()};return p.on("tool",i),M(()=>{p.off("tool",i)}),e(Oe,{title:"home.toolbar.input_dir_name",get opened(){return t()},onClose:n,get loading(){return o()},onSubmit:async g=>{let a=s();a.startsWith("/@tenant/data")&&(a=a.substring(13)||"/");const f=await d(He(a,g));E(f,()=>{u(),n()})}})};var Mn=ce("<p>");const Tn=()=>{const{isOpen:t,onOpen:r,onClose:n}=S(),{isOpen:o,onOpen:d,onClose:s}=S(),[u,i]=D(Gt),{pathname:g}=C(),{refresh:a}=R(),[f,l]=y("cancel"),h=_=>{_==="recursiveMove"&&(r(),l("cancel"))};p.on("tool",h),M(()=>{p.off("tool",h)});const b=k();return[e(te,{blockScrollOnMount:!1,get opened(){return t()},onClose:()=>n(),size:{"@initial":"xs","@md":"md"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return b("home.toolbar.recursive_move")}}),e(q,{get children(){var _=Mn();return se(_,()=>b("home.toolbar.recursive_move_directory-tips")),_}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:()=>n(),colorScheme:"neutral",get children(){return b("global.cancel")}}),e(x,{onClick:()=>{n(),d()},colorScheme:"danger",get children(){return b("global.confirm")}})]}})]}})]}}),e(xe,{get header(){return b("home.toolbar.choose_dst_folder")},get opened(){return o()},onClose:s,get loading(){return u()},get footerSlot(){return e(re,{mr:"auto",flex:"0.8",spacing:"$1",get children(){return e(Jt,{get value(){return f()},onChange:_=>l(_),get children(){return[e(Te,{value:"cancel",get children(){return b("home.conflict_policy.cancel_if_exists")}}),e(Te,{value:"overwrite",get children(){return b("home.conflict_policy.overwrite_existing")}}),e(Te,{value:"skip",get children(){return b("home.conflict_policy.skip_existing")}})]}})}})},onSubmit:async _=>{const L=await i(g(),_,f());E(L,()=>{a(),s()})}})]};var In=ce("<p>");const Fn=()=>{const{isOpen:t,onOpen:r,onClose:n}=S(),{pathname:o}=C(),[d,s]=D(Kt),{refresh:u}=R(),i=a=>{a==="removeEmptyDirectory"&&r()};p.on("tool",i),M(()=>{p.off("tool",i)});const g=k();return e(te,{blockScrollOnMount:!1,get opened(){return t()},onClose:n,size:{"@initial":"xs","@md":"md"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return g("home.toolbar.remove_empty_directory")}}),e(q,{get children(){var a=In();return se(a,()=>g("home.toolbar.remove_empty_directory-tips")),a}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:n,colorScheme:"neutral",get children(){return g("global.cancel")}}),e(x,{colorScheme:"danger",get loading(){return d()},onClick:async()=>{const a=await s(o());E(a,()=>{u(),n()})},get children(){return g("global.confirm")}})]}})]}})]}})};var Pn=ce("<p>");const Dn=()=>{const{isOpen:t,onOpen:r,onClose:n}=S(),{isOpen:o,onOpen:d,onClose:s}=S(),[u,i]=D(Xt),{pathname:g}=C(),{refresh:a}=R(),[f,l]=y("1"),[h,b]=y(""),[_,L]=y(""),[ne,c]=y("string"),[v,z]=y([]),m=k(),T=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),A=w=>{w==="batchRename"&&d()};p.on("tool",A),M(()=>{p.off("tool",A)});const de=()=>{if(!h()||!_()){Qt.warning(m("global.empty_input"));return}const w=new RegExp(h(),"g");let oe;if(f()==="1")oe=H().filter(B=>B.name.match(h())).map(B=>{const N=new Date(B.created),j=new Date(B.modified);return{src_name:B.name,new_name:B.name.replace(w,_()).replace("{created_year}",N.getFullYear().toString().padStart(4,"0")).replace("{created_month}",(N.getMonth()+1).toString().padStart(2,"0")).replace("{created_date}",N.getDate().toString().padStart(2,"0")).replace("{created_hour}",N.getHours().toString().padStart(2,"0")).replace("{created_minute}",N.getMinutes().toString().padStart(2,"0")).replace("{created_second}",N.getSeconds().toString().padStart(2,"0")).replace("{modified_year}",j.getFullYear().toString().padStart(4,"0")).replace("{modified_month}",(j.getMonth()+1).toString().padStart(2,"0")).replace("{modified_date}",j.getDate().toString().padStart(2,"0")).replace("{modified_hour}",j.getHours().toString().padStart(2,"0")).replace("{modified_minute}",j.getMinutes().toString().padStart(2,"0")).replace("{modified_second}",j.getSeconds().toString().padStart(2,"0"))}});else{let B=_();oe=H().map(N=>{let j="";const Me=N.name.lastIndexOf(".");Me!==-1&&(j=N.name.substring(Me+1));const ct={src_name:N.name,new_name:h()+B+"."+j};return B=(parseInt(B)+1).toString().padStart(B.length,"0"),ct})}z(oe),r(),s()};return[e(te,{blockScrollOnMount:!1,get opened(){return o()},onClose:s,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return m("home.toolbar.batch_rename")}}),e(q,{get children(){return[e(Yt,{defaultValue:"1",onChange:w=>{l(w),w==="1"?c("string"):w==="2"&&c("number")},get children(){return e(re,{spacing:"$4",get children(){return[e(Ue,{value:"1",get children(){return m("home.toolbar.regex_rename")}}),e(Ue,{value:"2",get children(){return m("home.toolbar.sequential_renaming")}})]}})}}),e(U,{spacing:"$2",get children(){return[(()=>{var w=Pn();return w.style.setProperty("margin","10px 0"),se(w,e(O,{get when(){return f()==="1"},get children(){return m("home.toolbar.regular_rename")}}),null),se(w,e(O,{get when(){return f()==="2"},get children(){return m("home.toolbar.sequential_renaming_desc")}}),null),w})(),e(K,{id:"modal-input1",type:"string",get value(){return h()},onInput:w=>{b(w.currentTarget.value)},onKeyDown:w=>{w.key==="Enter"&&de()}}),e(K,{id:"modal-input2",get type(){return ne()},get value(){return _()},onInput:w=>{L(w.currentTarget.value)},onKeyDown:w=>{w.key==="Enter"&&de()}})]}})]}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:()=>{l("1"),c("string"),s()},colorScheme:"neutral",get children(){return m("global.cancel")}}),e(x,{onClick:()=>de(),get disabled(){return!h()||!_()},get children(){return m("global.ok")}})]}})]}})]}}),e(te,{size:"xl",get opened(){return t()},onClose:n,get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return m("home.toolbar.regex_rename_preview")}}),e(q,{get children(){return e(U,{class:"list",w:"$full",spacing:"$1",get children(){return[e(re,{class:"title",w:"$full",p:"$2",get children(){return[e(I,ge({w:{"@initial":"50%","@md":"50%"}},T,{get children(){return m("home.toolbar.regex_rename_preview_old_name")}})),e(I,ge({w:{"@initial":"50%","@md":"50%"}},T,{get children(){return m("home.toolbar.regex_rename_preview_new_name")}}))]}}),e(me,{get each(){return v()},children:(w,oe)=>e(Kr,{obj:w,get index(){return oe()}})})]}})}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{onClick:()=>{z([]),l("1"),c("string"),n(),s()},colorScheme:"neutral",get children(){return m("global.cancel")}}),e(x,{onClick:()=>{z([]),n(),d()},colorScheme:"neutral",get children(){return m("global.back")}}),e(x,{get loading(){return u()},onClick:async()=>{let w=g();w.startsWith("/@tenant/data")&&(w=w.substring(13)||"/");const oe=await i(w,v());E(oe,()=>{z([]),b(""),L(""),l("1"),c("string"),a(),s(),n()})},get disabled(){return v().length==0},get children(){return m("global.ok")}})]}})]}})]}})]},Rn=["upload_download_stream","delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"];function Xe(t){return Se.enc.Utf8.stringify(Se.lib.WordArray.create(t))}function zn(t){var s;const r=Je.decode(t),n=Je.encode(r.info),o=Se.SHA1(Se.lib.WordArray.create(n)).toString();let d={};return Number.isInteger((s=r==null?void 0:r.info)==null?void 0:s.length)&&(d.xl=r.info.length),r.info.name&&(d.dn=Xe(r.info.name)),r.announce&&(d.tr=Xe(r.announce)),"magnet:?xt=urn:btih:".concat(o,"&").concat(new URLSearchParams(d).toString())}const Ln=()=>{const t=k(),[r,n]=y([]),[o,d]=D(()=>lt.get("/public/offline_download_tools")),[s,u]=y(""),[i,g]=y("upload_download_stream");Ze(async()=>{const c=await d();st(c,v=>{n(v),u(v[0])})});const{isOpen:a,onOpen:f,onClose:l}=S(),[h,b]=D(Zt),{pathname:_}=C(),L=c=>{c==="offline_download"&&f()};return p.on("tool",L),M(()=>{p.off("tool",L)}),e(Oe,{title:"home.toolbar.offline_download",type:"text",get opened(){return a()},onClose:l,get loading(){return o()||h()},get tips(){return t("home.toolbar.offline_download-tips")},onDrop:async(c,v)=>{var z;if(c.preventDefault(),(z=c.dataTransfer)!=null&&z.files.length){const m=[];for(const T of c.dataTransfer.files)if(T.name.toLowerCase().endsWith(".torrent"))try{const A=await T.arrayBuffer();m.push(zn(new Uint8Array(A)))}catch(A){console.error("Failed to convert torrent file to magnet link:",A)}m.length&&v(m.join("\n"))}},get topSlot(){return e(X,{mb:"$2",get children(){return e(qe,{get value(){return s()},onChange:c=>{c!=="SimpleHttp"&&i()==="upload_download_stream"&&g("delete_on_upload_succeed"),u(c)},get options(){return r().map(c=>({value:c,label:c}))}})}})},get bottomSlot(){return e(X,{mb:"$2",get children(){return e(qe,{get value(){return i()},onChange:c=>g(c),get options(){return Rn.filter(c=>c=="upload_download_stream"?s()==="SimpleHttp":!0).map(c=>({value:c,label:t("home.toolbar.delete_policy.".concat(c))}))}})}})},onSubmit:async c=>{const v=await b(_(),c.split("\n"),s(),i());E(v,()=>{l()})}})},Bn=t=>{const r=k(),n=u=>{u===t.name&&d()};p.on("tool",n),M(()=>{p.off("tool",n)});const{isOpen:o,onOpen:d,onClose:s}=S();return e(te,{get blockScrollOnMount(){return t.blockScrollOnMount},get opened(){return o()},onClose:s,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(er,{}),e(Z,{get children(){return r(t.title)}}),e(q,{get children(){return e(O,{get when(){return o()},get children(){return e(Be,{get fallback(){return e(ke,{})},get children(){return t.children}})}})}})]}})]}})};function En(t){const r=k();return e(kr,{get children(){return[e(ur,{get children(){return r("home.local_settings.".concat(t.key))}}),e(Ee,{get fallback(){return e(K,{get value(){return G[t.key]},onInput:n=>{le(t.key,n.currentTarget.value)}})},get children(){return[e(W,{get when(){return t.type==="select"},get children(){return e(we,{get id(){return t.key},get defaultValue(){return G[t.key]},onChange:n=>le(t.key,n),get children(){return[e(gr,{get children(){return[e(hr,{get children(){return r("global.choose")}}),e(mr,{}),e(pr,{})]}}),e(fr,{get children(){return e(br,{get children(){return e(me,{get each(){return t.options},children:n=>e(_r,{value:n,get children(){return[e(wr,{get children(){return r("home.local_settings.".concat(t.key,"_options.").concat(n))}}),e(yr,{})]}})})}})}})]}})}}),e(W,{get when(){return t.type==="boolean"},get children(){return e(it,{get defaultChecked(){return G[t.key]==="true"},onChange:n=>{le(t.key,n.currentTarget.checked.toString())}})}}),e(W,{get when(){return t.type==="number"},get children(){return e(re,{get children(){return[e(Re,{"aria-label":"decrease",get icon(){return e(Yr,{})},onClick:()=>{le(t.key,Math.max(1,parseInt(G[t.key])-1).toString())}}),e(K,{type:"number",get value(){return G[t.key]},onInput:n=>{le(t.key,n.currentTarget.value)},style:{"-moz-appearance":"textfield","::-webkit-inner-spin-button":{display:"none"},"::-webkit-outer-spin-button":{display:"none"}},class:"hide-spin"}),e(Re,{"aria-label":"increase",get icon(){return e(Qr,{})},onClick:()=>{le(t.key,(parseInt(G[t.key])+1).toString())}})]}})}})]}})]}})}const An=()=>{const{isOpen:t,onOpen:r,onClose:n}=S(),o=k(),d=s=>{s==="local_settings"&&r()};return p.on("tool",d),M(()=>{p.off("tool",d)}),e(dr,{get opened(){return t()},placement:"right",onClose:n,get children(){return[e(tr,{}),e(rr,{get children(){return[e(nr,{}),e(or,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),e(ar,{get children(){return[e(U,{spacing:"$2",get children(){return e(me,{get each(){return lr.filter(s=>!s.hidden)},children:s=>e(En,s)})}}),e(sr,{mt:"$4",get children(){return e(re,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[e(ir,{}),e(cr,{})]}})}})]}})]}})]}})},Nn=(t,r)=>{window.addEventListener("scroll",t,{passive:!0}),M(()=>window.removeEventListener("scroll",t))},Wn=()=>{if(vr)return null;const[t,r]=y(!1);return Nn(()=>r(window.scrollY>100)),e(O,{get when(){return t()},get children(){return e(X,{get as(){return $e.div},initial:{y:-999},animate:{y:0},zIndex:"$overlay",pos:"fixed",right:"$5",top:"0",borderBottomRadius:"50%",bgColor:"$whiteAlpha12",get color(){return ue()},overflow:"hidden",shadow:"$lg",get _dark(){return{bgColor:ue(),color:"white"}},get _hover(){return{bgColor:ue(),color:"white"}},get children(){return e(Ne,{_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",p:"$1",rounded:"$lg",as:Sr,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})}})}})}})};var Hn=ce("<div>");const jn=()=>{const t=k(),{isOpen:r,onOpen:n,onClose:o}=S(),[d,s]=D(Cr),{pathname:u}=C(),{refresh:i}=R(),[g,a]=y(""),[f,l]=y(""),[h,b]=y(!0),[_,L]=y(!1),ne=m=>{m==="decompress"&&(ze(()=>{b(!0),a("/"),l("")}),n())},c=m=>{const{inner:T,pass:A}=JSON.parse(m);ze(()=>{b(!1),a(T),l(A)}),n()};p.on("tool",ne),p.on("extract",c),M(()=>{p.off("tool",ne),p.off("extract",c)});const v=()=>g()==="/"?t("home.toolbar.choose_dst_folder"):t("home.toolbar.archive.extract_header",{path:g()}),z=()=>{let m=u();if(m.startsWith("/@tenant/data")&&(m=m.substring(13)||"/"),g()==="/")return{path:m,name:H().map(T=>T.name)};{let T=m.lastIndexOf("/");return{path:m.slice(0,T),name:[m.slice(T+1)]}}};return e(xe,{get header(){return v()},get opened(){return r()},onClose:o,get loading(){return d()},onSubmit:async m=>{const{path:T,name:A}=z(),de=await s(T,m,A,f(),g(),h(),_());E(de,()=>{i(),o()})},get children(){return e(U,{spacing:"$1",alignItems:"flex-start",get children(){return[e(re,{width:"100%",spacing:"$1",get children(){return[e(I,{size:"sm",css:{whiteSpace:"nowrap"},get children(){return t("home.toolbar.decompress-pass")}}),e(K,{get value(){return f()},onInput:m=>l(m.target.value),size:"sm",flexGrow:"1"})]}}),e(ie,{get checked(){return h()},onChange:m=>b(m.target.checked),get children(){return t("home.toolbar.decompress-cache-full")}}),e(ie,{get checked(){return _()},onChange:m=>L(m.target.checked),get children(){return t("home.toolbar.decompress-put-into-new")}}),Hn()]}})}})},Vn=()=>{const t=k(),[r,n]=y(""),{pathname:o}=C(),d=c=>{c==="share"&&(ze(()=>{n(""),f(""),h(!0);const v=H().map(z=>{let m=o();m.startsWith("/@tenant/data")&&(m=m.substring(13)||"/");const T=m.endsWith("/")||z.name.startsWith("/")?"":"/";return"".concat(We().base_path).concat(m).concat(T).concat(z.name)});_({files:v,expires:null,pwd:"",max_accessed:0,order_by:_e.None,order_direction:Pe.None,extract_folder:Fe.None,remark:"",readme:"",header:""})}),u())};p.on("tool",d),M(()=>{p.off("tool",d)});const{isOpen:s,onOpen:u,onClose:i}=S(),{copy:g}=$r(),[a,f]=y(""),[l,h]=y(!0),[b,_]=xr({}),[L,ne]=D(()=>lt.post("/share/create",b));return e(te,{blockScrollOnMount:!1,get opened(){return s()},onClose:i,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[e(Y,{}),e(Q,{get children(){return[e(Z,{get children(){return t("home.toolbar.share")}}),e(it,{get fallback(){return[e(q,{get children(){return e(be,{variant:"filled",get value(){return r()},readonly:!0})}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{colorScheme:"primary",onClick:()=>{g(r())},get children(){return t("shares.copy_msg")}}),e(x,{colorScheme:"info",onClick:i,get children(){return t("global.confirm")}})]}})]},get children(){return e(W,{get when(){return r()===""},get children(){return[e(q,{get children(){return e(U,{spacing:"$1",alignItems:"flex-start",get children(){return[e(I,{size:"sm",get children(){return t("shares.remark")}}),e(be,{size:"sm",get value(){return b.remark},onInput:c=>{_("remark",c.currentTarget.value)}}),e(I,{size:"sm",get children(){return t("shares.extract_folder")}}),e(we,{size:"sm",get value(){return b.extract_folder},onChange:c=>{_("extract_folder",c)},get children(){return e(Ie,{get options(){return[{key:Fe.Front,label:t("shares.extract_folders.front")},{key:Fe.Back,label:t("shares.extract_folders.back")}]}})}}),e(I,{size:"sm",get children(){return t("shares.order_by")}}),e(we,{size:"sm",get value(){return b.order_by},onChange:c=>{_("order_by",c)},get children(){return e(Ie,{get options(){return[{key:_e.Name,label:t("shares.order_bys.name")},{key:_e.Size,label:t("shares.order_bys.size")},{key:_e.Modified,label:t("shares.order_bys.modified")}]}})}}),e(I,{size:"sm",get children(){return t("shares.order_direction")}}),e(we,{size:"sm",get value(){return b.order_direction},onChange:c=>{_("order_direction",c)},get children(){return e(Ie,{get options(){return[{key:Pe.Asc,label:t("shares.order_directions.asc")},{key:Pe.Desc,label:t("shares.order_directions.desc")}]}})}}),e(I,{size:"sm",get children(){return t("shares.pwd")}}),e(re,{spacing:"$1",w:"$full",get children(){return[e(K,{size:"sm",get value(){return b.pwd},onInput:c=>{_("pwd",c.currentTarget.value)}}),e(Re,{colorScheme:"neutral",size:"sm","aria-label":"random",get icon(){return e(Vr,{})},onClick:()=>{_("pwd",Zr())}})]}}),e(I,{size:"sm",get children(){return t("shares.max_accessed")}}),e(K,{type:"number",size:"sm",get value(){return b.max_accessed},onInput:c=>{_("max_accessed",parseInt(c.currentTarget.value))}}),e(I,{size:"sm",get children(){return t("shares.expires")}}),e(K,{size:"sm",get invalid(){return!l()},get value(){return a()},placeholder:"yyyy-MM-dd HH:mm:ss or +1w1d1H1m1s1ms",onInput:c=>{if(f(c.currentTarget.value),c.currentTarget.value===""){h(!0),_("expires",null);return}const v=en(c.currentTarget.value);isNaN(v.getTime())?h(!1):(h(!0),_("expires",v))}}),e(I,{size:"sm",get children(){return t("shares.readme")}}),e(be,{size:"sm",get value(){return b.readme},onInput:c=>{_("readme",c.currentTarget.value)}}),e(I,{size:"sm",get children(){return t("shares.header")}}),e(be,{size:"sm",get value(){return b.header},onInput:c=>{_("header",c.currentTarget.value)}})]}})}}),e(ee,{display:"flex",gap:"$2",get children(){return[e(x,{colorScheme:"neutral",onClick:i,get children(){return t("global.cancel")}}),e(x,{get loading(){return L()},onClick:async()=>{const c=await ne();st(c,v=>{n("".concat(location.origin).concat(Or(he("share_template"),tn(v))))})},get children(){return t("global.ok")}})]}})]}})}})]}})]}})},Un=pe(()=>fe(()=>import("./Upload-BlpMZ7Lp.js"),__vite__mapDeps([24,1,2,17,25]))),qn=()=>[e(kn,{}),e(vn,{}),e($n,{}),e(Cn,{}),e(jn,{}),e(xn,{}),e(On,{}),e(Vn,{}),e(Tn,{}),e(Fn,{}),e(Dn,{}),e(Ln,{}),e(_n,{}),e(Bn,{name:"upload",title:"home.toolbar.upload",get children(){return e(Un,{})}}),e(An,{})],Gn=()=>e(Mr,{get children(){return[e(yn,{}),e(wn,{}),e(qn,{}),e(Wn,{})]}}),Jn=()=>(Ir(he("site_title")),[e(Gn,{}),e(hn,{})]),oo=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"}));export{oo as L,J as o};
