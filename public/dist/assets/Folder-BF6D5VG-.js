const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/List--pgpJJBK.js","assets/index-CsB5zT4W.js","assets/index-DYLAoZjS.css","assets/style-BhP5neJU.js","assets/style-qq4T_k44.css","assets/icon-BfaWsS4s.js","assets/index-Bc2gP8al.js","assets/index-DBnL0RpI.js","assets/helper-C1bScd5p.js","assets/viselect-DiY-CsSI.js","assets/Grid-CmLwmYvG.js","assets/GridItem-hg9eXY83.js","assets/ImageWithError-BL5fr3Hs.js","assets/mark-DcE7yjIR.js","assets/mark-pZUjROFs.css","assets/Images-p1KiKvYn.js"])))=>i.map(i=>d[i]);
import{co as le,aE as ce,a0 as ee,u as O,o as e,F as D,ay as g,aD as q,af as x,ag as w,a$ as G,cp as de,S as k,bh as ue,y as $,ac as y,as as he,V as m,cq as ge,au as F,cr as me,b6 as Q,a5 as X,W as pe,aP as fe,N as h,Q as T,P as A,R as we,I as te,M as W,cs as _e,ct as ke,j as V,aM as be,a9 as re,ab as H,aF as ye,K as P,aZ as $e,cu as Se,aG as Ce,aH as ve,bm as xe,aI as Me,aJ as Le,X as R,bk as Ie,bg as Pe,ai as ze,av as Ee,aN as Be,aw as De,_ as Re,bl as Oe,r as Fe,b5 as Te,am as Ae,ck as We,cl as Ve,D as Y,cv as He,g as Ke,J as je,Z as Ne,T as K,aj as z,Y as j}from"./index-CsB5zT4W.js";import{x as d,C as E,w as Ze}from"./style-BhP5neJU.js";import{u as Je}from"./index-DBnL0RpI.js";import{o as B}from"./Layout-BFz_QJzU.js";import{O as ne,g as Ue}from"./icon-BfaWsS4s.js";import{p as qe}from"./video_box-C2Dic8iL.js";import{P as ae}from"./Paginator-CZdTa2_8.js";import{M as Ge,l as Qe,Z as Xe,T as Ye,R as et,A as tt,F as rt}from"./mark-DcE7yjIR.js";import{L as nt}from"./index-DUExJ8y_.js";import"./useTitle-C7kyrev7.js";import"./FolderTree-s4yEnMk2.js";import"./index-DlLE0hg-.js";import"./index-LqbMjJST.js";import"./index-Bc2gP8al.js";import"./share-2qqjNftT.js";import"./artplayer-C5-Hz-Y-.js";const _=t=>{const n=$();return e(y,{spacing:"$2",get children(){return[e(F,{get p(){return B[t.name].p?"$1":void 0},get as(){return B[t.name].icon},boxSize:"$7",get color(){return B[t.name].color}}),e(m,{get children(){return n("home.toolbar.".concat(t.name))}})]}})},at=()=>{const t=$(),{colorMode:n}=le(),{copySelectedRawLink:r,copySelectedPreviewPage:i}=ce(),{batchDownloadSelected:o,sendToAria2:l,playlistDownloadSelected:p}=Je(),S=()=>x.is_admin(w())||X("package_download"),{rawLink:f}=ee(),{isShare:C}=O();return e(Ze,{id:1,animation:"scale",get theme(){return n()!=="dark"?"light":"dark"},style:"z-index: var(--hope-zIndices-popover)",get children(){return[e(D,{each:["rename","move","copy","delete","share"],children:s=>e(d,{hidden:()=>{const c=q.findIndex(b=>b===s);return C()||!x.can(w(),c)},onClick:()=>{g.emit("tool",s)},get children(){return e(_,{name:s})}})}),e(d,{hidden:()=>{const s=q.findIndex(c=>c==="decompress");return C()||!x.can(w(),s)||G().some(c=>c.is_dir)||G().some(c=>!de(c.name))},onClick:()=>{g.emit("tool","decompress")},get children(){return e(_,{name:"decompress"})}}),e(k,{get when(){return Q()},get children(){return[e(d,{onClick:({props:s})=>{s.is_dir?i():r(!0)},get children(){return e(_,{name:"copy_link"})}}),e(d,{onClick:({props:s})=>{if(s.is_dir){if(!S()){ue.warning(t("home.toolbar.package_download_disabled"));return}g.emit("tool","package_download")}else o()},get children(){return e(_,{name:"download"})}}),e(E,{hidden:({props:s})=>s.type!==ne.VIDEO,get label(){return e(y,{spacing:"$2",get children(){return[e(F,{as:me,boxSize:"$7",p:"$0_5",color:"$info9"}),e(m,{get children(){return t("home.preview.play_with")}})]}})},get children(){return e(D,{each:qe,children:s=>e(d,{onClick:({props:c})=>{const b=ge(s.scheme,{raw_url:"",name:c.name,d_url:f(c,!0)});window.open(b,"_self")},get children(){return e(y,{spacing:"$2",get children(){return[e(he,{m:"0 auto",boxSize:"$7",get src(){return"".concat(window.__dynamic_base__,"/images/").concat(s.icon,".webp")}}),e(m,{get children(){return s.name}})]}})}})})}})]}}),e(k,{get when(){return pe(()=>!Q())()&&fe()},get children(){return[e(E,{get label(){return e(_,{name:"copy_link"})},get children(){return[e(d,{onClick:i,get children(){return t("home.toolbar.preview_page")}}),e(d,{onClick:()=>r(),get children(){return t("home.toolbar.down_link")}}),e(d,{onClick:()=>r(!0),get children(){return t("home.toolbar.encode_down_link")}})]}}),e(E,{get label(){return e(_,{name:"download"})},get children(){return[e(d,{onClick:o,get children(){return t("home.toolbar.batch_download")}}),e(k,{get when(){return x.is_admin(w())||X("package_download")},get children(){return[e(d,{onClick:()=>g.emit("tool","package_download"),get children(){return t("home.toolbar.package_download")}}),e(d,{onClick:p,get children(){return t("home.toolbar.playlist_download")}})]}}),e(d,{onClick:l,get children(){return t("home.toolbar.send_aria2")}})]}})]}})]}})},ot=()=>{const t=te(),{pathname:n,setSearchParams:r}=O();return e(ae,{get total(){return A.total},get defaultCurrent(){return ke()},get defaultPageSize(){return t.size},onChange:i=>{_e(n(),i),r({page:i})}})},st=()=>{const{loadMore:t,allLoaded:n}=V(),r=$();return e(k,{get when(){return!n()},get fallback(){return e(m,{fontStyle:"italic",get children(){return r("home.no_more")}})},get children(){return e(be,{onClick:t,get children(){return r("home.load_more")}})}})},it=()=>{const{loadMore:t,allLoaded:n}=V(),r=$(),i=new IntersectionObserver(l=>{l[0].isIntersecting&&t()},{threshold:.1});let o;return re(()=>{n()||i.observe(o)}),H(()=>{i.disconnect()}),e(k,{get when(){return!n()},get fallback(){return e(m,{fontStyle:"italic",get children(){return r("home.no_more")}})},get children(){return e(T,{py:"$2",size:"md",thickness:3,ref(l){var p=o;typeof p=="function"?p(l):o=l}})}})},lt=()=>{const t=te();return e(W,{get children(){return[e(h,{get when(){return A.state===we.FetchingMore},get children(){return e(T,{py:"$2",size:"md",thickness:3})}}),e(h,{get when(){return t.type==="pagination"},get children(){return e(ot,{})}}),e(h,{get when(){return t.type==="load_more"},get children(){return e(st,{})}}),e(h,{get when(){return t.type==="auto_load_more"},get children(){return e(it,{})}})]}})};function ct(t){let n;return re(()=>{new Ge(n).mark(t.keywords,{separateWordSearch:!0,diacritics:!0})}),e(He.span,{ref(r){var i=n;typeof i=="function"?i(r):n=r},css:{mark:{bg:"$info4",rounded:"$md",px:"1px",color:"$info11",fontWeight:"$bold"}},get children(){return t.name}})}const dt=t=>{const{setPathAs:n}=V();return e(y,{w:"$full",get borderBottom(){return"1px solid ".concat(Y())},get _hover(){return{bgColor:Y()}},rounded:"$md",cursor:"pointer",px:"$2",as:nt,get href(){return"".concat(t.node.path,"?from=search")},onMouseEnter:()=>{n(t.node.path,t.node.is_dir)},get children(){return[e(F,{class:"icon",boxSize:"$6",get color(){return Ae()},get as(){return Ue(t.node)},mr:"$1"}),e(R,{flex:1,p:"$1",spacing:"$1",w:"$full",alignItems:"start",get children(){return[e(m,{css:{wordBreak:"break-all"},get children(){return[e(ct,{get keywords(){return t.keywords},get name(){return t.node.name}}),e(k,{get when(){return t.node.size>0||!t.node.is_dir},get children(){return e(We,{colorScheme:"info",ml:"$2",get children(){return Ve(t.node.size)}})}})]}}),e(m,{color:"$neutral10",size:"xs",css:{wordBreak:"break-all"},get children(){return t.node.parent}})]}})]}})},ut=()=>{const{isOpen:n,onOpen:r,onClose:i,onToggle:o}=ye(),l=$(),p=a=>{a==="search"&&r()};g.on("tool",p);const S=a=>{(a.ctrlKey||De&&a.metaKey)&&a.key.toLowerCase()==="k"&&(a.preventDefault(),o())};document.addEventListener("keydown",S),H(()=>{g.off("tool",p),document.removeEventListener("keydown",S)});const[f,C]=P(""),{pathname:s}=O(),[c,b]=$e(Se),[M,N]=P({content:[],total:0}),[Z,oe]=P(0),se=["all","folder","file"];let v;const L=async(a=1)=>{if(a===1&&(v==null||v()),c())return;N({content:[],total:0});const I=await b(s(),f(),Re(),Z(),a,100);Oe(I,J=>{const U=J.content;U&&(U.forEach(u=>{if(w().base_path&&u.parent.startsWith(w().base_path)){const ie=new RegExp("^"+w().base_path);u.parent=u.parent.replace(ie,"")||"/",u.parent.startsWith("/")||(u.parent="/"+u.parent)}u.path=Fe(Te(u.parent,u.name))}),N(J))})};return e(Be,{get opened(){return n()},onClose:i,closeOnEsc:!1,size:{"@initial":"sm","@sm":"lg","@md":"2xl"},initialFocus:"#search-input",scrollBehavior:"inside",get children(){return[e(Ce,{bg:"$blackAlpha5"}),e(ve,{mx:"$2",get children(){return[e(xe,{}),e(Me,{get children(){return l("home.search.search")}}),e(Le,{get children(){return e(R,{w:"$full",spacing:"$2",get children(){return[e(y,{w:"$full",spacing:"$2",get children(){return[e(Ie,{w:"$32",get value(){return Z()},onChange:a=>oe(a),get options(){return se.map((a,I)=>({value:I,label:l("home.search.scopes.".concat(a))}))}}),e(Pe,{id:"search-input",get value(){return f()},onInput:a=>{C(a.currentTarget.value)},onKeyDown:a=>{a.key==="Enter"&&f().length!==0&&L()}}),e(ze,{flexShrink:0,"aria-label":"search",get icon(){return e(Ee,{})},onClick:()=>L(),get loading(){return c()},get disabled(){return f().length===0}})]}}),e(W,{get children(){return[e(h,{get when(){return c()},get children(){return e(T,{})}}),e(h,{get when(){return M().content.length===0},get children(){return e(m,{size:"2xl",my:"$8",get children(){return l("home.search.no_result")}})}})]}}),e(R,{w:"$full",get children(){return e(D,{get each(){return M().content},children:a=>e(dt,{node:a,get keywords(){return f()}})})}}),e(ae,{get total(){return M().total},defaultPageSize:100,onChange:a=>{L(a)},setResetCallback:a=>v=a})]}})}})]}})]}})},ht=K(()=>j(()=>import("./List--pgpJJBK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),gt=K(()=>j(()=>import("./Grid-CmLwmYvG.js"),__vite__mapDeps([10,1,2,11,3,4,12,5,6,7,8,9,13,14]))),mt=K(()=>j(()=>import("./Images-p1KiKvYn.js"),__vite__mapDeps([15,1,2,3,4,12,5,6,7,8,9,11]))),zt=()=>{const{rawLink:t}=ee(),n=Ke(()=>A.objs.filter(o=>o.type===ne.IMAGE));let r;const i=()=>{r=Qe(document.createElement("div"),{addClass:"lightgallery-container",dynamic:!0,thumbnail:!0,plugins:[Xe,Ye,et,tt,rt],dynamicEl:n().map(o=>{const l=t(o,!0);return{src:l,thumb:o.thumb===""?l:o.thumb,subHtml:"<h4>".concat(o.name,"</h4>")}})})};return je(Ne(n,()=>{r==null||r.destroy(),r=void 0})),g.on("gallery",o=>{r||i(),r==null||r.openGallery(n().findIndex(l=>l.name===o))}),H(()=>{g.off("gallery"),r==null||r.destroy()}),[e(W,{get children(){return[e(h,{get when(){return z()==="list"},get children(){return e(ht,{})}}),e(h,{get when(){return z()==="grid"},get children(){return e(gt,{})}}),e(h,{get when(){return z()==="image"},get children(){return e(mt,{get images(){return n()}})}})]}}),e(lt,{}),e(ut,{}),e(at,{})]};export{zt as default};
