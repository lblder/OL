System.register(["./index-legacy-VniDFTuT.js","./index-legacy-BbIbJMhB.js"],function(e,r){"use strict";var n,t,o,l,a,u,c,g,h,i,d,s,p,f,w,C,b,m,y,$,k,v,F,O,S,x,_,I,H,z,M,P,R,E,j,J,T,V;return{setters:[e=>{n=e.aF,t=e.o,o=e.bg,l=e.y,a=e.S,u=e.aM,c=e.ac,g=e.aG,h=e.aH,i=e.bm,d=e.aI,s=e.aJ,p=e.aL,f=e.aN,w=e.K,C=e.J,b=e.W,m=e.d6,y=e.a2,$=e.bM,k=e.d7,v=e.aZ,F=e.dh,O=e._,S=e.d8,x=e.Z,_=e.au,I=e.am,H=e.d0,z=e.V,M=e.ci,P=e.D,R=e.X,E=e.F,j=e.b5,J=e.bl},e=>{T=e.l,V=e.w}],execute:function(){const r=m(),W=e("F",e=>{const[n,o]=w("/");return e.handle?.({setPath:o}),t(y,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(r.Provider,{get value(){return{value:n,onChange:r=>{o(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(X,{path:"/"})}})}})}),X=e=>{const{isHidePath:o}=$(),[l,u]=w(),{value:g,onChange:h,forceRoot:i,autoOpen:d,showEmptyIcon:s,showHiddenFolder:p}=k(r),[f,m]=v(()=>F(e.path,O(),i));let W=!1;const Z=async()=>{if(l()?.length)return;const e=await m();J(e,e=>{W=!0,u(e)},()=>{B()&&D()})},{isOpen:B,onToggle:D}=n(),G=()=>g()===e.path,K=S(e.path);return C(x(g,async e=>{d&&K(e)&&(B()||D(),W||Z())})),t(a,{get when(){return p||!(o(e.path)&&!K(g()))},get children(){return t(y,{get children(){return[t(c,{spacing:"$2",get children(){return[t(a,{get when(){return!f()},get fallback(){return t(H,{size:"sm",get color(){return I()}})},get children(){return t(a,{get when(){return!Boolean(s&&void 0!==l()&&!l()?.length)},get fallback(){return t(_,{get color(){return I()},as:V})},get children(){return t(_,{get color(){return I()},as:T,get transform(){return B()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{D(),B()&&Z()}})}})}}),t(z,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return G()?"$info8":"transparent"},get _hover(){return{bgColor:G()?"$info8":P()}},onClick:()=>{h(e.path)},get children(){return b(()=>"/"===e.path)()?"root":M(e.path)}})]}}),t(a,{get when(){return B()},get children(){return t(R,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(E,{get each(){return l()},children:r=>t(X,{get path(){return j(e.path,r.name)}})})}})}})]}})}})};e("M",e=>{const r=l(),[n,o]=w(e.defaultValue??"/"),[c,i]=w();return C(()=>{e.opened&&c()?.setPath(n())}),t(f,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(g,{}),t(h,{get children(){return[t(d,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(s,{get children(){return[b(()=>e.children),t(W,{onChange:o,handle:e=>i(e),autoOpen:!0})]}}),t(p,{display:"flex",gap:"$2",get children(){return[t(a,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),t(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),t(u,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(n()),get children(){return r("global.ok")}})]}})]}})]}})}),e("a",e=>{const{isOpen:r,onOpen:w,onClose:C}=n(),b=l();return[t(c,{w:"$full",spacing:"$2",get children(){return[t(o,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?w:()=>{}},get placeholder(){return b("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),t(a,{get when(){return!e.onlyFolder},get children(){return t(u,{onClick:w,get children(){return b("global.choose")}})}})]}}),t(f,{size:"xl",get opened(){return r()},onClose:C,get children(){return[t(g,{}),t(h,{get children(){return[t(i,{}),t(d,{get children(){return b("global.choose_folder")}}),t(s,{get children(){return t(W,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(p,{get children(){return t(u,{onClick:C,get children(){return b("global.confirm")}})}})]}})]}})]})}}});
