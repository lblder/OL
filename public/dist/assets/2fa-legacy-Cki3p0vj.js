System.register(["./index-legacy-VniDFTuT.js"],function(e,r){"use strict";var t,n,a,u,s,c,i,g,o,l,d,h,y,b,f,p,v,x,m,w,_;return{setters:[e=>{t=e.u,n=e.aZ,a=e.bi,u=e.K,s=e.o,c=e.S,i=e.X,g=e.bV,o=e.y,l=e.as,d=e.W,h=e.V,y=e.am,b=e.bg,f=e.aM,p=e.a3,v=e.ag,x=e.bh,m=e.bl,w=e.b0,_=e.c4}],execute:function(){e("default",()=>{const{back:e}=t(),[r,$]=n(()=>a.post("/auth/2fa/generate")),k=o(),[S,q]=u(),[I,K]=u("");(async()=>{if(v().otp)return x.warning(k("users.2fa_already_enabled")),void e();const r=await $();m(r,q)})();const[V,W]=n(()=>a.post("/auth/2fa/verify",{code:I(),secret:S()?.secret})),j=async()=>{const r=await W();w(r,()=>{_({...v(),otp:!0}),e()})};return s(p,{get loading(){return r()},get children(){return s(c,{get when(){return S()},get children(){return s(i,{spacing:"$2",alignItems:"start",get children(){return[s(g,{get children(){return k("users.scan_qr")}}),s(l,{boxSize:"$xs",rounded:"$lg",get src(){return S()?.qr}}),s(g,{get children(){return[d(()=>k("users.or_manual")),":"," ",s(h,{get color(){return y()},get children(){return S()?.secret}})]}}),s(b,{maxW:"$xs",get placeholder(){return k("users.input_code")},get value(){return I()},onInput:e=>K(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&j()}}),s(f,{get loading(){return V()},onClick:j,get children(){return k("users.verify")}})]}})}})}})})}}});
