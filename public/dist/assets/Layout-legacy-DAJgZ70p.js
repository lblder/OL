System.register(["./index-legacy-VniDFTuT.js","./useTitle-legacy-CH79vzdE.js","./index-legacy-BbIbJMhB.js","./FolderTree-legacy-DHZp4Una.js","./index-legacy-B-ZTtTkV.js","./index-legacy-DtNGCokM.js","./index-legacy-CqHab1CM.js","./index-legacy-DjvGcIGH.js","./share-legacy-HzLthkxb.js"],function(e,r){"use strict";var t,n,o,l,a,i,c,s,u,d,g,h,p,m,f,b,w,_,y,F,k,$,v,C,x,S,E,D,A,O,B,z,M,I,j,T,R,L,P,q,N,H,W,U,K,V,G,J,Y,Q,X,Z,ee,re,te,ne,oe,le,ae,ie,ce,se,ue,de,ge,he,pe,me,fe,be,we,_e,ye,Fe,ke,$e,ve,Ce,xe,Se,Ee,De,Ae,Oe,Be,ze,Me,Ie,je,Te,Re,Le,Pe,qe,Ne,He,We,Ue,Ke,Ve,Ge,Je,Ye,Qe,Xe,Ze,er,rr,tr,nr,or,lr,ar,ir,cr,sr,ur,dr,gr,hr,pr,mr,fr,br,wr,_r,yr,Fr,kr,$r,vr,Cr,xr,Sr,Er,Dr,Ar,Or,Br,zr,Mr,Ir,jr,Tr,Rr,Lr,Pr,qr,Nr,Hr,Wr,Ur,Kr,Vr,Gr,Jr,Yr,Qr,Xr,Zr,et,rt,tt,nt,ot,lt,at,it,ct,st,ut,dt,gt,ht,pt,mt,ft,bt,wt,_t,yt,Ft,kt,$t,vt,Ct,xt,St,Et,Dt,At,Ot,Bt,zt;return{setters:[e=>{t=e.u,n=e.g,o=e.j,l=e.k,a=e.o,i=e.q,c=e.F,s=e.r,u=e.x,d=e.y,g=e.B,h=e.z,p=e.A,m=e.C,f=e.D,b=e.S,w=e.E,_=e.G,y=e.H,F=e.I,k=e.J,$=e.K,v=e.L,C=e.M,x=e.N,S=e.O,E=e.P,D=e.Q,A=e.R,O=e.T,B=e.U,z=e._,M=e.V,I=e.W,j=e.X,T=e.Y,R=e.Z,L=e.$,P=e.a0,q=e.a1,N=e.a2,H=e.a3,W=e.a4,U=e.a5,K=e.a6,V=e.a7,G=e.a8,J=e.a9,Y=e.aa,Q=e.ab,X=e.ac,Z=e.ad,ee=e.ae,re=e.af,te=e.ag,ne=e.ah,oe=e.ai,le=e.aj,ae=e.ak,ie=e.al,ce=e.am,se=e.an,ue=e.ao,de=e.ap,ge=e.aq,he=e.ar,pe=e.as,me=e.at,fe=e.au,be=e.av,we=e.aw,_e=e.ax,ye=e.ay,Fe=e.az,ke=e.aA,$e=e.aB,ve=e.aC,Ce=e.aD,xe=e.aE,Se=e.aF,Ee=e.aG,De=e.aH,Ae=e.aI,Oe=e.aJ,Be=e.aK,ze=e.aL,Me=e.aM,Ie=e.aN,je=e.aO,Te=e.aP,Re=e.aQ,Le=e.aR,Pe=e.aS,qe=e.aT,Ne=e.aU,He=e.aV,We=e.aW,Ue=e.aX,Ke=e.aY,Ve=e.aZ,Ge=e.a_,Je=e.a$,Ye=e.b0,Qe=e.b1,Xe=e.b2,Ze=e.b3,er=e.b4,rr=e.b5,tr=e.b6,nr=e.b7,or=e.b8,lr=e.b9,ar=e.ba,ir=e.bb,cr=e.bc,sr=e.bd,ur=e.be,dr=e.bf,gr=e.bg,hr=e.bh,pr=e.bi,mr=e.bj,fr=e.bk,br=e.bl,wr=e.bm,_r=e.bn,yr=e.bo,Fr=e.bp,kr=e.bq,$r=e.br,vr=e.bs,Cr=e.bt,xr=e.bu,Sr=e.bv,Er=e.bw,Dr=e.bx,Ar=e.by,Or=e.bz,Br=e.bA,zr=e.bB,Mr=e.bC,Ir=e.bD,jr=e.bE,Tr=e.bF,Rr=e.bG,Lr=e.bH,Pr=e.bI,qr=e.bJ,Nr=e.bK,Hr=e.bL,Wr=e.bM,Ur=e.bN,Kr=e.bO,Vr=e.bP,Gr=e.bQ,Jr=e.bR,Yr=e.bS},e=>{Qr=e.u,Xr=e.a},e=>{Zr=e.L,et=e.A,rt=e.C,tt=e.a,nt=e.b,ot=e.B,lt=e.c,at=e.T,it=e.d,ct=e.e,st=e.f,ut=e.g,dt=e.h,gt=e.i,ht=e.j,pt=e.k},e=>{mt=e.F,ft=e.M},e=>{bt=e.F,wt=e.a,_t=e.b},e=>{yt=e.T},e=>{Ft=e.I,kt=e.u,$t=e.M,vt=e.R,Ct=e.b,xt=e.c,St=e.E,Et=e.O,Dt=e.a},e=>{At=e.R},e=>{Ot=e.r,Bt=e.g,zt=e.m}],execute:function(){const Mt=()=>{const{pathname:e,isShare:r}=t(),y=n(()=>{if(r()){const r=e().split("/").filter(Boolean);return[`@s/${r[1]??""}`,...r.slice(2)]}return["",...e().split("/").filter(Boolean)]}),F=d(),{setPathAs:k}=o(),$=n(()=>{const e={_after:{content:"",backgroundColor:"$background",position:"absolute",height:"100%",width:"99vw",zIndex:-1,transform:"translateX(-50%)",left:"50%",top:0}};switch(l.position_of_header_navbar){case"only_navbar_sticky":return{...e,position:"sticky",zIndex:"$sticky",top:0};case"sticky":return{...e,position:"sticky",zIndex:"$sticky",top:60};default:return{_after:void 0,position:void 0,zIndex:void 0,top:void 0}}});return a(_,i($,{background:"$background",class:"nav",w:"$full",get children(){return a(c,{get each(){return y()},children:(e,t)=>{const o=n(()=>t()===y().length-1),l=y().slice(0,t()+1).join("/"),i=s(l);let c=()=>e;return r()||""!==c()?r()&&0===t()&&(c=()=>u("share_icon")+F("manage.sidemenu.shares")):c=()=>u("home_icon")+F("manage.sidemenu.home"),a(g,{class:"nav-item",get children(){return[a(h,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{backgroundColor:f(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return o()},get as(){return o()?void 0:m},get href(){return p(i)},onMouseEnter:()=>k(l),get children(){return c()}}),a(b,{get when(){return!o()},get children(){return a(w,{class:"nav-separator"})}})]}})}})}}))},It=O(()=>T(()=>r.import("./Folder-legacy-B5sKrvGo.js"),void 0)),jt=O(()=>T(()=>r.import("./File-legacy-DJZOSZxx.js").then(e=>e.a),void 0)),Tt=O(()=>T(()=>r.import("./Password-legacy-fMZ8e4Bi.js"),void 0)),[Rt,Lt]=$(),Pt=()=>{const e=d(),r=y("white","$neutral3"),{pathname:l,searchParams:i,isShare:c}=t(),{handlePathChange:s,refresh:u}=o(),g=F(),h=n(()=>"pagination"===g.type?parseInt(i.page,10)||1:void 0);let p,m;return k(R([l,h],async([e,r])=>{i.pwd&&B(i.pwd),p&&L(p,m),p=e,m=r,Qr(),await s(e,r)})),a(j,{ref:e=>Lt(e),class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return r()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return a(v,{get fallback(){return a(D,{})},get children(){return a(C,{get children(){return[a(x,{get when(){return E.err},get children(){return a(S,{get msg(){return E.err},disableColor:!0})}}),a(x,{get when(){return[A.FetchingObj,A.FetchingObjs].includes(E.state)},get children(){return a(D,{})}}),a(x,{get when(){return E.state===A.NeedPassword},get children(){return a(Tt,{get title(){return I(()=>!!c())()?e("shares.input_password"):e("home.input_password")},password:z,setPassword:B,enterCallback:()=>u(!0),get children(){return a(b,{get when(){return!c()},get children(){return[a(M,{get children(){return e("global.have_account")}}),a(M,{color:"$info9",as:Zr,get href(){return`/@login?redirect=${encodeURIComponent(location.pathname)}`},get children(){return e("global.go_login")}})]}})}})}}),a(x,{get when(){return[A.Folder,A.FetchingMore].includes(E.state)},get children(){return a(It,{})}}),a(x,{get when(){return E.state===A.File},get children(){return a(jt,{})}})]}})}})}})};function qt(e){const r=y("white","$neutral3"),{proxyLink:o}=P();t();const l=n(R(()=>E.state,()=>{if(![A.FetchingMore,A.Folder,A.File].includes(E.state))return"";if([A.FetchingMore,A.Folder].includes(E.state)){const r=E.objs.find(r=>e.files.find(e=>e.toLowerCase()===r.name.toLowerCase()));if(r)return o(r,!0)}return E[e.fromMeta]&&"string"==typeof E[e.fromMeta]?E[e.fromMeta]:""})),[i]=q(l,async e=>{let r={content:e};return/^https?:\/\//g.test(e)&&(r=await K(e)),r});return a(b,{get when(){return I(()=>!!U("readme_autorender"))()&&l()},get children(){return a(N,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return r()},shadow:"$lg",get children(){return a(H,{get loading(){return i.loading},get children(){return a(W,{get children(){return i()?.content},readme:!0,get toc(){return"readme"===e.fromMeta}})}})}})}})}const Nt=e=>{const r=u("home_container");return a(C,{get fallback(){return a(N,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return a(x,{when:"hope_container"===r,get children(){return a(V,{get children(){return e.children}})}})}})};function Ht(){const{to:e}=t(),r=G(),[n,o]=$(),[l,i]=$(),[c,s]=$(-999),u=()=>{const e=Rt(),r=l();if(!e||!r)return;const t=e.offsetLeft>50?16:0;r.clientWidth<e.offsetLeft-t?s(0):s(`calc(-100% + ${e.offsetLeft}px - ${t}px)`)};let d;return J(()=>{const e=n();e?.setPath(r.pathname),d=requestAnimationFrame(u),window.addEventListener("resize",u),Q(()=>window.removeEventListener("resize",u))}),k(R(()=>E.state,()=>{cancelAnimationFrame(d),d=requestAnimationFrame(u)})),k(R(()=>r.pathname,()=>{const e=n();e?.setPath(r.pathname)})),a(N,{get as(){return Y.div},initial:{x:-999},get animate(){return{x:c()}},zIndex:"$overlay",pos:"fixed",left:3,top:3,h:"calc(100vh - 6px)",minW:180,p:"$2",overflow:"auto",shadow:"$lg",rounded:"$lg",bgColor:"white",_dark:{bgColor:"$neutral3"},onMouseEnter:()=>s(0),onMouseLeave:u,ref:e=>i(e),get children(){return a(mt,{autoOpen:!0,showEmptyIcon:!0,showHiddenFolder:!1,onChange:r=>e(r),handle:e=>o(e)})}})}function Wt(){const e=n(()=>"none"!==l.show_sidebar);return a(b,{get when(){return e()},get children(){return a(Ht,{})}})}const Ut=()=>a(Nt,{get children(){return a(j,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[a(qt,{files:["header.md","top.md","index.md"],fromMeta:"header"}),a(Mt,{}),a(Pt,{}),a(qt,{files:["readme.md","footer.md","bottom.md"],fromMeta:"readme"}),a(Wt,{})]}})}});var Kt=Z("<span>|");const Vt=()=>{const e=d();return a(j,{class:"footer",w:"$full",py:"$4",get children(){return a(X,{spacing:"$1",get children(){return[a(ee,{href:"https://github.com/OpenListTeam/OpenList",external:!0,get children(){return e("home.footer.powered_by")}}),Kt(),a(et,{as:m,get href(){return re.is_guest(te())?"/@login":"/@manage"},get children(){return e(re.is_guest(te())?"login.login":"home.footer.manage")}})]}})}})},Gt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function Jt(e,r,t){r/=100,t/=100;let n=(n,o=(n+e/60)%6)=>t-t*r*Math.max(Math.min(o,4-o,1),0);return[255*n(5),255*n(3),255*n(1)]}function Yt(e,r,t){t/=100;let n=(r/=100)*Math.min(t,1-t),o=(r,o=(r+e/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[255*o(0),255*o(8),255*o(4)]}const Qt="^\\s*",Xt="\\s*$",Zt="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",en="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",rn="([0-9A-Fa-f])",tn="([0-9A-Fa-f]{2})",nn=new RegExp(`${Qt}hsl\\s*\\(${en},${Zt},${Zt}\\)${Xt}`),on=new RegExp(`${Qt}hsv\\s*\\(${en},${Zt},${Zt}\\)${Xt}`),ln=new RegExp(`${Qt}hsla\\s*\\(${en},${Zt},${Zt},${en}\\)${Xt}`),an=new RegExp(`${Qt}hsva\\s*\\(${en},${Zt},${Zt},${en}\\)${Xt}`),cn=new RegExp(`${Qt}rgb\\s*\\(${en},${en},${en}\\)${Xt}`),sn=new RegExp(`${Qt}rgba\\s*\\(${en},${en},${en},${en}\\)${Xt}`),un=new RegExp(`${Qt}#${rn}${rn}${rn}${Xt}`),dn=new RegExp(`${Qt}#${tn}${tn}${tn}${Xt}`),gn=new RegExp(`${Qt}#${rn}${rn}${rn}${rn}${Xt}`),hn=new RegExp(`${Qt}#${tn}${tn}${tn}${tn}${Xt}`);function pn(e){return parseInt(e,16)}function mn(e){try{let r;if(r=dn.exec(e))return[pn(r[1]),pn(r[2]),pn(r[3]),1];if(r=cn.exec(e))return[yn(r[1]),yn(r[5]),yn(r[9]),1];if(r=sn.exec(e))return[yn(r[1]),yn(r[5]),yn(r[9]),wn(r[13])];if(r=un.exec(e))return[pn(r[1]+r[1]),pn(r[2]+r[2]),pn(r[3]+r[3]),1];if(r=hn.exec(e))return[pn(r[1]),pn(r[2]),pn(r[3]),wn(pn(r[4])/255)];if(r=gn.exec(e))return[pn(r[1]+r[1]),pn(r[2]+r[2]),pn(r[3]+r[3]),wn(pn(r[4]+r[4])/255)];if(e in Gt)return mn(Gt[e]);if(nn.test(e)||ln.test(e)){const[r,t,n,o]=function(e){try{let r;if(r=ln.exec(e))return[_n(r[1]),Fn(r[5]),Fn(r[9]),wn(r[13])];if(r=nn.exec(e))return[_n(r[1]),Fn(r[5]),Fn(r[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${e}.`)}catch(r){throw r}}(e);return[...Yt(r,t,n),o]}if(on.test(e)||an.test(e)){const[r,t,n,o]=function(e){try{let r;if(r=an.exec(e))return[_n(r[1]),Fn(r[5]),Fn(r[9]),wn(r[13])];if(r=on.exec(e))return[_n(r[1]),Fn(r[5]),Fn(r[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${e}.`)}catch(r){throw r}}(e);return[...Jt(r,t,n),o]}throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(r){throw r}}function fn(e,r,t,n){return`rgba(${yn(e)}, ${yn(r)}, ${yn(t)}, ${o=n,o>1?1:o<0?0:o})`;var o}function bn(e,r){const[t,n,o,l=1]=Array.isArray(e)?e:mn(e);return"number"==typeof r.alpha?fn(t,n,o,r.alpha):fn(t,n,o,l)}function wn(e){const r=Math.round(100*Number(e))/100;return r>1?1:r<0?0:r}function _n(e){const r=Math.round(Number(e));return r>=360||r<0?0:r}function yn(e){const r=Math.round(Number(e));return r>255?255:r<0?0:r}function Fn(e){const r=Math.round(Number(e));return r>100?100:r<0?0:r}const kn={list:bt,grid:ae,image:ie},$n=()=>{const e=d();return a(he,{get children(){return[a(ne,{as:oe,get color(){return ce()},get bgColor(){return bn(ce(),{alpha:.15})},get _hover(){return{bgColor:bn(ce(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return a(C,{get children(){return[a(x,{get when(){return"list"===le()},get children(){return a(bt,{})}}),a(x,{get when(){return"grid"===le()},get children(){return a(ae,{})}}),a(x,{get when(){return"image"===le()},get children(){return a(ie,{})}})]}})}}),a(se,{get children(){return a(c,{get each(){return Object.entries(kn)},children:r=>a(ue,{get icon(){return a(ge,{get component(){return r[1]}})},onSelect:()=>{de(r[0])},get children(){return e(`home.layouts.${r[0]}`)}})})}})]}})},vn=()=>{const e=u("logo").split("\n"),r=y(e[0],e.pop()),t=n(()=>"sticky"===l.position_of_header_navbar?{position:"sticky",zIndex:"$sticky",top:0}:{position:void 0,zIndex:void 0,top:void 0});return a(Fe,i(t,{bgColor:"$background",class:"header",w:"$full",get children(){return a(Nt,{get children(){return a(X,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[a(X,{class:"header-left",h:"44px",get children(){return a(pe,{get src(){return r()},h:"$full",w:"auto",get fallback(){return a(me,{})}})}}),a(X,{class:"header-right",spacing:"$2",get children(){return a(b,{get when(){return E.state===A.Folder},get children(){return[a(b,{get when(){return"none"!==u("search_index")},get children(){return a(X,{bg:"$neutral4",w:"$32",p:"$1",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",get color(){return ce()},get bgColor(){return bn(ce(),{alpha:.15})},get _hover(){return{bgColor:bn(ce(),{alpha:.2})}},onClick:()=>{ye.emit("tool","search")},get children(){return[a(fe,{as:be}),a(X,{get children(){return[I(()=>a(_e,we?{children:"Cmd"}:{children:"Ctrl"})),a(_e,{children:"K"})]}})]}})}}),a($n,{})]}})}})]}})}})}}))},Cn=e("o",{rename:{icon:ut,color:"$accent9"},copy:{icon:st,color:"$success9"},move:{icon:ct,color:"$warning9"},delete:{icon:$e,color:"$danger9"},decompress:{icon:it,color:"$neutral9"},copy_link:{icon:at,color:"$info9"},mkdir:{icon:tt,p:!0},recursive_move:{icon:Ft,p:!0},remove_empty_directory:{icon:nt,p:!0},batch_rename:{icon:ot,p:!0},new_file:{icon:rt,p:!0},cancel_select:{icon:yt},download:{icon:ke,color:"$primary9"},share:{icon:lt,color:"$primary9"}}),xn=e=>{const r=Ce.findIndex(r=>r===e.name);if(-1!==r&&!re.can(te(),r))return null;const t=d();return a(ve,{placement:"top",withArrow:!0,get label(){return t(`home.toolbar.${e.name}`)},get children(){return a(fe,i({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:f()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){return Cn[e.name]?.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return Cn[e.name]?.icon},get color(){return Cn[e.name]?.color}},e))}})},Sn=e=>{const r=d();return a(ve,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return r(`home.toolbar.${e.tips}`)},get children(){return a(fe,i({get color(){return ce()},get _hover(){return{bgColor:ce(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},En=()=>{const e=d(),{copySelectedPreviewPage:r,copySelectedRawLink:t}=xe(),n="neutral";return a(he,{placement:"top",offset:10,get children(){return[a(ne,{as:xn,name:"copy_link"}),a(se,{get children(){return[a(ue,{colorScheme:n,onSelect:()=>{r()},get children(){return e("home.toolbar.preview_page")}}),a(ue,{colorScheme:n,onSelect:()=>{t()},get children(){return e("home.toolbar.down_link")}}),a(ue,{colorScheme:n,onSelect:()=>{t(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})};var Dn=Z("<p>");const An=()=>{const e=d(),r="neutral",{batchDownloadSelected:t,sendToAria2:n,playlistDownloadSelected:o}=kt();return a(he,{placement:"top",offset:10,get children(){return[a(ne,{as:xn,name:"download"}),a(se,{get children(){return[a(ue,{colorScheme:r,onSelect:t,get children(){return e("home.toolbar.batch_download")}}),a(b,{get when(){return re.is_admin(te())||U("package_download")},get children(){return[a(ue,{colorScheme:r,onSelect:()=>{ye.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}}),a(ue,{colorScheme:r,onSelect:o,get children(){return e("home.toolbar.playlist_download")}})]}}),a(ue,{colorScheme:r,onSelect:n,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},On=O(()=>T(()=>r.import("./PackageDownload-legacy-BdqmKTPp.js"),void 0)),Bn=()=>{const e=d(),r=e=>{if("package_download"===e){if(!U("package_download"))return;n()}};ye.on("tool",r),Q(()=>{ye.off("tool",r)});const{isOpen:t,onOpen:n,onClose:o}=Se(),[l,i]=$("pre_tips");return a(Ie,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return e("home.toolbar.package_download")}}),a(v,{get fallback(){return a(D,{})},get children(){return a(b,{get when(){return"pre_tips"===l()},get fallback(){return a(On,{onClose:o})},get children(){return[a(Oe,{get children(){var r=Dn();return Be(r,()=>e("home.toolbar.pre_package_download-tips")),r}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),a(Me,{colorScheme:"info",onClick:()=>{i("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})},zn=()=>{const e=n(()=>[A.Folder,A.FetchingMore].includes(E.state)&&je()&&Te()),{isShare:r}=t();return a(Le,{exitBeforeEnter:!0,get children(){return a(b,{get when(){return e()},get children(){return a(N,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return Y.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return a(X,{p:"$2",get bgColor(){return y("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[a(b,{get when(){return!r()},get children(){return a(c,{each:["rename","move","copy","delete","share","decompress"],children:e=>a(xn,{name:e,onClick:()=>{ye.emit("tool",e)}})})}}),a(En,{}),a(An,{}),a(xn,{name:"cancel_select",onClick:()=>{Re(!1)}})]}})}})}})}})},Mn=()=>{const{isOpen:e,onToggle:r}=Se({defaultIsOpen:"true"===localStorage.getItem("more-open"),onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),l=n(()=>e()?"$4":"$5"),i=n(()=>E.state===A.Folder),{refresh:c}=o(),{isShare:s}=t();return a(N,{class:"left-toolbar-box",pos:"fixed",get right(){return l()},get bottom(){return l()},get children(){return a(b,{get when(){return e()},get fallback(){return a(Sn,{class:"toolbar-toggle",as:ht,onClick:()=>{r()}})},get children(){return a(j,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return Y.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[a(j,{spacing:"$1",class:"left-toolbar-in",get children(){return[a(Sn,{as:At,tips:"refresh",onClick:()=>{c(void 0,!0)}}),a(b,{get when(){return I(()=>!(!i()||s()))()&&(qe("write")||E.write)},get children(){return[a(Sn,{get as(){return Cn.new_file.icon},tips:"new_file",onClick:()=>{ye.emit("tool","new_file")}}),a(Sn,{get as(){return Cn.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{ye.emit("tool","mkdir")}}),a(Sn,{get as(){return Cn.recursive_move.icon},tips:"recursive_move",onClick:()=>{ye.emit("tool","recursiveMove")}}),a(Sn,{get as(){return Cn.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{ye.emit("tool","removeEmptyDirectory")}}),a(Sn,{get as(){return Cn.batch_rename.icon},tips:"batch_rename",onClick:()=>{Re(!0),ye.emit("tool","batchRename")}}),a(Sn,{as:Pe,tips:"upload",onClick:()=>{ye.emit("tool","upload")}})]}}),a(b,{get when(){return I(()=>!(!i()||s()))()&&qe("offline_download")},get children(){return a(Sn,{as:Ne,pl:"0",tips:"offline_download",onClick:()=>{ye.emit("tool","offline_download")}})}}),a(b,{get when(){return We()},get children(){return a(Sn,{as:dt,tips:"toggle_markdown_toc",onClick:()=>{He(e=>!e)}})}}),a(Sn,{tips:"toggle_checkbox",as:gt,onClick:Ue}),a(Sn,{as:Ke,tips:"local_settings",onClick:()=>{ye.emit("tool","local_settings")}})]}}),a(Sn,{tips:"more",as:ht,onClick:r})]}})}})}})},In=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(Ge),{pathname:s}=t(),{refresh:u}=o(),[g,h]=$(!1),p=e=>{"copy"===e&&(n(),h(!1))};return ye.on("tool",p),Q(()=>{ye.off("tool",p)}),a(ft,{get header(){return e("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:l,get loading(){return i()},get footerSlot(){return a(Qe,{mr:"auto",get checked(){return g()},onChange:()=>{h(!g())},get children(){return e("home.conflict_policy.overwrite_existing")}})},onSubmit:async e=>{const r=await c(s(),e,Je().map(e=>e.name),g());Ye(r,()=>{u(),l()})}})},jn=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(Xe),{pathname:s}=t(),{refresh:u}=o(),[g,h]=$(!1),p=e=>{"move"===e&&(n(),h(!1))};return ye.on("tool",p),Q(()=>{ye.off("tool",p)}),a(ft,{get header(){return e("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:l,get loading(){return i()},get footerSlot(){return a(Qe,{mr:"auto",get checked(){return g()},onChange:()=>{h(!g())},get children(){return e("home.conflict_policy.overwrite_existing")}})},onSubmit:async e=>{const r=await c(s(),e,Je().map(e=>e.name),g());Ye(r,()=>{u(),l()})}})};var Tn=Z("<p>");const Rn=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(Ze),{refresh:s}=o(),{pathname:u}=t(),g=e=>{"delete"===e&&n()};return ye.on("tool",g),Q(()=>{ye.off("tool",g)}),a(Ie,{blockScrollOnMount:!1,get opened(){return r()},onClose:l,size:{"@initial":"xs","@md":"md"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return e("home.toolbar.delete")}}),a(Oe,{get children(){var r=Tn();return Be(r,()=>e("home.toolbar.delete-tips")),r}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:l,colorScheme:"neutral",get children(){return e("global.cancel")}}),a(Me,{colorScheme:"danger",get loading(){return i()},onClick:async()=>{const e=await c(u(),Je().map(e=>e.name));Ye(e,()=>{s(),l()})},get children(){return e("global.confirm")}})]}})]}})]}})},Ln=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(er),{pathname:s}=t(),{refresh:u}=o(),[g,h]=$(!1),p=e=>{if("rename"===e){if(!tr())return void ye.emit("tool","batchRename");n(),h(!1)}};return ye.on("tool",p),Q(()=>{ye.off("tool",p)}),a(b,{get when(){return r()},get children(){return a($t,{title:"home.toolbar.input_new_name",get footerSlot(){return a(Qe,{mr:"auto",get checked(){return g()},onChange:()=>{h(!g())},get children(){return e("home.conflict_policy.overwrite_existing")}})},get isRenamingFile(){return!Je()[0].is_dir},get opened(){return r()},onClose:l,get defaultValue(){return Je()[0]?.name??""},get loading(){return i()},onSubmit:async e=>{const r=await c(rr(s(),Je()[0].name),e,g());Ye(r,()=>{u(),l()})}})}})},Pn=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(nr),{refresh:s}=o(),{pathname:u}=t(),[g,h]=$(!1),p=e=>{"new_file"===e&&(n(),h(!1))};return ye.on("tool",p),Q(()=>{ye.off("tool",p)}),a($t,{title:"home.toolbar.input_filename",get footerSlot(){return a(Qe,{mr:"auto",get checked(){return g()},onChange:()=>{h(!g())},get children(){return e("home.conflict_policy.overwrite_existing")}})},get opened(){return r()},onClose:l,get loading(){return i()},onSubmit:async e=>{const r=await c(rr(u(),e),z(),g());Ye(r,()=>{s(),l()})}})},qn=()=>{const{isOpen:e,onOpen:r,onClose:n}=Se(),[l,i]=Ve(or),{pathname:c}=t(),{refresh:s}=o(),u=e=>{"mkdir"===e&&r()};return ye.on("tool",u),Q(()=>{ye.off("tool",u)}),a($t,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:n,get loading(){return l()},onSubmit:async e=>{const r=await i(rr(c(),e));Ye(r,()=>{s(),n()})}})};var Nn=Z("<p>");const Hn=()=>{const{isOpen:e,onOpen:r,onClose:n}=Se(),{isOpen:l,onOpen:i,onClose:c}=Se(),[s,u]=Ve(lr),{pathname:g}=t(),{refresh:h}=o(),[p,m]=$("cancel"),f=e=>{"recursiveMove"===e&&(r(),m("cancel"))};ye.on("tool",f),Q(()=>{ye.off("tool",f)});const b=d();return[a(Ie,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>n(),size:{"@initial":"xs","@md":"md"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return b("home.toolbar.recursive_move")}}),a(Oe,{get children(){var e=Nn();return Be(e,()=>b("home.toolbar.recursive_move_directory-tips")),e}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:()=>n(),colorScheme:"neutral",get children(){return b("global.cancel")}}),a(Me,{onClick:()=>{n(),i()},colorScheme:"danger",get children(){return b("global.confirm")}})]}})]}})]}}),a(ft,{get header(){return b("home.toolbar.choose_dst_folder")},get opened(){return l()},onClose:c,get loading(){return s()},get footerSlot(){return a(X,{mr:"auto",flex:"0.8",spacing:"$1",get children(){return a(ar,{get value(){return p()},onChange:e=>m(e),get children(){return[a(ir,{value:"cancel",get children(){return b("home.conflict_policy.cancel_if_exists")}}),a(ir,{value:"overwrite",get children(){return b("home.conflict_policy.overwrite_existing")}}),a(ir,{value:"skip",get children(){return b("home.conflict_policy.skip_existing")}})]}})}})},onSubmit:async e=>{const r=await u(g(),e,p());Ye(r,()=>{h(),c()})}})]};var Wn=Z("<p>");const Un=()=>{const{isOpen:e,onOpen:r,onClose:n}=Se(),{pathname:l}=t(),[i,c]=Ve(cr),{refresh:s}=o(),u=e=>{"removeEmptyDirectory"===e&&r()};ye.on("tool",u),Q(()=>{ye.off("tool",u)});const g=d();return a(Ie,{blockScrollOnMount:!1,get opened(){return e()},onClose:n,size:{"@initial":"xs","@md":"md"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return g("home.toolbar.remove_empty_directory")}}),a(Oe,{get children(){var e=Wn();return Be(e,()=>g("home.toolbar.remove_empty_directory-tips")),e}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:n,colorScheme:"neutral",get children(){return g("global.cancel")}}),a(Me,{colorScheme:"danger",get loading(){return i()},onClick:async()=>{const e=await c(l());Ye(e,()=>{s(),n()})},get children(){return g("global.confirm")}})]}})]}})]}})};var Kn=Z("<p>");const Vn=()=>{const{isOpen:e,onOpen:r,onClose:n}=Se(),{isOpen:l,onOpen:s,onClose:u}=Se(),[g,h]=Ve(sr),{pathname:p}=t(),{refresh:m}=o(),[f,w]=$("1"),[_,y]=$(""),[F,k]=$(""),[v,C]=$("string"),[x,S]=$([]),E=d(),D=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),A=e=>{"batchRename"===e&&s()};ye.on("tool",A),Q(()=>{ye.off("tool",A)});const O=()=>{if(!_()||!F())return void hr.warning(E("global.empty_input"));const e=new RegExp(_(),"g");let t;if("1"===f())t=Je().filter(e=>e.name.match(_())).map(r=>{const t=new Date(r.created),n=new Date(r.modified);return{src_name:r.name,new_name:r.name.replace(e,F()).replace("{created_year}",t.getFullYear().toString().padStart(4,"0")).replace("{created_month}",(t.getMonth()+1).toString().padStart(2,"0")).replace("{created_date}",t.getDate().toString().padStart(2,"0")).replace("{created_hour}",t.getHours().toString().padStart(2,"0")).replace("{created_minute}",t.getMinutes().toString().padStart(2,"0")).replace("{created_second}",t.getSeconds().toString().padStart(2,"0")).replace("{modified_year}",n.getFullYear().toString().padStart(4,"0")).replace("{modified_month}",(n.getMonth()+1).toString().padStart(2,"0")).replace("{modified_date}",n.getDate().toString().padStart(2,"0")).replace("{modified_hour}",n.getHours().toString().padStart(2,"0")).replace("{modified_minute}",n.getMinutes().toString().padStart(2,"0")).replace("{modified_second}",n.getSeconds().toString().padStart(2,"0"))}});else{let e=F();t=Je().map(r=>{let t="";const n=r.name.lastIndexOf(".");-1!==n&&(t=r.name.substring(n+1));const o={src_name:r.name,new_name:_()+e+"."+t};return e=(parseInt(e)+1).toString().padStart(e.length,"0"),o})}S(t),r(),u()};return[a(Ie,{blockScrollOnMount:!1,get opened(){return l()},onClose:u,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return E("home.toolbar.batch_rename")}}),a(Oe,{get children(){return[a(ur,{defaultValue:"1",onChange:e=>{w(e),"1"===e?C("string"):"2"===e&&C("number")},get children(){return a(X,{spacing:"$4",get children(){return[a(dr,{value:"1",get children(){return E("home.toolbar.regex_rename")}}),a(dr,{value:"2",get children(){return E("home.toolbar.sequential_renaming")}})]}})}}),a(j,{spacing:"$2",get children(){return[(e=Kn(),e.style.setProperty("margin","10px 0"),Be(e,a(b,{get when(){return"1"===f()},get children(){return E("home.toolbar.regular_rename")}}),null),Be(e,a(b,{get when(){return"2"===f()},get children(){return E("home.toolbar.sequential_renaming_desc")}}),null),e),a(gr,{id:"modal-input1",type:"string",get value(){return _()},onInput:e=>{y(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&O()}}),a(gr,{id:"modal-input2",get type(){return v()},get value(){return F()},onInput:e=>{k(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&O()}})];var e}})]}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:()=>{w("1"),C("string"),u()},colorScheme:"neutral",get children(){return E("global.cancel")}}),a(Me,{onClick:()=>O(),get disabled(){return!_()||!F()},get children(){return E("global.ok")}})]}})]}})]}}),a(Ie,{size:"xl",get opened(){return e()},onClose:n,get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return E("home.toolbar.regex_rename_preview")}}),a(Oe,{get children(){return a(j,{class:"list",w:"$full",spacing:"$1",get children(){return[a(X,{class:"title",w:"$full",p:"$2",get children(){return[a(M,i({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return E("home.toolbar.regex_rename_preview_old_name")}})),a(M,i({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return E("home.toolbar.regex_rename_preview_new_name")}}))]}}),a(c,{get each(){return x()},children:(e,r)=>a(vt,{obj:e,get index(){return r()}})})]}})}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{onClick:()=>{S([]),w("1"),C("string"),n(),u()},colorScheme:"neutral",get children(){return E("global.cancel")}}),a(Me,{onClick:()=>{S([]),n(),s()},colorScheme:"neutral",get children(){return E("global.back")}}),a(Me,{get loading(){return g()},onClick:async()=>{const e=await h(p(),x());Ye(e,()=>{S([]),y(""),k(""),w("1"),C("string"),m(),u(),n()})},get disabled(){return 0==x().length},get children(){return E("global.ok")}})]}})]}})]}})]},Gn=["upload_download_stream","delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"];function Jn(e){return xt.enc.Utf8.stringify(xt.lib.WordArray.create(e))}function Yn(e){const r=Ct.decode(e),t=Ct.encode(r.info),n=xt.SHA1(xt.lib.WordArray.create(t)).toString();let o={};return Number.isInteger(r?.info?.length)&&(o.xl=r.info.length),r.info.name&&(o.dn=Jn(r.info.name)),r.announce&&(o.tr=Jn(r.announce)),`magnet:?xt=urn:btih:${n}&${new URLSearchParams(o).toString()}`}const Qn=()=>{const e=d(),[r,n]=$([]),[o,l]=Ve(()=>pr.get("/public/offline_download_tools")),[i,c]=$(""),[s,u]=$("upload_download_stream");J(async()=>{const e=await l();br(e,e=>{n(e),c(e[0])})});const{isOpen:g,onOpen:h,onClose:p}=Se(),[m,f]=Ve(mr),{pathname:b}=t(),w=e=>{"offline_download"===e&&h()};return ye.on("tool",w),Q(()=>{ye.off("tool",w)}),a($t,{title:"home.toolbar.offline_download",type:"text",get opened(){return g()},onClose:p,get loading(){return o()||m()},get tips(){return e("home.toolbar.offline_download-tips")},onDrop:async(e,r)=>{if(e.preventDefault(),e.dataTransfer?.files.length){const n=[];for(const r of e.dataTransfer.files)if(r.name.toLowerCase().endsWith(".torrent"))try{const e=await r.arrayBuffer();n.push(Yn(new Uint8Array(e)))}catch(t){console.error("Failed to convert torrent file to magnet link:",t)}n.length&&r(n.join("\n"))}},get topSlot(){return a(N,{mb:"$2",get children(){return a(fr,{get value(){return i()},onChange:e=>{"SimpleHttp"!==e&&"upload_download_stream"===s()&&u("delete_on_upload_succeed"),c(e)},get options(){return r().map(e=>({value:e,label:e}))}})}})},get bottomSlot(){return a(N,{mb:"$2",get children(){return a(fr,{get value(){return s()},onChange:e=>u(e),get options(){return Gn.filter(e=>"upload_download_stream"!=e||"SimpleHttp"===i()).map(r=>({value:r,label:e(`home.toolbar.delete_policy.${r}`)}))}})}})},onSubmit:async e=>{const r=await f(b(),e.split("\n"),i(),s());Ye(r,()=>{p()})}})},Xn=e=>{const r=d(),t=r=>{r===e.name&&o()};ye.on("tool",t),Q(()=>{ye.off("tool",t)});const{isOpen:n,onOpen:o,onClose:l}=Se();return a(Ie,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return n()},onClose:l,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(wr,{}),a(Ae,{get children(){return r(e.title)}}),a(Oe,{get children(){return a(b,{get when(){return n()},get children(){return a(v,{get fallback(){return a(D,{})},get children(){return e.children}})}})}})]}})]}})};function Zn(e){const r=d();return a(qr,{get children(){return[a(Er,{get children(){return r(`home.local_settings.${e.key}`)}}),a(C,{get fallback(){return a(gr,{get value(){return l[e.key]},onInput:r=>{Ar(e.key,r.currentTarget.value)}})},get children(){return[a(x,{get when(){return"select"===e.type},get children(){return a(Dr,{get id(){return e.key},get defaultValue(){return l[e.key]},onChange:r=>Ar(e.key,r),get children(){return[a(Or,{get children(){return[a(Br,{get children(){return r("global.choose")}}),a(zr,{}),a(Mr,{})]}}),a(Ir,{get children(){return a(jr,{get children(){return a(c,{get each(){return e.options},children:t=>a(Tr,{value:t,get children(){return[a(Rr,{get children(){return r(`home.local_settings.${e.key}_options.${t}`)}}),a(Lr,{})]}})})}})}})]}})}}),a(x,{get when(){return"boolean"===e.type},get children(){return a(Pr,{get defaultChecked(){return"true"===l[e.key]},onChange:r=>{Ar(e.key,r.currentTarget.checked.toString())}})}}),a(x,{get when(){return"number"===e.type},get children(){return a(X,{get children(){return[a(oe,{"aria-label":"decrease",get icon(){return a(wt,{})},onClick:()=>{Ar(e.key,Math.max(1,parseInt(l[e.key])-1).toString())}}),a(gr,{type:"number",get value(){return l[e.key]},onInput:r=>{Ar(e.key,r.currentTarget.value)},style:{"-moz-appearance":"textfield","::-webkit-inner-spin-button":{display:"none"},"::-webkit-outer-spin-button":{display:"none"}},class:"hide-spin"}),a(oe,{"aria-label":"increase",get icon(){return a(_t,{})},onClick:()=>{Ar(e.key,(parseInt(l[e.key])+1).toString())}})]}})}})]}})]}})}const eo=()=>{const{isOpen:e,onOpen:r,onClose:t}=Se(),n=d(),o=e=>{"local_settings"===e&&r()};return ye.on("tool",o),Q(()=>{ye.off("tool",o)}),a(Sr,{get opened(){return e()},placement:"right",onClose:t,get children(){return[a(_r,{}),a(yr,{get children(){return[a(Fr,{}),a(kr,{color:"$info9",get children(){return n("home.toolbar.local_settings")}}),a($r,{get children(){return[a(j,{spacing:"$2",get children(){return a(c,{get each(){return vr.filter(e=>!e.hidden)},children:e=>a(Zn,e)})}}),a(Fe,{mt:"$4",get children(){return a(X,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[a(Cr,{}),a(xr,{})]}})}})]}})]}})]}})};var ro=Z("<div>");const to=()=>{const e=d(),{isOpen:r,onOpen:n,onClose:l}=Se(),[i,c]=Ve(Nr),{pathname:s}=t(),{refresh:u}=o(),[g,h]=$(""),[p,m]=$(""),[f,b]=$(!0),[w,_]=$(!1),y=e=>{"decompress"===e&&(Hr(()=>{b(!0),h("/"),m("")}),n())},F=e=>{const{inner:r,pass:t}=JSON.parse(e);Hr(()=>{b(!1),h(r),m(t)}),n()};return ye.on("tool",y),ye.on("extract",F),Q(()=>{ye.off("tool",y),ye.off("extract",F)}),a(ft,{get header(){return"/"===g()?e("home.toolbar.choose_dst_folder"):e("home.toolbar.archive.extract_header",{path:g()})},get opened(){return r()},onClose:l,get loading(){return i()},onSubmit:async e=>{const{path:r,name:t}=(()=>{let e=s();if("/"===g())return{path:e,name:Je().map(e=>e.name)};{let r=e.lastIndexOf("/");return{path:e.slice(0,r),name:[e.slice(r+1)]}}})(),n=await c(r,e,t,p(),g(),f(),w());Ye(n,()=>{u(),l()})},get children(){return a(j,{spacing:"$1",alignItems:"flex-start",get children(){return[a(X,{width:"100%",spacing:"$1",get children(){return[a(M,{size:"sm",css:{whiteSpace:"nowrap"},get children(){return e("home.toolbar.decompress-pass")}}),a(gr,{get value(){return p()},onInput:e=>m(e.target.value),size:"sm",flexGrow:"1"})]}}),a(Qe,{get checked(){return f()},onChange:e=>b(e.target.checked),get children(){return e("home.toolbar.decompress-cache-full")}}),a(Qe,{get checked(){return w()},onChange:e=>_(e.target.checked),get children(){return e("home.toolbar.decompress-put-into-new")}}),ro()]}})}})},no=()=>{const e=d(),[r,n]=$(""),{pathname:o}=t(),l=e=>{"share"===e&&(Hr(()=>{n(""),p(""),f(!0);const e=Je().map(e=>{const r=o().endsWith("/")||e.name.startsWith("/")?"":"/";return`${te().base_path}${o()}${r}${e.name}`});w({files:e,expires:null,pwd:"",max_accessed:0,order_by:Et.None,order_direction:Dt.None,extract_folder:St.None,remark:"",readme:"",header:""})}),c())};ye.on("tool",l),Q(()=>{ye.off("tool",l)});const{isOpen:i,onOpen:c,onClose:s}=Se(),{copy:g}=Wr(),[h,p]=$(""),[m,f]=$(!0),[b,w]=Ur({}),[_,y]=Ve(()=>pr.post("/share/create",b));return a(Ie,{blockScrollOnMount:!1,get opened(){return i()},onClose:s,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[a(Ee,{}),a(De,{get children(){return[a(Ae,{get children(){return e("home.toolbar.share")}}),a(C,{get fallback(){return[a(Oe,{get children(){return a(Kr,{variant:"filled",get value(){return r()},readonly:!0})}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{colorScheme:"primary",onClick:()=>{g(r())},get children(){return e("shares.copy_msg")}}),a(Me,{colorScheme:"info",onClick:s,get children(){return e("global.confirm")}})]}})]},get children(){return a(x,{get when(){return""===r()},get children(){return[a(Oe,{get children(){return a(j,{spacing:"$1",alignItems:"flex-start",get children(){return[a(M,{size:"sm",get children(){return e("shares.remark")}}),a(Kr,{size:"sm",get value(){return b.remark},onInput:e=>{w("remark",e.currentTarget.value)}}),a(M,{size:"sm",get children(){return e("shares.extract_folder")}}),a(Dr,{size:"sm",get value(){return b.extract_folder},onChange:e=>{w("extract_folder",e)},get children(){return a(Vr,{get options(){return[{key:St.Front,label:e("shares.extract_folders.front")},{key:St.Back,label:e("shares.extract_folders.back")}]}})}}),a(M,{size:"sm",get children(){return e("shares.order_by")}}),a(Dr,{size:"sm",get value(){return b.order_by},onChange:e=>{w("order_by",e)},get children(){return a(Vr,{get options(){return[{key:Et.Name,label:e("shares.order_bys.name")},{key:Et.Size,label:e("shares.order_bys.size")},{key:Et.Modified,label:e("shares.order_bys.modified")}]}})}}),a(M,{size:"sm",get children(){return e("shares.order_direction")}}),a(Dr,{size:"sm",get value(){return b.order_direction},onChange:e=>{w("order_direction",e)},get children(){return a(Vr,{get options(){return[{key:Dt.Asc,label:e("shares.order_directions.asc")},{key:Dt.Desc,label:e("shares.order_directions.desc")}]}})}}),a(M,{size:"sm",get children(){return e("shares.pwd")}}),a(X,{spacing:"$1",w:"$full",get children(){return[a(gr,{size:"sm",get value(){return b.pwd},onInput:e=>{w("pwd",e.currentTarget.value)}}),a(oe,{colorScheme:"neutral",size:"sm","aria-label":"random",get icon(){return a(pt,{})},onClick:()=>{w("pwd",Ot())}})]}}),a(M,{size:"sm",get children(){return e("shares.max_accessed")}}),a(gr,{type:"number",size:"sm",get value(){return b.max_accessed},onInput:e=>{w("max_accessed",parseInt(e.currentTarget.value))}}),a(M,{size:"sm",get children(){return e("shares.expires")}}),a(gr,{size:"sm",get invalid(){return!m()},get value(){return h()},placeholder:"yyyy-MM-dd HH:mm:ss or +1w1d1H1m1s1ms",onInput:e=>{if(p(e.currentTarget.value),""===e.currentTarget.value)return f(!0),void w("expires",null);const r=Bt(e.currentTarget.value);isNaN(r.getTime())?f(!1):(f(!0),w("expires",r.toISOString()))}}),a(M,{size:"sm",get children(){return e("shares.readme")}}),a(Kr,{size:"sm",get value(){return b.readme},onInput:e=>{w("readme",e.currentTarget.value)}}),a(M,{size:"sm",get children(){return e("shares.header")}}),a(Kr,{size:"sm",get value(){return b.header},onInput:e=>{w("header",e.currentTarget.value)}})]}})}}),a(ze,{display:"flex",gap:"$2",get children(){return[a(Me,{colorScheme:"neutral",onClick:s,get children(){return e("global.cancel")}}),a(Me,{colorScheme:"info",get disabled(){return!m()},get loading(){return _()},onClick:async()=>{const e=await y();br(e,e=>{const r=zt(e,{site_title:u("site_title")}),t=Gr(u("share_summary_content"),r);n(t)})},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})},oo=O(()=>T(()=>r.import("./Upload-legacy-NqQwUwlD.js"),void 0)),lo=()=>[a(In,{}),a(jn,{}),a(Ln,{}),a(Rn,{}),a(to,{}),a(Pn,{}),a(qn,{}),a(no,{}),a(Hn,{}),a(Un,{}),a(Vn,{}),a(Qn,{}),a(Bn,{}),a(Xn,{name:"upload",title:"home.toolbar.upload",get children(){return a(oo,{})}}),a(eo,{})],ao=()=>a(Yr,{get children(){return[a(Mn,{}),a(zn,{}),a(lo,{}),a(Jr,{})]}}),io=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{Xr(u("site_title"));const e=u("announcement");return e&&hr.render(a(W,{children:e})),[a(vn,{}),a(ao,{}),a(Ut,{}),a(Vt,{})]}},Symbol.toStringTag,{value:"Module"}));e("L",io)}}});
