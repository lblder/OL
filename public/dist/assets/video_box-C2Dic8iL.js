import{u as d,a0 as g,P as n,K as f,dE as y,g as S,o as t,W as w,ac as $,bk as b,bI as x,y as v,bU as A,F as _,aC as O,ae as k,as as I,cq as P,ai as C,au as M,dF as j,X as L}from"./index-CsB5zT4W.js";import{O as T}from"./icon-BfaWsS4s.js";import{A as B}from"./artplayer-C5-Hz-Y-.js";B.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2,3,4];const u=[{icon:"iina",name:"IINA",scheme:"iina://weblink?url=$edurl",platforms:["MacOS"]},{icon:"potplayer",name:"PotPlayer",scheme:"potplayer://$durl",platforms:["Windows"]},{icon:"vlc",name:"VLC",scheme:"vlc://$durl",platforms:["Windows","MacOS","Linux","Android","iOS"]},{icon:"nplayer",name:"nPlayer",scheme:"nplayer-$durl",platforms:["Android","iOS"]},{icon:"omniplayer",name:"OmniPlayer",scheme:"omniplayer://weblink?url=$durl",platforms:["MacOS"]},{icon:"figplayer",name:"Fig Player",scheme:"figplayer://weblink?url=$durl",platforms:["MacOS"]},{icon:"infuse",name:"Infuse",scheme:"infuse://x-callback-url/play?url=$durl",platforms:["MacOS","iOS"]},{icon:"fileball",name:"Fileball",scheme:"filebox://play?url=$durl",platforms:["MacOS","iOS"]},{icon:"mxplayer",name:"MX Player",scheme:"intent:$durl#Intent;package=com.mxtech.videoplayer.ad;S.title=$name;end",platforms:["Android"]},{icon:"mxplayer-pro",name:"MX Player Pro",scheme:"intent:$durl#Intent;package=com.mxtech.videoplayer.pro;S.title=$name;end",platforms:["Android"]},{icon:"iPlay",name:"iPlay",scheme:"iplay://play/any?type=url&url=$bdurl",platforms:["iOS"]},{icon:"mpv",name:"mpv",scheme:"mpv://$edurl",platforms:["Windows","MacOS","Linux","Android"]}],W=a=>{const{$container:o,$video:l}=a.template,r=o.parentElement;a.on("ready",()=>{const s="1.75rem";r.style.maxHeight="calc(100vh - ".concat(r.offsetTop,"px - ").concat(s,")"),r.style.minHeight="320px",a.autoHeight()}),a.on("resize",()=>{a.autoHeight()}),a.on("error",()=>{l.style.height||(o.style.height="60vh",l.style.height="100%")})},E=a=>{const{replace:o}=d(),{currentObjLink:l}=g();let r=n.objs.filter(e=>e.type===T.VIDEO);r.length===0&&(r=[n.obj]);const s=v();let i=localStorage.getItem("video_auto_next");i||(i="true"),a.onAutoNextChange(i==="true");const[c,p]=f(localStorage.getItem("video_show_all_players")==="true"),m=y(),h=S(()=>c()||m==="Unknown"?u:u.filter(e=>e.platforms.includes(m)));return t(L,{w:"$full",spacing:"$2",get children(){return[w(()=>a.children),t($,{spacing:"$2",w:"$full",get children(){return[t(b,{onChange:e=>{o(e)},get value(){return n.obj.name},get options(){return r.map(e=>({value:e.name}))}}),t(x,{css:{whiteSpace:"nowrap"},defaultChecked:i==="true",onChange:e=>{a.onAutoNextChange(e.currentTarget.checked),localStorage.setItem("video_auto_next",e.currentTarget.checked.toString())},get children(){return s("home.preview.auto_next")}})]}}),t(A,{wrap:"wrap",gap:"$1",justifyContent:"center",alignItems:"center",get children(){return[t(_,{get each(){return h()},children:e=>t(O,{placement:"top",withArrow:!0,get label(){return e.name},get children(){return t(k,{get href(){return P(e.scheme,{raw_url:n.raw_url,name:n.obj.name,d_url:l(!0)})},get children(){return t(I,{m:"0 auto",boxSize:"$8",get src(){return"".concat(window.__dynamic_base__,"/images/").concat(e.icon,".webp")}})}})}})}),t(C,{"aria-label":"Show all players",variant:"ghost",onClick:()=>{const e=!c();p(e),localStorage.setItem("video_show_all_players",e.toString())},get icon(){return t(M,{as:j,boxSize:"$6",color:"accent.500",get transform(){return c()?"rotate(180deg)":"none"},transition:"transform 0.2s"})}})]}})]}})};export{W as A,E as V,u as p};
