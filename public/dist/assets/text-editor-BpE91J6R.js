import{dN as v,o as e,a3 as b,co as y,g as C,u as w,dO as x,K as i,aZ as M,bi as E,J as P,Z as k,S as g,dP as F,P as l,aM as R,y as j,aT as I,X as L,bl as V,bh as Z}from"./index-CsB5zT4W.js";import{c as $,M as B}from"./index-Drwcd8rx.js";function J(t){const{colorMode:n}=y(),d=C(()=>n()==="light"?"vs":"vs-dark"),{pathname:h}=w(),{isString:p,text:o}=x(t.data),[r,f]=i("utf-8"),[m,s]=i(o(r())),c=j(),[S,T]=M(()=>E.put("/fs/put",m(),{headers:{"File-Path":encodeURIComponent(h()),"Content-Type":t.contentType||"text/plain"}}));P(k(r,a=>{s(o(a))}));async function u(){const a=await T();V(a,()=>{Z.success(c("global.save_success"))})}return $(["Control","S"],u),e(L,{w:"$full",alignItems:"start",spacing:"$2",pos:"relative",get children(){return[e(g,{when:!p,get children(){return e(F,{get encoding(){return r()},setEncoding:f,get referenceText(){return t.data}})}}),e(B,{get value(){return o(r())},get theme(){return d()},get path(){return l.obj.name},onChange:a=>{s(a)}}),e(g,{get when(){return I("write")||l.write},get children(){return e(R,{get loading(){return S()},onClick:u,get children(){return c("global.save")}})}})]}})}const O=()=>{const[t]=v(!0);return e(b,{get loading(){return t.loading},get children(){return e(J,{get data(){var n;return(n=t())==null?void 0:n.content},get contentType(){var n;return(n=t())==null?void 0:n.contentType}})}})};export{O as default};
