import{o as t,S as v,bw as A,W as T,y as E,au as I,M as O,N as d,bg as x,bI as N,bO as P,bx as _,bz as Y,bA as B,bB as M,bC as V,bD as z,bE as H,F as G,bF as J,bG as K,bH as U,az as W,cJ as q,bJ as X,u as Z,aZ as m,bi as u,bN as j,cK as F,K as Q,cL as p,q as ee,bl as h,bh as y,ac as te,aM as f,cM as ne,X as ae,cN as re}from"./index-CsB5zT4W.js";import{b as le}from"./useTitle-C7kyrev7.js";import{T as c,R as ce}from"./ResponsiveGrid-Bq1HJ3RA.js";import{b as ge}from"./index-DlLE0hg-.js";var g=(e=>(e[e.PUBLIC=0]="PUBLIC",e[e.PRIVATE=1]="PRIVATE",e[e.READONLY=2]="READONLY",e[e.DEPRECATED=3]="DEPRECATED",e))(g||{});const ie=e=>{const r=E();return t(X,{get w(){var n;return(n=e.w)!=null?n:"100%"},display:"flex",flexDirection:"column",get children(){return[t(v,{get when(){return!e.hideLabel},get children(){return t(A,{get for(){return e.key},display:"flex",alignItems:"center",get children(){return[T(()=>r("settings.".concat(e.key))),t(v,{get when(){return e.flag===g.DEPRECATED},get children(){return t(I,{ml:"$2",as:ge,boxSize:"$5",color:"$danger9",verticalAlign:"middle",cursor:"pointer",onClick:()=>{var n;(n=e.onDelete)==null||n.call(e)}})}})]}})}}),t(O,{get fallback(){return t(W,{get children(){return r("settings_other.unknown_type")}})},get children(){return[t(d,{get when(){return[c.String,c.Number].includes(e.type)},get children(){return t(x,{get type(){return e.type===c.Number?"number":""},get id(){return e.key},get value(){return e.value},onInput:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===g.READONLY}})}}),t(d,{get when(){return e.type===c.Bool},get children(){return t(N,{get id(){return e.key},get checked(){return e.value==="true"},onChange:n=>{var a,s;return(s=e.onChange)==null?void 0:s.call(e,(a=n.currentTarget)!=null&&a.checked?"true":"false")},get readOnly(){return e.flag===g.READONLY}})}}),t(d,{get when(){return e.type===c.Text},get children(){return t(P,{get id(){return e.key},get value(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n.currentTarget.value)},get readOnly(){return e.flag===g.READONLY}})}}),t(d,{get when(){return e.type===c.Select},get children(){return t(_,{get id(){return e.key},get value(){return e.value},onChange:n=>{var a;return(a=e.onChange)==null?void 0:a.call(e,n)},get readOnly(){return e.flag===g.READONLY},get children(){return[t(Y,{get children(){return[t(B,{get children(){return r("global.choose")}}),t(M,{}),t(V,{})]}}),t(z,{get children(){return t(H,{get children(){return t(G,{get each(){var n;return(n=e.options)==null?void 0:n.split(",")},children:n=>t(J,{value:n,get children(){return[t(K,{get children(){return r("settings.".concat(e.key,"s.").concat(n))}}),t(U,{})]}})})}})}})]}})}})]}}),t(q,{get children(){return T(()=>!!e.help)()?r("settings.".concat(e.key,"-tips")):""}})]}})},oe=e=>{const r=E(),{pathname:n}=Z();le("manage.sidemenu.".concat(n().split("/").pop()));const[a,s]=m(()=>u.get("/admin/setting/list?group=".concat(e.group))),[S,o]=j([]),b=async()=>{const l=await s();h(l,o)};b();const[D,L]=m(()=>u.post("/admin/setting/save",F(S))),[C,R]=m(()=>u.post("/admin/setting/default?group=".concat(e.group))),[k,w]=Q(!1);return t(ae,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(ce,{get children(){return t(p,{each:S,children:l=>t(ie,ee(l,{onChange:i=>{o($=>l().key===$.key,"value",i)},onDelete:async()=>{w(!0);const i=await u.post("/admin/setting/delete?key=".concat(l().key));w(!1),h(i,()=>{y.success(r("global.delete_success")),b()})}}))})}}),t(te,{spacing:"$2",get children(){return[t(f,{colorScheme:"accent",onClick:b,get loading(){return a()||k()||C()},get children(){return r("global.refresh")}}),t(f,{get loading(){return D()},onClick:async()=>{const l=await L();h(l,async()=>{y.success(r("global.save_success")),ne(await u.get("/public/settings"),re)})},get children(){return r("global.save")}}),t(f,{colorScheme:"warning",get loading(){return a()||k()||C()},onClick:async()=>{const l=await R();h(l,i=>{y.info(r("manage.load_default_setting_success")),o(i)})},get children(){return r("manage.load_default_setting")}})]}})]}})};export{oe as default};
