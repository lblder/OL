System.register(["./index-legacy-BmFN10UP.js","./useTitle-legacy-qyCEHHxL.js","./DeletePopover-legacy-BlTvlREz.js"],function(e,r){"use strict";var n,t,c,l,s,a,u,i,d,g,o,h,m,b,$,f,p,y,_,w,S,k,v,C,x,j;return{setters:[e=>{n=e.D,t=e.o,c=e.cs,l=e.g,s=e.b9,a=e.bt,u=e.B,i=e.da,d=e.au,g=e.K,o=e.al,h=e.db,m=e.dc,b=e.dd,$=e.R,f=e.de,p=e.df,y=e.dg,_=e.bw,w=e.r,S=e.af,k=e.aW,v=e.aV,C=e.ax},e=>{x=e.b},e=>{j=e.D}],execute:function(){const r=e=>{const r=t();return n(c,{get colorScheme(){return e.yes?"success":"danger"},get children(){return r("global."+(e.yes?"yes":"no"))}})},D=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return n(c,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},z=e=>{const r=t();return n(d,{spacing:"$0_5",get children(){return n($,{each:k,children:(t,c)=>n(v,{get label(){return r(`users.permissions.${t}`)},get children(){return n(o,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,c())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=t();x("manage.sidemenu.users");const{to:c}=l(),[k,v]=s(()=>a.get("/admin/user/list")),[C,B]=u([]),H=async()=>{const e=await v();_(e,e=>B(e.content))};H();const[I,K]=i(e=>a.post(`/admin/user/delete?id=${e}`)),[O,P]=i(e=>a.post(`/admin/user/cancel_2fa?id=${e}`));return n(S,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[n(d,{spacing:"$2",get children(){return[n(g,{colorScheme:"accent",get loading(){return k()},onClick:H,get children(){return e("global.refresh")}}),n(g,{onClick:()=>{c("/@manage/users/add")},get children(){return e("global.add")}})]}}),n(o,{w:"$full",overflowX:"auto",get children(){return n(h,{highlightOnHover:!0,dense:!0,get children(){return[n(m,{get children(){return n(b,{get children(){return[n($,{each:["username","base_path","role","permission","available"],children:r=>n(f,{get children(){return e(`users.${r}`)}})}),n(f,{get children(){return e("global.operations")}})]}})}}),n(p,{get children(){return n($,{get each(){return C()},children:t=>n(b,{get children(){return[n(y,{get children(){return t.username}}),n(y,{get children(){return t.base_path}}),n(y,{get children(){return n(D,{get role(){return t.role}})}}),n(y,{get children(){return n(z,{user:t})}}),n(y,{get children(){return n(r,{get yes(){return!t.disabled}})}}),n(y,{get children(){return n(d,{spacing:"$2",get children(){return[n(g,{onClick:()=>{c(`/@manage/users/edit/${t.id}`)},get children(){return e("global.edit")}}),n(j,{get name(){return t.username},get loading(){return I()===t.id},onClick:async()=>{const r=await K(t.id);_(r,()=>{w.success(e("global.delete_success")),H()})}}),n(g,{colorScheme:"accent",get loading(){return O()===t.id},onClick:async()=>{const r=await P(t.id);_(r,()=>{w.success(e("users.cancel_2fa_success")),H()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
