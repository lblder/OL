System.register(["./index-legacy-VniDFTuT.js","./List-legacy-AsJAMo96.js","./index-legacy-BbIbJMhB.js","./Password-legacy-fMZ8e4Bi.js","./helper-legacy-BLu9VFpy.js","./icon-legacy-DffONu1z.js","./mutex-legacy-C0CPcNO4.js","./style-legacy-BcLYXFbK.js","./viselect-legacy-BLadCZZZ.js","./index-legacy-B-ZTtTkV.js","./index-legacy-CqHab1CM.js"],function(e,r){"use strict";var t,n,l,i,a,c,o,s,d,u,g,h,p,m,w,f,b,y,$,x,j,_,k,v,C,S,z,P,A,M,O,E,I,J,L,B,D,G,K,N,q,F,R,T,U,V,W,X,Z,H,Q,Y,ee;return{setters:[e=>{t=e.u,n=e.aZ,l=e.ec,i=e.ed,a=e.g,c=e.K,o=e.J,s=e.o,d=e.G,u=e.B,g=e.z,h=e.F,p=e.E,m=e.M,w=e.N,f=e.O,b=e.S,y=e.V,$=e.y,x=e.a3,j=e.X,_=e.r,k=e.W,v=e.e1,C=e.bL,S=e.ac,z=e.au,P=e.am,A=e.k,M=e.cl,O=e.cw,E=e.D,I=e.aa,J=e.ee,L=e.bM,B=e.co,D=e.ay,G=e.aD,K=e.af,N=e.ag,q=e._,F=e.aA},e=>{R=e.L,T=e.c},e=>{U=e.T,V=e.f},e=>{W=e.default},e=>{X=e.u},e=>{Z=e.g},e=>{H=e.c},e=>{Q=e.b,Y=e.x,ee=e.w},null,null,null],execute:function(){const r=e=>{window.open(e,"_blank")},re=e=>{const{show:t}=Q({id:2}),{isMouseSupported:n}=X(),l=()=>A.list_item_filename_overflow;return s(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return s(S,{class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:E()}},get cursor(){return n()?"default":"pointer"},"on:click":t=>{e.obj.is_dir?e.jumpCallback():e.url&&r(e.url)},onContextMenu:r=>{t(r,{props:e})},get children(){return[s(S,{class:"name-box",spacing:"$1",get w(){return T[0].w},get children(){return[s(z,{class:"icon",boxSize:"$6",get color(){return P()},get as(){return Z(e.obj)},mr:"$1"}),s(y,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:"multi_line"===l()?"unset":"nowrap","overflow-x":"scrollable"===l()?"auto":"hidden",textOverflow:"ellipsis"===l()?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),s(y,{class:"size",get w(){return T[1].w},get textAlign(){return T[1].textAlign},get children(){return M(e.obj.size)}}),s(y,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return T[2].w},get textAlign(){return T[2].textAlign},get children(){return O(e.obj.modified)}})]}})}})},te={extract:{icon:V,color:"$success9"},copy_link:{icon:U,color:"$info9"},download:{icon:F,color:"$primary9"}},ne=()=>{const{copy:e}=L(),{colorMode:n}=B(),{isShare:l}=t();return s(ee,{id:2,animation:"scale",get theme(){return"dark"!==n()?"light":"dark"},style:"z-index: var(--hope-zIndices-popover)",get children(){return[s(Y,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:e})=>{r(e.url)},get children(){return s(le,{name:"download"})}}),s(Y,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:r})=>{e(r.url)},get children(){return s(le,{name:"copy_link"})}}),s(Y,{hidden:()=>{const e=G.findIndex(e=>"decompress"===e);return!l()&&!K.can(N(),e)},onClick:({props:e})=>{D.emit("extract",JSON.stringify({inner:e.innerPath,pass:e.pass}))},get children(){return s(le,{name:"extract"})}})]}})},le=e=>{const r=$();return s(S,{spacing:"$2",get children(){return[s(z,{get p(){return te[e.name].p?"$1":void 0},get as(){return te[e.name].icon},boxSize:"$7",get color(){return te[e.name].color}}),s(y,{get children(){return r(`home.toolbar.${e.name}`)}})]}})};e("default",()=>{const e=$(),{pathname:r}=t(),[S,z]=n(l),[P,A]=n(i),M=a(()=>S()||P());let O="",E="",I="",L=null;const[B,D]=c(""),[G,K]=c(!1),[N,F]=c(!1),[T,U]=c(""),[V,X]=c([]),[Z,Q]=c(),[Y,ee]=c(!1),[te,le]=c(""),ie=H(),ae=e=>{let r={};return e.forEach(e=>{r[e.name]={...e,children:e.children?ae(e.children):null}}),r},ce=e=>200!==e.code&&(202===e.code?C(()=>{""!==O&&K(!0),F(!0),D("")}):D(e.message),!0),oe=async e=>{if(await ie.acquire(),N()&&""===O)return ie.release(),[];if(""===E){const e=await z(r(),q(),O);if(ce(e))return ie.release(),[];if(null!==e.data.content&&(L=ae(e.data.content)),E=e.data.raw_url,I=e.data.sign,U(e.data.comment),void 0!==e.data.sort){let r;""!==e.data.sort.order_by&&(r=e.data.sort.order_by);let t="desc"===e.data.sort.order_direction,n=e.data.sort.extract_folder;C(()=>{Q(r),ee(t),le(n)})}if(e.data.encrypted&&""===O)return C(()=>{F(!0),D("")}),ie.release(),[]}if(null===L){const e=await A(r(),q(),O,"/");if(ce(e))return ie.release(),[];L=ae(e.data.content)}let t=L;for(let n=0;n<e.length;n++){if(null===t[e[n]].children){const l=await A(r(),q(),O,"/"+e.slice(0,n+1).join("/"));if(ce(l))return ie.release(),[];t[e[n]].children=ae(l.data.content)}t=t[e[n]].children}return C(()=>{F(!1),K(!1),D("")}),ie.release(),Object.values(t)},[se,de]=c([]);o(()=>{oe(V()).then(e=>de(e))});const ue=()=>{oe(V()).then(e=>de(e))};ue();const ge=(e,r)=>{C(()=>{le(""),Q(e),void 0!==r&&ee(r)})};return s(j,{spacing:"$2",w:"$full",get children(){return[s(d,{pl:"$2",pr:"$2",w:"$full",get children(){return[s(u,{get children(){return s(g,{get currentPage(){return 0===V().length},"on:click":()=>X([]),children:"."})}}),s(h,{get each(){return V()},children:(e,r)=>s(u,{get children(){return[s(p,{}),s(g,{get currentPage(){return V().length===r()+1},"on:click":()=>X(V().slice(0,r()+1)),children:e})]}})})]}}),s(m,{get children(){return[s(w,{get when(){return""!==B()},get children(){return s(f,{get msg(){return B()},disableColor:!0})}}),s(w,{get when(){return N()},get children(){return s(W,{get title(){return e("home.toolbar.archive.input_password")},password:()=>O,setPassword:e=>O=e,enterCallback:()=>ue(),get children(){return s(b,{get when(){return G()},get children(){return s(y,{color:"$danger9",get children(){return e("home.toolbar.archive.incorrect_password")}})}})}})}}),s(w,{get when(){return k(()=>!N())()&&""===B()},get children(){return s(x,{get loading(){return M()},get children(){return s(j,{class:"list",w:"$full",spacing:"$1",get children(){return[s(R,{sortCallback:ge,disableCheckbox:!0}),s(h,{get each(){return(()=>{let e=se();Z()&&(e=e.sort((e,r)=>(Y()?-1:1)*J(e[Z()],r[Z()])));let r=te();if(""!==r){let t=[],n=[];e.forEach(e=>(e.is_dir?t:n).push(e)),e="front"===r?t.concat(n):n.concat(t)}return e})()},children:(e,r)=>{let t,n=(V().length>0?"/"+V().join("/"):"")+"/"+e.name;if(!e.is_dir){const e=E.includes("?");t=E+`${e?"&":"?"}inner=${_(n,!0)}`,""!==O&&(t+=`&pass=${encodeURIComponent(O)}`),""!==I&&(t+=`&sign=${I}`)}return s(re,{obj:e,get index(){return r()},jumpCallback:()=>X(V().concat(e.name)),innerPath:n,url:t,pass:O})}}),s(ne,{})]}})}})}})]}}),s(b,{get when(){return""!==T()},get children(){return[s(v,{}),s(y,{w:"$full",pl:"$1",pr:"$1",get children(){return T()}})]}})]}})})}}});
