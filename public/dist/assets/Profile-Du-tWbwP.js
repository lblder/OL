import{K as o,aZ as h,bi as b,ag as v,o as e,bV as P,y,X as g,bJ as d,bw as u,bg as i,aM as I,bh as n,bl as q}from"./index-CsB5zT4W.js";import{b as T}from"./useTitle-C7kyrev7.js";const F=()=>{T("tenant.sidemenu.profile");const r=y(),[t,l]=o(""),[a,c]=o(""),[p,w]=o(""),[f,m]=h(()=>b.post("/me/update",{username:v().username,old_password:t(),password:a()})),_=async()=>{if(!t()){n.warning(r("users.old_password_required"));return}if(!a()){n.warning(r("users.new_password_required"));return}if(a()!==p()){n.warning(r("users.confirm_password_not_same"));return}const s=await m();q(s,()=>{n.success(r("users.update_profile_success")),l(""),c(""),w("")})};return e(g,{w:"$full",spacing:"$4",alignItems:"start",get children(){return[e(P,{get children(){return r("tenant.profile.change_password")}}),e(g,{w:"$full",spacing:"$4",alignItems:"start",get children(){return[e(d,{required:!0,get children(){return[e(u,{for:"old_password",get children(){return r("users.old_password")}}),e(i,{id:"old_password",type:"password",placeholder:"********",get value(){return t()},onInput:s=>l(s.currentTarget.value)})]}}),e(d,{required:!0,get children(){return[e(u,{for:"new_password",get children(){return r("users.new_password")}}),e(i,{id:"new_password",type:"password",placeholder:"********",get value(){return a()},onInput:s=>c(s.currentTarget.value)})]}}),e(d,{required:!0,get children(){return[e(u,{for:"confirm_password",get children(){return r("users.confirm_password")}}),e(i,{id:"confirm_password",type:"password",placeholder:"********",get value(){return p()},onInput:s=>w(s.currentTarget.value)})]}}),e(I,{get loading(){return f()},onClick:_,colorScheme:"info",get children(){return r("global.save")}})]}})]}})};export{F as default};
