System.register(["./index-legacy-VniDFTuT.js","./useTitle-legacy-CH79vzdE.js","./DeletePopover-legacy-CG3nmYlv.js"],function(e,r){"use strict";var n,t,c,l,s,a,i,u,g,o,d,h,m,b,$,f,p,y,_,k,w,C,S,v,j,x;return{setters:[e=>{n=e.o,t=e.y,c=e.ck,l=e.u,s=e.aZ,a=e.bi,i=e.K,u=e.cT,g=e.ac,o=e.aM,d=e.a2,h=e.cU,m=e.cV,b=e.cW,$=e.F,f=e.cX,p=e.cY,y=e.cZ,_=e.bl,k=e.bh,w=e.X,C=e.aD,S=e.aC,v=e.af},e=>{j=e.b},e=>{x=e.D}],execute:function(){const r=e=>{const r=t();return n(c,{get colorScheme(){return e.yes?"success":"danger"},get children(){return r("global."+(e.yes?"yes":"no"))}})},D=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return n(c,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},X=e=>{const r=t();return n(g,{spacing:"$0_5",get children(){return n($,{each:C,children:(t,c)=>n(S,{get label(){return r(`users.permissions.${t}`)},get children(){return n(d,{boxSize:"$2",rounded:"$full",get bg(){return`$${v.can(e.user,c())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=t();j("manage.sidemenu.users");const{to:c}=l(),[C,S]=s(()=>a.get("/admin/user/list")),[v,T]=i([]),Z=async()=>{const e=await S();_(e,e=>T(e.content))};Z();const[z,F]=u(e=>a.post(`/admin/user/delete?id=${e}`)),[H,I]=u(e=>a.post(`/admin/user/cancel_2fa?id=${e}`));return n(w,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[n(g,{spacing:"$2",get children(){return[n(o,{colorScheme:"accent",get loading(){return C()},onClick:Z,get children(){return e("global.refresh")}}),n(o,{onClick:()=>{c("/@manage/users/add")},get children(){return e("global.add")}})]}}),n(d,{w:"$full",overflowX:"auto",get children(){return n(h,{highlightOnHover:!0,dense:!0,get children(){return[n(m,{get children(){return n(b,{get children(){return[n($,{each:["username","base_path","role","permission","available"],children:r=>n(f,{get children(){return e(`users.${r}`)}})}),n(f,{get children(){return e("global.operations")}})]}})}}),n(p,{get children(){return n($,{get each(){return v()},children:t=>n(b,{get children(){return[n(y,{get children(){return t.username}}),n(y,{get children(){return t.base_path}}),n(y,{get children(){return n(D,{get role(){return t.role}})}}),n(y,{get children(){return n(X,{user:t})}}),n(y,{get children(){return n(r,{get yes(){return!t.disabled}})}}),n(y,{get children(){return n(g,{spacing:"$2",get children(){return[n(o,{onClick:()=>{c(`/@manage/users/edit/${t.id}`)},get children(){return e("global.edit")}}),n(x,{get name(){return t.username},get loading(){return z()===t.id},onClick:async()=>{const r=await F(t.id);_(r,()=>{k.success(e("global.delete_success")),Z()})}}),n(o,{colorScheme:"accent",get loading(){return H()===t.id},onClick:async()=>{const r=await I(t.id);_(r,()=>{k.success(e("users.cancel_2fa_success")),Z()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
