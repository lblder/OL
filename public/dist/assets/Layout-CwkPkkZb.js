const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Folder-BC_3mmUD.js","assets/index-CsB5zT4W.js","assets/index-DYLAoZjS.css","assets/style-BhP5neJU.js","assets/style-qq4T_k44.css","assets/index-DBnL0RpI.js","assets/icon-BfaWsS4s.js","assets/index-Bc2gP8al.js","assets/video_box-C0gypJvQ.js","assets/artplayer-C5-Hz-Y-.js","assets/Paginator-CZdTa2_8.js","assets/index-DUExJ8y_.js","assets/mark-DcE7yjIR.js","assets/mark-pZUjROFs.css","assets/useTitle-C7kyrev7.js","assets/FolderTree-s4yEnMk2.js","assets/index-DlLE0hg-.js","assets/index-LqbMjJST.js","assets/share-2qqjNftT.js","assets/File-C0mGUJMc.js","assets/browser-D2V2ir_S.js","assets/Password-BFrN1jfs.js","assets/PackageDownload-CGtSMj_y.js","assets/StreamSaver-ISsQe9xL.js","assets/Upload-B_-F2JeP.js","assets/index.esm-YAsqhZv0.js"])))=>i.map(i=>d[i]);
import{u as x,g as U,j as L,k as Y,o as e,q as we,F as Fe,r as zt,x as Z,y as F,B as Lt,z as Nt,A as Ht,C as bt,D as wt,S as v,E as jt,G as qt,H as He,I as Wt,J as Ye,K as _,L as Ze,M as Se,N as T,O as Ut,P as $,Q as Be,R as O,T as De,U as st,_ as _t,V as B,W as Ce,X as K,Y as Oe,Z as Re,$ as Vt,a0 as Kt,a1 as Gt,a2 as pe,a3 as Jt,a4 as yt,a5 as et,a6 as Xt,a7 as Yt,a8 as Qt,a9 as Ft,aa as tt,ab as D,ac as R,ad as fe,ae as Zt,af as Ie,ag as xe,ah as rt,ai as Te,aj as Ue,ak as kt,al as $t,am as oe,an as nt,ao as re,ap as er,aq as tr,ar as ot,as as rr,at as nr,au as at,av as or,aw as ar,ax as Ve,ay as h,az as vt,aA as lr,aB as sr,aC as Ct,aD as ir,aE as cr,aF as C,aG as le,aH as se,aI as ie,aJ as ee,aK as _e,aL as ce,aM as S,aN as ue,aO as ur,aP as dr,aQ as xt,aR as gr,aS as hr,aT as it,aU as mr,aV as pr,aW as fr,aX as br,aY as wr,aZ as z,a_ as _r,a$ as V,b0 as j,b1 as ye,b2 as yr,b3 as Fr,b4 as kr,b5 as lt,b6 as $r,b7 as vr,b8 as Cr,b9 as xr,ba as Sr,bb as Ke,bc as Dr,bd as Or,be as Er,bf as ct,bg as ae,bh as St,bi as Dt,bj as Ar,bk as ut,bl as Ot,bm as Mr,bn as Br,bo as Rr,bp as Ir,bq as Tr,br as Pr,bs as zr,bt as Lr,bu as Nr,bv as Hr,bw as jr,bx as Me,by as be,bz as qr,bA as Wr,bB as Ur,bC as Vr,bD as Kr,bE as Gr,bF as Jr,bG as Xr,bH as Yr,bI as Qr,bJ as Zr,bK as en,bL as Qe,bM as tn,bN as rn,bO as Ee,bP as Ge,bQ as nn,bR as on,bS as an}from"./index-CsB5zT4W.js";import{u as ln,a as sn}from"./useTitle-C7kyrev7.js";import{L as cn,A as un,C as dn,a as gn,b as hn,B as mn,c as pn,T as fn,d as bn,e as wn,f as _n,g as yn,h as Fn,i as kn,j as dt,k as $n}from"./index-DUExJ8y_.js";import{F as vn,M as je}from"./FolderTree-s4yEnMk2.js";import{F as Et,a as Cn,b as xn}from"./index-Bc2gP8al.js";import{T as Sn}from"./index-DlLE0hg-.js";import{I as Dn,u as On,M as qe,R as En,b as gt,c as Pe,E as Je,O as Ae,a as Xe}from"./index-DBnL0RpI.js";import{R as An}from"./index-LqbMjJST.js";import{r as Mn,g as Bn,m as Rn}from"./share-2qqjNftT.js";const In=()=>{const{pathname:t,isShare:r}=x(),n=U(()=>{var i;if(r()){const u=t().split("/").filter(Boolean);return["@s/".concat((i=u[1])!=null?i:""),...u.slice(2)]}else return["",...t().split("/").filter(Boolean)]}),o=F(),{setPathAs:l}=L(),a=U(()=>{const i={_after:{content:"",backgroundColor:"$background",position:"absolute",height:"100%",width:"99vw",zIndex:-1,transform:"translateX(-50%)",left:"50%",top:0}};switch(Y.position_of_header_navbar){case"only_navbar_sticky":return{...i,position:"sticky",zIndex:"$sticky",top:0};case"sticky":return{...i,position:"sticky",zIndex:"$sticky",top:60};default:return{_after:void 0,position:void 0,zIndex:void 0,top:void 0}}});return e(qt,we(a,{background:"$background",class:"nav",w:"$full",get children(){return e(Fe,{get each(){return n()},children:(i,u)=>{const d=U(()=>u()===n().length-1),g=n().slice(0,u()+1).join("/"),p=zt(g);let s=()=>i;return!r()&&s()===""?s=()=>Z("home_icon")+o("manage.sidemenu.home"):r()&&u()===0&&(s=()=>Z("share_icon")+o("manage.sidemenu.shares")),e(Lt,{class:"nav-item",get children(){return[e(Nt,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{backgroundColor:wt(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return d()},get as(){return d()?void 0:bt},get href(){return Ht(p)},onMouseEnter:()=>l(g),get children(){return s()}}),e(v,{get when(){return!d()},get children(){return e(jt,{class:"nav-separator"})}})]}})}})}}))},Tn=De(()=>Oe(()=>import("./Folder-BC_3mmUD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),Pn=De(()=>Oe(()=>import("./File-C0mGUJMc.js").then(t=>t.a),__vite__mapDeps([19,1,2,6,7,5,20,11]))),zn=De(()=>Oe(()=>import("./Password-BFrN1jfs.js"),__vite__mapDeps([21,1,2]))),[Ln,Nn]=_(),Hn=()=>{const t=F(),r=He("white","$neutral3"),{pathname:n,searchParams:o,isShare:l}=x(),{handlePathChange:a,refresh:i}=L(),u=Wt(),d=U(()=>u.type==="pagination"?parseInt(o.page,10)||1:void 0);let g,p;return Ye(Re([n,d],async([s,f])=>{o.pwd&&st(o.pwd),g&&Vt(g,p),g=s,p=f,ln(),await a(s,f)})),e(K,{ref:s=>Nn(s),class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return r()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return e(Ze,{get fallback(){return e(Be,{})},get children(){return e(Se,{get children(){return[e(T,{get when(){return $.err},get children(){return e(Ut,{get msg(){return $.err},disableColor:!0})}}),e(T,{get when(){return[O.FetchingObj,O.FetchingObjs].includes($.state)},get children(){return e(Be,{})}}),e(T,{get when(){return $.state===O.NeedPassword},get children(){return e(zn,{get title(){return Ce(()=>!!l())()?t("shares.input_password"):t("home.input_password")},password:_t,setPassword:st,enterCallback:()=>i(!0),get children(){return e(v,{get when(){return!l()},get children(){return[e(B,{get children(){return t("global.have_account")}}),e(B,{color:"$info9",as:cn,get href(){return"/@login?redirect=".concat(encodeURIComponent(location.pathname))},get children(){return t("global.go_login")}})]}})}})}}),e(T,{get when(){return[O.Folder,O.FetchingMore].includes($.state)},get children(){return e(Tn,{})}}),e(T,{get when(){return $.state===O.File},get children(){return e(Pn,{})}})]}})}})}})};function ht(t){const r=He("white","$neutral3"),{proxyLink:n}=Kt();x();const o=U(Re(()=>$.state,()=>{if(![O.FetchingMore,O.Folder,O.File].includes($.state))return"";if([O.FetchingMore,O.Folder].includes($.state)){const i=$.objs.find(u=>t.files.find(d=>d.toLowerCase()===u.name.toLowerCase()));if(i)return n(i,!0)}return $[t.fromMeta]&&typeof $[t.fromMeta]=="string"?$[t.fromMeta]:""})),l=async i=>{let u={content:i};return/^https?:\/\//g.test(i)&&(u=await Xt(i)),u},[a]=Gt(o,l);return e(v,{get when(){return Ce(()=>!!et("readme_autorender"))()&&o()},get children(){return e(pe,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return r()},shadow:"$lg",get children(){return e(Jt,{get loading(){return a.loading},get children(){return e(yt,{get children(){var i;return(i=a())==null?void 0:i.content},readme:!0,get toc(){return t.fromMeta==="readme"}})}})}})}})}const At=t=>{const r=Z("home_container");return e(Se,{get fallback(){return e(pe,{w:"min(99%, 980px)",get children(){return t.children}})},get children(){return e(T,{when:r==="hope_container",get children(){return e(Yt,{get children(){return t.children}})}})}})};function jn(){const{to:t}=x(),r=Qt(),[n,o]=_(),[l,a]=_(),[i,u]=_(-999),d=()=>u(0),g=()=>{const s=Ln(),f=l();if(!s||!f)return;const b=s.offsetLeft>50?16:0;f.clientWidth<s.offsetLeft-b?u(0):u("calc(-100% + ".concat(s.offsetLeft,"px - ").concat(b,"px)"))};let p;return Ft(()=>{const s=n();s==null||s.setPath(r.pathname),p=requestAnimationFrame(g),window.addEventListener("resize",g),D(()=>window.removeEventListener("resize",g))}),Ye(Re(()=>$.state,()=>{cancelAnimationFrame(p),p=requestAnimationFrame(g)})),Ye(Re(()=>r.pathname,()=>{const s=n();s==null||s.setPath(r.pathname)})),e(pe,{get as(){return tt.div},initial:{x:-999},get animate(){return{x:i()}},zIndex:"$overlay",pos:"fixed",left:3,top:3,h:"calc(100vh - 6px)",minW:180,p:"$2",overflow:"auto",shadow:"$lg",rounded:"$lg",bgColor:"white",_dark:{bgColor:"$neutral3"},onMouseEnter:d,onMouseLeave:g,ref:s=>a(s),get children(){return e(vn,{autoOpen:!0,showEmptyIcon:!0,showHiddenFolder:!1,onChange:s=>t(s),handle:s=>o(s)})}})}function qn(){const t=U(()=>Y.show_sidebar!=="none");return e(v,{get when(){return t()},get children(){return e(jn,{})}})}const Wn=()=>e(At,{get children(){return e(K,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[e(ht,{files:["header.md","top.md","index.md"],fromMeta:"header"}),e(In,{}),e(Hn,{}),e(ht,{files:["readme.md","footer.md","bottom.md"],fromMeta:"readme"}),e(qn,{})]}})}});var Un=fe("<span>|");const Vn=()=>{const t=F();return e(K,{class:"footer",w:"$full",py:"$4",get children(){return e(R,{spacing:"$1",get children(){return[e(Zt,{href:"https://github.com/OpenListTeam/OpenList",external:!0,get children(){return t("home.footer.powered_by")}}),Un(),e(un,{as:bt,get href(){return Ie.is_guest(xe())?"/@login":"/@manage"},get children(){return t(Ie.is_guest(xe())?"login.login":"home.footer.manage")}})]}})}})},mt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function Kn(t,r,n){r/=100,n/=100;let o=(l,a=(l+t/60)%6)=>n-n*r*Math.max(Math.min(a,4-a,1),0);return[o(5)*255,o(3)*255,o(1)*255]}function Gn(t,r,n){r/=100,n/=100;let o=r*Math.min(n,1-n),l=(a,i=(a+t/30)%12)=>n-o*Math.max(Math.min(i-3,9-i,1),-1);return[l(0)*255,l(8)*255,l(4)*255]}const G="^\\s*",J="\\s*$",de="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",P="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",he="([0-9A-Fa-f])",me="([0-9A-Fa-f]{2})",Mt=new RegExp("".concat(G,"hsl\\s*\\(").concat(P,",").concat(de,",").concat(de,"\\)").concat(J)),Bt=new RegExp("".concat(G,"hsv\\s*\\(").concat(P,",").concat(de,",").concat(de,"\\)").concat(J)),Rt=new RegExp("".concat(G,"hsla\\s*\\(").concat(P,",").concat(de,",").concat(de,",").concat(P,"\\)").concat(J)),It=new RegExp("".concat(G,"hsva\\s*\\(").concat(P,",").concat(de,",").concat(de,",").concat(P,"\\)").concat(J)),Jn=new RegExp("".concat(G,"rgb\\s*\\(").concat(P,",").concat(P,",").concat(P,"\\)").concat(J)),Xn=new RegExp("".concat(G,"rgba\\s*\\(").concat(P,",").concat(P,",").concat(P,",").concat(P,"\\)").concat(J)),Yn=new RegExp("".concat(G,"#").concat(he).concat(he).concat(he).concat(J)),Qn=new RegExp("".concat(G,"#").concat(me).concat(me).concat(me).concat(J)),Zn=new RegExp("".concat(G,"#").concat(he).concat(he).concat(he).concat(he).concat(J)),eo=new RegExp("".concat(G,"#").concat(me).concat(me).concat(me).concat(me).concat(J));function M(t){return parseInt(t,16)}function to(t){try{let r;if(r=Rt.exec(t))return[Le(r[1]),ne(r[5]),ne(r[9]),ve(r[13])];if(r=Mt.exec(t))return[Le(r[1]),ne(r[5]),ne(r[9]),1];throw new Error("[seemly/hsla]: Invalid color value ".concat(t,"."))}catch(r){throw r}}function ro(t){try{let r;if(r=It.exec(t))return[Le(r[1]),ne(r[5]),ne(r[9]),ve(r[13])];if(r=Bt.exec(t))return[Le(r[1]),ne(r[5]),ne(r[9]),1];throw new Error("[seemly/hsva]: Invalid color value ".concat(t,"."))}catch(r){throw r}}function Tt(t){try{let r;if(r=Qn.exec(t))return[M(r[1]),M(r[2]),M(r[3]),1];if(r=Jn.exec(t))return[Q(r[1]),Q(r[5]),Q(r[9]),1];if(r=Xn.exec(t))return[Q(r[1]),Q(r[5]),Q(r[9]),ve(r[13])];if(r=Yn.exec(t))return[M(r[1]+r[1]),M(r[2]+r[2]),M(r[3]+r[3]),1];if(r=eo.exec(t))return[M(r[1]),M(r[2]),M(r[3]),ve(M(r[4])/255)];if(r=Zn.exec(t))return[M(r[1]+r[1]),M(r[2]+r[2]),M(r[3]+r[3]),ve(M(r[4]+r[4])/255)];if(t in mt)return Tt(mt[t]);if(Mt.test(t)||Rt.test(t)){const[n,o,l,a]=to(t);return[...Gn(n,o,l),a]}else if(Bt.test(t)||It.test(t)){const[n,o,l,a]=ro(t);return[...Kn(n,o,l),a]}throw new Error("[seemly/rgba]: Invalid color value ".concat(t,"."))}catch(r){throw r}}function no(t){return t>1?1:t<0?0:t}function pt(t,r,n,o){return"rgba(".concat(Q(t),", ").concat(Q(r),", ").concat(Q(n),", ").concat(no(o),")")}function ze(t,r){const[n,o,l,a=1]=Array.isArray(t)?t:Tt(t);return typeof r.alpha=="number"?pt(n,o,l,r.alpha):pt(n,o,l,a)}function ve(t){const r=Math.round(Number(t)*100)/100;return r>1?1:r<0?0:r}function Le(t){const r=Math.round(Number(t));return r>=360||r<0?0:r}function Q(t){const r=Math.round(Number(t));return r>255?255:r<0?0:r}function ne(t){const r=Math.round(Number(t));return r>100?100:r<0?0:r}const oo={list:Et,grid:kt,image:$t},ao=()=>{const t=F();return e(ot,{get children(){return[e(rt,{as:Te,get color(){return oe()},get bgColor(){return ze(oe(),{alpha:.15})},get _hover(){return{bgColor:ze(oe(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return e(Se,{get children(){return[e(T,{get when(){return Ue()==="list"},get children(){return e(Et,{})}}),e(T,{get when(){return Ue()==="grid"},get children(){return e(kt,{})}}),e(T,{get when(){return Ue()==="image"},get children(){return e($t,{})}})]}})}}),e(nt,{get children(){return e(Fe,{get each(){return Object.entries(oo)},children:r=>e(re,{get icon(){return e(tr,{get component(){return r[1]}})},onSelect:()=>{er(r[0])},get children(){return t("home.layouts.".concat(r[0]))}})})}})]}})},lo=()=>{const t=Z("logo").split("\n"),r=He(t[0],t.pop()),n=U(()=>{switch(Y.position_of_header_navbar){case"sticky":return{position:"sticky",zIndex:"$sticky",top:0};default:return{position:void 0,zIndex:void 0,top:void 0}}});return e(vt,we(n,{bgColor:"$background",class:"header",w:"$full",get children(){return e(At,{get children(){return e(R,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[e(R,{class:"header-left",h:"44px",get children(){return e(rr,{get src(){return r()},h:"$full",w:"auto",get fallback(){return e(nr,{})}})}}),e(R,{class:"header-right",spacing:"$2",get children(){return e(v,{get when(){return $.state===O.Folder},get children(){return[e(v,{get when(){return Z("search_index")!=="none"},get children(){return e(R,{bg:"$neutral4",w:"$32",p:"$1",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",get color(){return oe()},get bgColor(){return ze(oe(),{alpha:.15})},get _hover(){return{bgColor:ze(oe(),{alpha:.2})}},onClick:()=>{h.emit("tool","search")},get children(){return[e(at,{as:or}),e(R,{get children(){return[Ce(()=>ar?e(Ve,{children:"Cmd"}):e(Ve,{children:"Ctrl"})),e(Ve,{children:"K"})]}})]}})}}),e(ao,{})]}})}})]}})}})}}))},te={rename:{icon:yn,color:"$accent9"},copy:{icon:_n,color:"$success9"},move:{icon:wn,color:"$warning9"},delete:{icon:sr,color:"$danger9"},decompress:{icon:bn,color:"$neutral9"},copy_link:{icon:fn,color:"$info9"},mkdir:{icon:gn,p:!0},recursive_move:{icon:Dn,p:!0},remove_empty_directory:{icon:hn,p:!0},batch_rename:{icon:mn,p:!0},new_file:{icon:dn,p:!0},cancel_select:{icon:Sn},download:{icon:lr,color:"$primary9"},share:{icon:pn,color:"$primary9"}},Ne=t=>{const r=ir.findIndex(o=>o===t.name);if(r!==-1&&!Ie.can(xe(),r))return null;const n=F();return e(Ct,{placement:"top",withArrow:!0,get label(){return n("home.toolbar.".concat(t.name))},get children(){return e(at,we({get class(){return"toolbar-".concat(t.name)},get _hover(){return{bgColor:wt()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=te[t.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=te[t.name])==null?void 0:o.icon},get color(){var o;return(o=te[t.name])==null?void 0:o.color}},t))}})},I=t=>{const r=F();return e(Ct,{get disabled(){return!t.tips},placement:"left",withArrow:!0,get label(){return r("home.toolbar.".concat(t.tips))},get children(){return e(at,we({get color(){return oe()},get _hover(){return{bgColor:oe(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return t.icon}},t))}})},so=()=>{const t=F(),{copySelectedPreviewPage:r,copySelectedRawLink:n}=cr(),o="neutral";return e(ot,{placement:"top",offset:10,get children(){return[e(rt,{as:Ne,name:"copy_link"}),e(nt,{get children(){return[e(re,{colorScheme:o,onSelect:()=>{r()},get children(){return t("home.toolbar.preview_page")}}),e(re,{colorScheme:o,onSelect:()=>{n()},get children(){return t("home.toolbar.down_link")}}),e(re,{colorScheme:o,onSelect:()=>{n(!0)},get children(){return t("home.toolbar.encode_down_link")}})]}})]}})};var io=fe("<p>");const co=()=>{const t=F(),r="neutral",{batchDownloadSelected:n,sendToAria2:o,playlistDownloadSelected:l}=On();return e(ot,{placement:"top",offset:10,get children(){return[e(rt,{as:Ne,name:"download"}),e(nt,{get children(){return[e(re,{colorScheme:r,onSelect:n,get children(){return t("home.toolbar.batch_download")}}),e(v,{get when(){return Ie.is_admin(xe())||et("package_download")},get children(){return[e(re,{colorScheme:r,onSelect:()=>{h.emit("tool","package_download")},get children(){return t("home.toolbar.package_download")}}),e(re,{colorScheme:r,onSelect:l,get children(){return t("home.toolbar.playlist_download")}})]}}),e(re,{colorScheme:r,onSelect:o,get children(){return t("home.toolbar.send_aria2")}})]}})]}})},uo=De(()=>Oe(()=>import("./PackageDownload-CGtSMj_y.js"),__vite__mapDeps([22,1,2,23]))),go=()=>{const t=F(),r=u=>{if(u==="package_download"){if(!et("package_download"))return;o()}};h.on("tool",r),D(()=>{h.off("tool",r)});const{isOpen:n,onOpen:o,onClose:l}=C(),[a,i]=_("pre_tips");return e(ue,{blockScrollOnMount:!1,get opened(){return n()},onClose:l,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return t("home.toolbar.package_download")}}),e(Ze,{get fallback(){return e(Be,{})},get children(){return e(v,{get when(){return a()==="pre_tips"},get fallback(){return e(uo,{onClose:l})},get children(){return[e(ee,{get children(){var u=io();return _e(u,()=>t("home.toolbar.pre_package_download-tips")),u}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:l,colorScheme:"neutral",get children(){return t("global.cancel")}}),e(S,{colorScheme:"info",onClick:()=>{i("package_download")},get children(){return t("global.confirm")}})]}})]}})}})]}})]}})},ho=()=>{const t=U(()=>[O.Folder,O.FetchingMore].includes($.state)&&ur()&&dr()),{isShare:r}=x();return e(gr,{exitBeforeEnter:!0,get children(){return e(v,{get when(){return t()},get children(){return e(pe,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return tt.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return e(R,{p:"$2",get bgColor(){return He("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[e(v,{get when(){return!r()},get children(){return e(Fe,{each:["rename","move","copy","delete","share","decompress"],children:n=>e(Ne,{name:n,onClick:()=>{h.emit("tool",n)}})})}}),e(so,{}),e(co,{}),e(Ne,{name:"cancel_select",onClick:()=>{xt(!1)}})]}})}})}})}})},mo=()=>{const{isOpen:t,onToggle:r}=C({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),n=U(()=>t()?"$4":"$5"),o=U(()=>$.state===O.Folder),{refresh:l}=L(),{isShare:a}=x();return e(pe,{class:"left-toolbar-box",pos:"fixed",get right(){return n()},get bottom(){return n()},get children(){return e(v,{get when(){return t()},get fallback(){return e(I,{class:"toolbar-toggle",as:dt,onClick:()=>{r()}})},get children(){return e(K,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return tt.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[e(K,{spacing:"$1",class:"left-toolbar-in",get children(){return[e(I,{as:An,tips:"refresh",onClick:()=>{l(void 0,!0)}}),e(v,{get when(){return Ce(()=>!!(o()&&!a()))()&&(it("write")||$.write)},get children(){return[e(I,{get as(){return te.new_file.icon},tips:"new_file",onClick:()=>{h.emit("tool","new_file")}}),e(I,{get as(){return te.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{h.emit("tool","mkdir")}}),e(I,{get as(){return te.recursive_move.icon},tips:"recursive_move",onClick:()=>{h.emit("tool","recursiveMove")}}),e(I,{get as(){return te.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{h.emit("tool","removeEmptyDirectory")}}),e(I,{get as(){return te.batch_rename.icon},tips:"batch_rename",onClick:()=>{xt(!0),h.emit("tool","batchRename")}}),e(I,{as:hr,tips:"upload",onClick:()=>{h.emit("tool","upload")}})]}}),e(v,{get when(){return Ce(()=>!!(o()&&!a()))()&&it("offline_download")},get children(){return e(I,{as:mr,pl:"0",tips:"offline_download",onClick:()=>{h.emit("tool","offline_download")}})}}),e(v,{get when(){return fr()},get children(){return e(I,{as:Fn,tips:"toggle_markdown_toc",onClick:()=>{pr(i=>!i)}})}}),e(I,{tips:"toggle_checkbox",as:kn,onClick:br}),e(I,{as:wr,tips:"local_settings",onClick:()=>{h.emit("tool","local_settings")}})]}}),e(I,{tips:"more",as:dt,onClick:r})]}})}})}})},po=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(_r),{pathname:i}=x(),{refresh:u}=L(),[d,g]=_(!1),p=s=>{s==="copy"&&(n(),g(!1))};return h.on("tool",p),D(()=>{h.off("tool",p)}),e(je,{get header(){return t("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:o,get loading(){return l()},get footerSlot(){return e(ye,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return t("home.conflict_policy.overwrite_existing")}})},onSubmit:async s=>{const f=await a(i(),s,V().map(b=>b.name),d());j(f,()=>{u(),o()})}})},fo=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(yr),{pathname:i}=x(),{refresh:u}=L(),[d,g]=_(!1),p=s=>{s==="move"&&(n(),g(!1))};return h.on("tool",p),D(()=>{h.off("tool",p)}),e(je,{get header(){return t("home.toolbar.choose_dst_folder")},get opened(){return r()},onClose:o,get loading(){return l()},get footerSlot(){return e(ye,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return t("home.conflict_policy.overwrite_existing")}})},onSubmit:async s=>{const f=await a(i(),s,V().map(b=>b.name),d());j(f,()=>{u(),o()})}})};var bo=fe("<p>");const wo=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(Fr),{refresh:i}=L(),{pathname:u}=x(),d=g=>{g==="delete"&&n()};return h.on("tool",d),D(()=>{h.off("tool",d)}),e(ue,{blockScrollOnMount:!1,get opened(){return r()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return t("home.toolbar.delete")}}),e(ee,{get children(){var g=bo();return _e(g,()=>t("home.toolbar.delete-tips")),g}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:o,colorScheme:"neutral",get children(){return t("global.cancel")}}),e(S,{colorScheme:"danger",get loading(){return l()},onClick:async()=>{const g=await a(u(),V().map(p=>p.name));j(g,()=>{i(),o()})},get children(){return t("global.confirm")}})]}})]}})]}})},_o=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(kr),{pathname:i}=x(),{refresh:u}=L(),[d,g]=_(!1),p=s=>{if(s==="rename"){if(!$r()){h.emit("tool","batchRename");return}n(),g(!1)}};return h.on("tool",p),D(()=>{h.off("tool",p)}),e(v,{get when(){return r()},get children(){return e(qe,{title:"home.toolbar.input_new_name",get footerSlot(){return e(ye,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return t("home.conflict_policy.overwrite_existing")}})},get isRenamingFile(){return!V()[0].is_dir},get opened(){return r()},onClose:o,get defaultValue(){var s,f;return(f=(s=V()[0])==null?void 0:s.name)!=null?f:""},get loading(){return l()},onSubmit:async s=>{const f=await a(lt(i(),V()[0].name),s,d());j(f,()=>{u(),o()})}})}})},yo=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(vr),{refresh:i}=L(),{pathname:u}=x(),[d,g]=_(!1),p=s=>{s==="new_file"&&(n(),g(!1))};return h.on("tool",p),D(()=>{h.off("tool",p)}),e(qe,{title:"home.toolbar.input_filename",get footerSlot(){return e(ye,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return t("home.conflict_policy.overwrite_existing")}})},get opened(){return r()},onClose:o,get loading(){return l()},onSubmit:async s=>{const f=await a(lt(u(),s),_t(),d());j(f,()=>{i(),o()})}})},Fo=()=>{const{isOpen:t,onOpen:r,onClose:n}=C(),[o,l]=z(Cr),{pathname:a}=x(),{refresh:i}=L(),u=d=>{d==="mkdir"&&r()};return h.on("tool",u),D(()=>{h.off("tool",u)}),e(qe,{title:"home.toolbar.input_dir_name",get opened(){return t()},onClose:n,get loading(){return o()},onSubmit:async d=>{const g=await l(lt(a(),d));j(g,()=>{i(),n()})}})};var ko=fe("<p>");const $o=()=>{const{isOpen:t,onOpen:r,onClose:n}=C(),{isOpen:o,onOpen:l,onClose:a}=C(),[i,u]=z(xr),{pathname:d}=x(),{refresh:g}=L(),[p,s]=_("cancel"),f=w=>{w==="recursiveMove"&&(r(),s("cancel"))};h.on("tool",f),D(()=>{h.off("tool",f)});const b=F();return[e(ue,{blockScrollOnMount:!1,get opened(){return t()},onClose:()=>n(),size:{"@initial":"xs","@md":"md"},get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return b("home.toolbar.recursive_move")}}),e(ee,{get children(){var w=ko();return _e(w,()=>b("home.toolbar.recursive_move_directory-tips")),w}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:()=>n(),colorScheme:"neutral",get children(){return b("global.cancel")}}),e(S,{onClick:()=>{n(),l()},colorScheme:"danger",get children(){return b("global.confirm")}})]}})]}})]}}),e(je,{get header(){return b("home.toolbar.choose_dst_folder")},get opened(){return o()},onClose:a,get loading(){return i()},get footerSlot(){return e(R,{mr:"auto",flex:"0.8",spacing:"$1",get children(){return e(Sr,{get value(){return p()},onChange:w=>s(w),get children(){return[e(Ke,{value:"cancel",get children(){return b("home.conflict_policy.cancel_if_exists")}}),e(Ke,{value:"overwrite",get children(){return b("home.conflict_policy.overwrite_existing")}}),e(Ke,{value:"skip",get children(){return b("home.conflict_policy.skip_existing")}})]}})}})},onSubmit:async w=>{const N=await u(d(),w,p());j(N,()=>{g(),a()})}})]};var vo=fe("<p>");const Co=()=>{const{isOpen:t,onOpen:r,onClose:n}=C(),{pathname:o}=x(),[l,a]=z(Dr),{refresh:i}=L(),u=g=>{g==="removeEmptyDirectory"&&r()};h.on("tool",u),D(()=>{h.off("tool",u)});const d=F();return e(ue,{blockScrollOnMount:!1,get opened(){return t()},onClose:n,size:{"@initial":"xs","@md":"md"},get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return d("home.toolbar.remove_empty_directory")}}),e(ee,{get children(){var g=vo();return _e(g,()=>d("home.toolbar.remove_empty_directory-tips")),g}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:n,colorScheme:"neutral",get children(){return d("global.cancel")}}),e(S,{colorScheme:"danger",get loading(){return l()},onClick:async()=>{const g=await a(o());j(g,()=>{i(),n()})},get children(){return d("global.confirm")}})]}})]}})]}})};var xo=fe("<p>");const So=()=>{const{isOpen:t,onOpen:r,onClose:n}=C(),{isOpen:o,onOpen:l,onClose:a}=C(),[i,u]=z(Or),{pathname:d}=x(),{refresh:g}=L(),[p,s]=_("1"),[f,b]=_(""),[w,N]=_(""),[ge,c]=_("string"),[k,E]=_([]),m=F(),A=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),q=y=>{y==="batchRename"&&l()};h.on("tool",q),D(()=>{h.off("tool",q)});const ke=()=>{if(!f()||!w()){St.warning(m("global.empty_input"));return}const y=new RegExp(f(),"g");let $e;if(p()==="1")$e=V().filter(H=>H.name.match(f())).map(H=>{const W=new Date(H.created),X=new Date(H.modified);return{src_name:H.name,new_name:H.name.replace(y,w()).replace("{created_year}",W.getFullYear().toString().padStart(4,"0")).replace("{created_month}",(W.getMonth()+1).toString().padStart(2,"0")).replace("{created_date}",W.getDate().toString().padStart(2,"0")).replace("{created_hour}",W.getHours().toString().padStart(2,"0")).replace("{created_minute}",W.getMinutes().toString().padStart(2,"0")).replace("{created_second}",W.getSeconds().toString().padStart(2,"0")).replace("{modified_year}",X.getFullYear().toString().padStart(4,"0")).replace("{modified_month}",(X.getMonth()+1).toString().padStart(2,"0")).replace("{modified_date}",X.getDate().toString().padStart(2,"0")).replace("{modified_hour}",X.getHours().toString().padStart(2,"0")).replace("{modified_minute}",X.getMinutes().toString().padStart(2,"0")).replace("{modified_second}",X.getSeconds().toString().padStart(2,"0"))}});else{let H=w();$e=V().map(W=>{let X="";const We=W.name.lastIndexOf(".");We!==-1&&(X=W.name.substring(We+1));const Pt={src_name:W.name,new_name:f()+H+"."+X};return H=(parseInt(H)+1).toString().padStart(H.length,"0"),Pt})}E($e),r(),a()};return[e(ue,{blockScrollOnMount:!1,get opened(){return o()},onClose:a,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return m("home.toolbar.batch_rename")}}),e(ee,{get children(){return[e(Er,{defaultValue:"1",onChange:y=>{s(y),y==="1"?c("string"):y==="2"&&c("number")},get children(){return e(R,{spacing:"$4",get children(){return[e(ct,{value:"1",get children(){return m("home.toolbar.regex_rename")}}),e(ct,{value:"2",get children(){return m("home.toolbar.sequential_renaming")}})]}})}}),e(K,{spacing:"$2",get children(){return[(()=>{var y=xo();return y.style.setProperty("margin","10px 0"),_e(y,e(v,{get when(){return p()==="1"},get children(){return m("home.toolbar.regular_rename")}}),null),_e(y,e(v,{get when(){return p()==="2"},get children(){return m("home.toolbar.sequential_renaming_desc")}}),null),y})(),e(ae,{id:"modal-input1",type:"string",get value(){return f()},onInput:y=>{b(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&ke()}}),e(ae,{id:"modal-input2",get type(){return ge()},get value(){return w()},onInput:y=>{N(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&ke()}})]}})]}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:()=>{s("1"),c("string"),a()},colorScheme:"neutral",get children(){return m("global.cancel")}}),e(S,{onClick:()=>ke(),get disabled(){return!f()||!w()},get children(){return m("global.ok")}})]}})]}})]}}),e(ue,{size:"xl",get opened(){return t()},onClose:n,get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return m("home.toolbar.regex_rename_preview")}}),e(ee,{get children(){return e(K,{class:"list",w:"$full",spacing:"$1",get children(){return[e(R,{class:"title",w:"$full",p:"$2",get children(){return[e(B,we({w:{"@initial":"50%","@md":"50%"}},A,{get children(){return m("home.toolbar.regex_rename_preview_old_name")}})),e(B,we({w:{"@initial":"50%","@md":"50%"}},A,{get children(){return m("home.toolbar.regex_rename_preview_new_name")}}))]}}),e(Fe,{get each(){return k()},children:(y,$e)=>e(En,{obj:y,get index(){return $e()}})})]}})}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{onClick:()=>{E([]),s("1"),c("string"),n(),a()},colorScheme:"neutral",get children(){return m("global.cancel")}}),e(S,{onClick:()=>{E([]),n(),l()},colorScheme:"neutral",get children(){return m("global.back")}}),e(S,{get loading(){return i()},onClick:async()=>{const y=await u(d(),k());j(y,()=>{E([]),b(""),N(""),s("1"),c("string"),g(),a(),n()})},get disabled(){return k().length==0},get children(){return m("global.ok")}})]}})]}})]}})]},Do=["upload_download_stream","delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"];function ft(t){return Pe.enc.Utf8.stringify(Pe.lib.WordArray.create(t))}function Oo(t){var a;const r=gt.decode(t),n=gt.encode(r.info),o=Pe.SHA1(Pe.lib.WordArray.create(n)).toString();let l={};return Number.isInteger((a=r==null?void 0:r.info)==null?void 0:a.length)&&(l.xl=r.info.length),r.info.name&&(l.dn=ft(r.info.name)),r.announce&&(l.tr=ft(r.announce)),"magnet:?xt=urn:btih:".concat(o,"&").concat(new URLSearchParams(l).toString())}const Eo=()=>{const t=F(),[r,n]=_([]),[o,l]=z(()=>Dt.get("/public/offline_download_tools")),[a,i]=_(""),[u,d]=_("upload_download_stream");Ft(async()=>{const c=await l();Ot(c,k=>{n(k),i(k[0])})});const{isOpen:g,onOpen:p,onClose:s}=C(),[f,b]=z(Ar),{pathname:w}=x(),N=c=>{c==="offline_download"&&p()};return h.on("tool",N),D(()=>{h.off("tool",N)}),e(qe,{title:"home.toolbar.offline_download",type:"text",get opened(){return g()},onClose:s,get loading(){return o()||f()},get tips(){return t("home.toolbar.offline_download-tips")},onDrop:async(c,k)=>{var E;if(c.preventDefault(),(E=c.dataTransfer)!=null&&E.files.length){const m=[];for(const A of c.dataTransfer.files)if(A.name.toLowerCase().endsWith(".torrent"))try{const q=await A.arrayBuffer();m.push(Oo(new Uint8Array(q)))}catch(q){console.error("Failed to convert torrent file to magnet link:",q)}m.length&&k(m.join("\n"))}},get topSlot(){return e(pe,{mb:"$2",get children(){return e(ut,{get value(){return a()},onChange:c=>{c!=="SimpleHttp"&&u()==="upload_download_stream"&&d("delete_on_upload_succeed"),i(c)},get options(){return r().map(c=>({value:c,label:c}))}})}})},get bottomSlot(){return e(pe,{mb:"$2",get children(){return e(ut,{get value(){return u()},onChange:c=>d(c),get options(){return Do.filter(c=>c=="upload_download_stream"?a()==="SimpleHttp":!0).map(c=>({value:c,label:t("home.toolbar.delete_policy.".concat(c))}))}})}})},onSubmit:async c=>{const k=await b(w(),c.split("\n"),a(),u());j(k,()=>{s()})}})},Ao=t=>{const r=F(),n=i=>{i===t.name&&l()};h.on("tool",n),D(()=>{h.off("tool",n)});const{isOpen:o,onOpen:l,onClose:a}=C();return e(ue,{get blockScrollOnMount(){return t.blockScrollOnMount},get opened(){return o()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[e(le,{}),e(se,{get children(){return[e(Mr,{}),e(ie,{get children(){return r(t.title)}}),e(ee,{get children(){return e(v,{get when(){return o()},get children(){return e(Ze,{get fallback(){return e(Be,{})},get children(){return t.children}})}})}})]}})]}})};function Mo(t){const r=F();return e(Zr,{get children(){return[e(jr,{get children(){return r("home.local_settings.".concat(t.key))}}),e(Se,{get fallback(){return e(ae,{get value(){return Y[t.key]},onInput:n=>{be(t.key,n.currentTarget.value)}})},get children(){return[e(T,{get when(){return t.type==="select"},get children(){return e(Me,{get id(){return t.key},get defaultValue(){return Y[t.key]},onChange:n=>be(t.key,n),get children(){return[e(qr,{get children(){return[e(Wr,{get children(){return r("global.choose")}}),e(Ur,{}),e(Vr,{})]}}),e(Kr,{get children(){return e(Gr,{get children(){return e(Fe,{get each(){return t.options},children:n=>e(Jr,{value:n,get children(){return[e(Xr,{get children(){return r("home.local_settings.".concat(t.key,"_options.").concat(n))}}),e(Yr,{})]}})})}})}})]}})}}),e(T,{get when(){return t.type==="boolean"},get children(){return e(Qr,{get defaultChecked(){return Y[t.key]==="true"},onChange:n=>{be(t.key,n.currentTarget.checked.toString())}})}}),e(T,{get when(){return t.type==="number"},get children(){return e(R,{get children(){return[e(Te,{"aria-label":"decrease",get icon(){return e(Cn,{})},onClick:()=>{be(t.key,Math.max(1,parseInt(Y[t.key])-1).toString())}}),e(ae,{type:"number",get value(){return Y[t.key]},onInput:n=>{be(t.key,n.currentTarget.value)},style:{"-moz-appearance":"textfield","::-webkit-inner-spin-button":{display:"none"},"::-webkit-outer-spin-button":{display:"none"}},class:"hide-spin"}),e(Te,{"aria-label":"increase",get icon(){return e(xn,{})},onClick:()=>{be(t.key,(parseInt(Y[t.key])+1).toString())}})]}})}})]}})]}})}const Bo=()=>{const{isOpen:t,onOpen:r,onClose:n}=C(),o=F(),l=a=>{a==="local_settings"&&r()};return h.on("tool",l),D(()=>{h.off("tool",l)}),e(Hr,{get opened(){return t()},placement:"right",onClose:n,get children(){return[e(Br,{}),e(Rr,{get children(){return[e(Ir,{}),e(Tr,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),e(Pr,{get children(){return[e(K,{spacing:"$2",get children(){return e(Fe,{get each(){return zr.filter(a=>!a.hidden)},children:a=>e(Mo,a)})}}),e(vt,{mt:"$4",get children(){return e(R,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[e(Lr,{}),e(Nr,{})]}})}})]}})]}})]}})};var Ro=fe("<div>");const Io=()=>{const t=F(),{isOpen:r,onOpen:n,onClose:o}=C(),[l,a]=z(en),{pathname:i}=x(),{refresh:u}=L(),[d,g]=_(""),[p,s]=_(""),[f,b]=_(!0),[w,N]=_(!1),ge=m=>{m==="decompress"&&(Qe(()=>{b(!0),g("/"),s("")}),n())},c=m=>{const{inner:A,pass:q}=JSON.parse(m);Qe(()=>{b(!1),g(A),s(q)}),n()};h.on("tool",ge),h.on("extract",c),D(()=>{h.off("tool",ge),h.off("extract",c)});const k=()=>d()==="/"?t("home.toolbar.choose_dst_folder"):t("home.toolbar.archive.extract_header",{path:d()}),E=()=>{let m=i();if(d()==="/")return{path:m,name:V().map(A=>A.name)};{let A=m.lastIndexOf("/");return{path:m.slice(0,A),name:[m.slice(A+1)]}}};return e(je,{get header(){return k()},get opened(){return r()},onClose:o,get loading(){return l()},onSubmit:async m=>{const{path:A,name:q}=E(),ke=await a(A,m,q,p(),d(),f(),w());j(ke,()=>{u(),o()})},get children(){return e(K,{spacing:"$1",alignItems:"flex-start",get children(){return[e(R,{width:"100%",spacing:"$1",get children(){return[e(B,{size:"sm",css:{whiteSpace:"nowrap"},get children(){return t("home.toolbar.decompress-pass")}}),e(ae,{get value(){return p()},onInput:m=>s(m.target.value),size:"sm",flexGrow:"1"})]}}),e(ye,{get checked(){return f()},onChange:m=>b(m.target.checked),get children(){return t("home.toolbar.decompress-cache-full")}}),e(ye,{get checked(){return w()},onChange:m=>N(m.target.checked),get children(){return t("home.toolbar.decompress-put-into-new")}}),Ro()]}})}})},To=()=>{const t=F(),[r,n]=_(""),{pathname:o}=x(),l=c=>{c==="share"&&(Qe(()=>{n(""),p(""),f(!0);const k=V().map(E=>{const m=o().endsWith("/")||E.name.startsWith("/")?"":"/";return"".concat(xe().base_path).concat(o()).concat(m).concat(E.name)});w({files:k,expires:null,pwd:"",max_accessed:0,order_by:Ae.None,order_direction:Xe.None,extract_folder:Je.None,remark:"",readme:"",header:""})}),i())};h.on("tool",l),D(()=>{h.off("tool",l)});const{isOpen:a,onOpen:i,onClose:u}=C(),{copy:d}=tn(),[g,p]=_(""),[s,f]=_(!0),[b,w]=rn({}),[N,ge]=z(()=>Dt.post("/share/create",b));return e(ue,{blockScrollOnMount:!1,get opened(){return a()},onClose:u,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[e(le,{}),e(se,{get children(){return[e(ie,{get children(){return t("home.toolbar.share")}}),e(Se,{get fallback(){return[e(ee,{get children(){return e(Ee,{variant:"filled",get value(){return r()},readonly:!0})}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{colorScheme:"primary",onClick:()=>{d(r())},get children(){return t("shares.copy_msg")}}),e(S,{colorScheme:"info",onClick:u,get children(){return t("global.confirm")}})]}})]},get children(){return e(T,{get when(){return r()===""},get children(){return[e(ee,{get children(){return e(K,{spacing:"$1",alignItems:"flex-start",get children(){return[e(B,{size:"sm",get children(){return t("shares.remark")}}),e(Ee,{size:"sm",get value(){return b.remark},onInput:c=>{w("remark",c.currentTarget.value)}}),e(B,{size:"sm",get children(){return t("shares.extract_folder")}}),e(Me,{size:"sm",get value(){return b.extract_folder},onChange:c=>{w("extract_folder",c)},get children(){return e(Ge,{get options(){return[{key:Je.Front,label:t("shares.extract_folders.front")},{key:Je.Back,label:t("shares.extract_folders.back")}]}})}}),e(B,{size:"sm",get children(){return t("shares.order_by")}}),e(Me,{size:"sm",get value(){return b.order_by},onChange:c=>{w("order_by",c)},get children(){return e(Ge,{get options(){return[{key:Ae.Name,label:t("shares.order_bys.name")},{key:Ae.Size,label:t("shares.order_bys.size")},{key:Ae.Modified,label:t("shares.order_bys.modified")}]}})}}),e(B,{size:"sm",get children(){return t("shares.order_direction")}}),e(Me,{size:"sm",get value(){return b.order_direction},onChange:c=>{w("order_direction",c)},get children(){return e(Ge,{get options(){return[{key:Xe.Asc,label:t("shares.order_directions.asc")},{key:Xe.Desc,label:t("shares.order_directions.desc")}]}})}}),e(B,{size:"sm",get children(){return t("shares.pwd")}}),e(R,{spacing:"$1",w:"$full",get children(){return[e(ae,{size:"sm",get value(){return b.pwd},onInput:c=>{w("pwd",c.currentTarget.value)}}),e(Te,{colorScheme:"neutral",size:"sm","aria-label":"random",get icon(){return e($n,{})},onClick:()=>{w("pwd",Mn())}})]}}),e(B,{size:"sm",get children(){return t("shares.max_accessed")}}),e(ae,{type:"number",size:"sm",get value(){return b.max_accessed},onInput:c=>{w("max_accessed",parseInt(c.currentTarget.value))}}),e(B,{size:"sm",get children(){return t("shares.expires")}}),e(ae,{size:"sm",get invalid(){return!s()},get value(){return g()},placeholder:"yyyy-MM-dd HH:mm:ss or +1w1d1H1m1s1ms",onInput:c=>{if(p(c.currentTarget.value),c.currentTarget.value===""){f(!0),w("expires",null);return}const k=Bn(c.currentTarget.value);isNaN(k.getTime())?f(!1):(f(!0),w("expires",k.toISOString()))}}),e(B,{size:"sm",get children(){return t("shares.readme")}}),e(Ee,{size:"sm",get value(){return b.readme},onInput:c=>{w("readme",c.currentTarget.value)}}),e(B,{size:"sm",get children(){return t("shares.header")}}),e(Ee,{size:"sm",get value(){return b.header},onInput:c=>{w("header",c.currentTarget.value)}})]}})}}),e(ce,{display:"flex",gap:"$2",get children(){return[e(S,{colorScheme:"neutral",onClick:u,get children(){return t("global.cancel")}}),e(S,{colorScheme:"info",get disabled(){return!s()},get loading(){return N()},onClick:async()=>{const c=await ge();Ot(c,k=>{const E=Rn(k,{site_title:Z("site_title")}),m=nn(Z("share_summary_content"),E);n(m)})},get children(){return t("global.confirm")}})]}})]}})}})]}})]}})},Po=De(()=>Oe(()=>import("./Upload-B_-F2JeP.js"),__vite__mapDeps([24,1,2,17,25]))),zo=()=>[e(po,{}),e(fo,{}),e(_o,{}),e(wo,{}),e(Io,{}),e(yo,{}),e(Fo,{}),e(To,{}),e($o,{}),e(Co,{}),e(So,{}),e(Eo,{}),e(go,{}),e(Ao,{name:"upload",title:"home.toolbar.upload",get children(){return e(Po,{})}}),e(Bo,{})],Lo=()=>e(an,{get children(){return[e(mo,{}),e(ho,{}),e(zo,{}),e(on,{})]}}),No=()=>{sn(Z("site_title"));const t=Z("announcement");return t&&St.render(e(yt,{children:t})),[e(lo,{}),e(Lo,{}),e(Wn,{}),e(Vn,{})]},Xo=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));export{Xo as L,te as o};
