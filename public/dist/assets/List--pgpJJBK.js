import{bM as O,j as K,u as P,o as t,ac as b,S as x,dG as g,aO as $,au as _,ay as v,am as z,V as c,k as A,cl as D,cw as L,bL as S,D as j,W as h,aa as T,K as k,J as W,aQ as B,dH as E,dI as H,dJ as y,q as m,y as F,dK as G,F as p,P as J,dL as R,X as V}from"./index-CsB5zT4W.js";import{b as q}from"./style-BhP5neJU.js";import{O as C,g as Q}from"./icon-BfaWsS4s.js";import{I as M,u as I}from"./helper-C1bScd5p.js";import"./index-Bc2gP8al.js";import"./index-DBnL0RpI.js";import"./viselect-DiY-CsSI.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],U=e=>{const{isHide:u}=O();if(u(e.obj))return null;const{setPathAs:d}=K(),{show:l}=q({id:1}),{pushHref:o,to:s}=P(),{openWithDoubleClick:a,toggleWithClick:i,restoreSelectionCache:f}=I(),w=()=>A.list_item_filename_overflow;return t(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(b,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:j()}},get cursor(){return a()||i()?"default":"pointer"},get bgColor(){return h(()=>!!e.obj.selected)()?j():void 0},"on:dblclick":()=>{a()&&(g(e.index,!0,!0),s(o(e.obj.name)))},"on:click":n=>{if(n.preventDefault(),!a()&&!(n.ctrlKey||n.metaKey||n.shiftKey)&&f()){if(i())return g(e.index,!e.obj.selected);s(o(e.obj.name))}},onMouseEnter:()=>{d(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{S(()=>{g(e.index,!0,!0)}),l(n,{props:e.obj})},get children(){return[t(b,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(x,{get when(){return $()},get children(){return t(M,{"on:mousedown":n=>{n.stopPropagation()},"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{g(e.index,n.target.checked)}})}}),t(_,{class:"icon",boxSize:"$6",get color(){return z()},get as(){return Q(e.obj)},mr:"$1",get cursor(){return e.obj.type!==C.IMAGE?"inherit":"pointer"},"on:click":n=>{e.obj.type===C.IMAGE&&(n.ctrlKey||n.metaKey||n.shiftKey||f()&&(v.emit("gallery",e.obj.name),n.preventDefault(),n.stopPropagation()))}}),t(c,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:w()==="multi_line"?"unset":"nowrap","overflow-x":w()==="scrollable"?"auto":"hidden",textOverflow:w()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(c,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return D(e.obj.size)}}),t(c,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return L(e.obj.modified)}})]}})}})},X=e=>{const u=F(),[d,l]=k(),[o,s]=k(!1);W(()=>{d()&&e.sortCallback(d(),o())});const a=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===d()?s(!o()):S(()=>{l(i.name),s(!1)})}});return t(b,{class:"title",w:"$full",p:"$2",get children(){return[t(b,{get w(){return r[0].w},spacing:"$1",get children(){return[t(x,{get when(){return h(()=>!e.disableCheckbox)()&&$()},get children(){return t(M,{get checked(){return H()},get indeterminate(){return E()},onChange:i=>{B(i.target.checked)}})}}),h(()=>h(()=>!!y())()?t(c,m(()=>a(r[0]),{get children(){return y()}})):t(c,m(()=>a(r[0]),{get children(){return u("home.obj.".concat(r[0].name))}})))]}}),t(c,m({get w(){return r[1].w}},()=>a(r[1]),{get children(){return u("home.obj.".concat(r[1].name))}})),t(c,m({get w(){return r[2].w}},()=>a(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return u("home.obj.".concat(r[2].name))}}))]}})},ie=()=>{const e=l=>{var s,a;const o=Array.from((a=(s=l.dataTransfer)==null?void 0:s.items)!=null?a:[]);for(let i=0;i<o.length;i++)if(o[i].kind==="file"){v.emit("tool","upload"),l.preventDefault();break}},{registerSelectContainer:u,captureContentMenu:d}=I();return u(),t(V,{onDragOver:e,"oncapture:contextmenu":d,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[t(X,{sortCallback:G}),t(p,{get each(){return J.objs},children:(l,o)=>t(U,{obj:l,get index(){return o()}})}),t(x,{get when(){return A.show_count_msg==="visible"},get children(){return t(c,{size:"sm",color:"$neutral11",get children(){return R()}})}})]}})};export{X as ListTitle,ie as default};
